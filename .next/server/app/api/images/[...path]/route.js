"use strict";(()=>{var e={};e.id=791,e.ids=[791],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3292:e=>{e.exports=require("fs/promises")},1017:e=>{e.exports=require("path")},337:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>d,originalPathname:()=>v,patchFetch:()=>j,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>f});var r={};a.r(r),a.d(r,{GET:()=>g});var o=a(5419),p=a(9108),i=a(9678),s=a(8070),n=a(3292),u=a(1017);async function g(e,{params:t}){try{let e=process.env.RAILWAY_SERVICE_NAME?"/tmp/uploads":"./uploads",a=(0,u.join)(e,...t.path);console.log(`Serving image from: ${a}`),console.log(`Upload directory: ${e}`),console.log(`Params path: ${t.path.join("/")}`);let r=await (0,n.readFile)(a),o=t.path[t.path.length-1].split(".").pop()?.toLowerCase();return new s.Z(r.buffer,{headers:{"Content-Type":{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp"}[o||""]||"application/octet-stream","Cache-Control":"public, max-age=3600"}})}catch(e){return console.error("Error serving image:",e),s.Z.json({error:"Image not found"},{status:404})}}let l=new o.AppRouteRouteModule({definition:{kind:p.x.APP_ROUTE,page:"/api/images/[...path]/route",pathname:"/api/images/[...path]",filename:"route",bundlePath:"app/api/images/[...path]/route"},resolvedPagePath:"/Users/mak/Desktop/PhotoSku/src/app/api/images/[...path]/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:c,serverHooks:h,headerHooks:d,staticGenerationBailout:f}=l,v="/api/images/[...path]/route";function j(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:c})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[638,206],()=>a(337));module.exports=r})();