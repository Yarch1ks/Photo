"use strict";(()=>{var e={};e.id=23,e.ids=[23],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3292:e=>{e.exports=require("fs/promises")},1017:e=>{e.exports=require("path")},4557:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>f,originalPathname:()=>k,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>g,serverHooks:()=>d,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>h});var a={};t.r(a),t.d(a,{GET:()=>l});var i=t(5419),o=t(9108),s=t(9678),n=t(8070),p=t(3292),u=t(1017);async function l(e,{params:r}){try{let e=process.env.RAILWAY_SERVICE_NAME?"/tmp/uploads":"./uploads",t=(0,u.join)(e,r.sku,r.file);console.log(`Serving image from: ${t}`),console.log(`SKU: ${r.sku}, File: ${r.file}`);let a=await (0,p.readFile)(t),i=r.file.split(".").pop()?.toLowerCase();return new n.Z(a.buffer,{headers:{"Content-Type":{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp"}[i||""]||"application/octet-stream","Cache-Control":"public, max-age=31536000, immutable"}})}catch(e){return console.error("Error serving image:",e),n.Z.json({error:"Image not found"},{status:404})}}let g=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/images/[sku]/[file]/route",pathname:"/api/images/[sku]/[file]",filename:"route",bundlePath:"app/api/images/[sku]/[file]/route"},resolvedPagePath:"/Users/mak/Desktop/PhotoSku/src/app/api/images/[sku]/[file]/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:c,serverHooks:d,headerHooks:f,staticGenerationBailout:h}=g,k="/api/images/[sku]/[file]/route";function v(){return(0,s.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:c})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[638,206],()=>t(4557));module.exports=a})();