"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/upload/route";
exports.ids = ["app/api/upload/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fmak%2FDesktop%2FPhotoSku%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmak%2FDesktop%2FPhotoSku&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fmak%2FDesktop%2FPhotoSku%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmak%2FDesktop%2FPhotoSku&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_mak_Desktop_PhotoSku_src_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/upload/route.ts */ \"(rsc)/./src/app/api/upload/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/upload/route\",\n        pathname: \"/api/upload\",\n        filename: \"route\",\n        bundlePath: \"app/api/upload/route\"\n    },\n    resolvedPagePath: \"/Users/mak/Desktop/PhotoSku/src/app/api/upload/route.ts\",\n    nextConfigOutput,\n    userland: _Users_mak_Desktop_PhotoSku_src_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/upload/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1cGxvYWQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1hayUyRkRlc2t0b3AlMkZQaG90b1NrdSUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZtYWslMkZEZXNrdG9wJTJGUGhvdG9Ta3UmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDTztBQUNwRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL3Bob3RvLXNrdS1wcm9jZXNzb3IvP2QzYjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL21hay9EZXNrdG9wL1Bob3RvU2t1L3NyYy9hcHAvYXBpL3VwbG9hZC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdXBsb2FkL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdXBsb2FkXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS91cGxvYWQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvbWFrL0Rlc2t0b3AvUGhvdG9Ta3Uvc3JjL2FwcC9hcGkvdXBsb2FkL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3VwbG9hZC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fmak%2FDesktop%2FPhotoSku%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmak%2FDesktop%2FPhotoSku&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/upload/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/upload/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_utils_validation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/utils/validation */ \"(rsc)/./src/lib/utils/validation.ts\");\n\n\n\n\nasync function POST(request) {\n    try {\n        const formData = await request.formData();\n        const sku = formData.get(\"sku\");\n        const files = formData.getAll(\"files\");\n        if (!sku) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"SKU is required\"\n            }, {\n                status: 400\n            });\n        }\n        if (!files || files.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"No files provided\"\n            }, {\n                status: 400\n            });\n        }\n        // Валидация SKU\n        if (!/^[a-zA-Z0-9_-]+$/.test(sku)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid SKU format. Only letters, numbers, -, _ are allowed\"\n            }, {\n                status: 400\n            });\n        }\n        // Создаем временную директорию для этого SKU\n        const uploadDir = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(process.cwd(), \"temp\", sku);\n        // Очищаем старые файлы для этого SKU, если они существуют\n        try {\n            const existingFiles = await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.readdir)(uploadDir);\n            if (existingFiles.length > 0) {\n                console.log(`Cleaning up ${existingFiles.length} old files for SKU: ${sku}`);\n                await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.rm)(uploadDir, {\n                    recursive: true,\n                    force: true\n                });\n                await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.mkdir)(uploadDir, {\n                    recursive: true\n                });\n            }\n        } catch (error) {\n            // Если директория не существует, просто создаем ее\n            await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.mkdir)(uploadDir, {\n                recursive: true\n            });\n        }\n        const processedFiles = [];\n        for (const file of files){\n            // Валидация размера (25MB max)\n            if (file.size > 25 * 1024 * 1024) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: `File ${file.name} exceeds 25MB limit`\n                }, {\n                    status: 400\n                });\n            }\n            // Валидация типа файла\n            const allowedTypes = [\n                \"image/jpeg\",\n                \"image/jpg\",\n                \"image/png\",\n                \"image/heic\",\n                \"video/mp4\",\n                \"video/quicktime\"\n            ];\n            if (!allowedTypes.includes(file.type)) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: `File ${file.name} has unsupported type: ${file.type}`\n                }, {\n                    status: 400\n                });\n            }\n            // Генерируем имя файла по формату sku_{NNN}.{ext}\n            const fileExtension = file.name.split(\".\").pop();\n            const fileIndex = processedFiles.length + 1;\n            const fileName = (0,_lib_utils_validation__WEBPACK_IMPORTED_MODULE_3__.generateFileName)(sku, fileIndex, fileExtension);\n            const filePath = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(uploadDir, fileName);\n            // Сохраняем файл\n            const bytes = await file.arrayBuffer();\n            const buffer = Buffer.from(bytes);\n            await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.writeFile)(filePath, buffer);\n            processedFiles.push({\n                id: `file_${fileIndex}`,\n                originalName: file.name,\n                fileName: fileName,\n                filePath: filePath,\n                type: file.type.startsWith(\"image/\") ? \"image\" : \"video\",\n                size: file.size,\n                sku: sku\n            });\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            files: processedFiles,\n            sku: sku\n        });\n    } catch (error) {\n        console.error(\"Upload error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS91cGxvYWQvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF1RDtBQUNJO0FBQ2hDO0FBQzhCO0FBRWxELGVBQWVPLEtBQUtDLE9BQW9CO0lBQzdDLElBQUk7UUFDRixNQUFNQyxXQUFXLE1BQU1ELFFBQVFDLFFBQVE7UUFDdkMsTUFBTUMsTUFBTUQsU0FBU0UsR0FBRyxDQUFDO1FBQ3pCLE1BQU1DLFFBQVFILFNBQVNJLE1BQU0sQ0FBQztRQUU5QixJQUFJLENBQUNILEtBQUs7WUFDUixPQUFPVixrRkFBWUEsQ0FBQ2MsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUFrQixHQUMzQjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsSUFBSSxDQUFDSixTQUFTQSxNQUFNSyxNQUFNLEtBQUssR0FBRztZQUNoQyxPQUFPakIsa0ZBQVlBLENBQUNjLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBb0IsR0FDN0I7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLGdCQUFnQjtRQUNoQixJQUFJLENBQUMsbUJBQW1CRSxJQUFJLENBQUNSLE1BQU07WUFDakMsT0FBT1Ysa0ZBQVlBLENBQUNjLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBOEQsR0FDdkU7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDZDQUE2QztRQUM3QyxNQUFNRyxZQUFZZCwwQ0FBSUEsQ0FBQ2UsUUFBUUMsR0FBRyxJQUFJLFFBQVFYO1FBRTlDLDBEQUEwRDtRQUMxRCxJQUFJO1lBQ0YsTUFBTVksZ0JBQWdCLE1BQU1uQixvREFBT0EsQ0FBQ2dCO1lBQ3BDLElBQUlHLGNBQWNMLE1BQU0sR0FBRyxHQUFHO2dCQUM1Qk0sUUFBUUMsR0FBRyxDQUFDLENBQUMsWUFBWSxFQUFFRixjQUFjTCxNQUFNLENBQUMsb0JBQW9CLEVBQUVQLElBQUksQ0FBQztnQkFDM0UsTUFBTU4sK0NBQUVBLENBQUNlLFdBQVc7b0JBQUVNLFdBQVc7b0JBQU1DLE9BQU87Z0JBQUs7Z0JBQ25ELE1BQU14QixrREFBS0EsQ0FBQ2lCLFdBQVc7b0JBQUVNLFdBQVc7Z0JBQUs7WUFDM0M7UUFDRixFQUFFLE9BQU9WLE9BQU87WUFDZCxtREFBbUQ7WUFDbkQsTUFBTWIsa0RBQUtBLENBQUNpQixXQUFXO2dCQUFFTSxXQUFXO1lBQUs7UUFDM0M7UUFFQSxNQUFNRSxpQkFBaUIsRUFBRTtRQUV6QixLQUFLLE1BQU1DLFFBQVFoQixNQUFPO1lBQ3hCLCtCQUErQjtZQUMvQixJQUFJZ0IsS0FBS0MsSUFBSSxHQUFHLEtBQUssT0FBTyxNQUFNO2dCQUNoQyxPQUFPN0Isa0ZBQVlBLENBQUNjLElBQUksQ0FDdEI7b0JBQUVDLE9BQU8sQ0FBQyxLQUFLLEVBQUVhLEtBQUtFLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztnQkFBQyxHQUNoRDtvQkFBRWQsUUFBUTtnQkFBSTtZQUVsQjtZQUVBLHVCQUF1QjtZQUN2QixNQUFNZSxlQUFlO2dCQUNuQjtnQkFBYztnQkFBYTtnQkFBYTtnQkFDeEM7Z0JBQWE7YUFDZDtZQUVELElBQUksQ0FBQ0EsYUFBYUMsUUFBUSxDQUFDSixLQUFLSyxJQUFJLEdBQUc7Z0JBQ3JDLE9BQU9qQyxrRkFBWUEsQ0FBQ2MsSUFBSSxDQUN0QjtvQkFBRUMsT0FBTyxDQUFDLEtBQUssRUFBRWEsS0FBS0UsSUFBSSxDQUFDLHVCQUF1QixFQUFFRixLQUFLSyxJQUFJLENBQUMsQ0FBQztnQkFBQyxHQUNoRTtvQkFBRWpCLFFBQVE7Z0JBQUk7WUFFbEI7WUFFQSxrREFBa0Q7WUFDbEQsTUFBTWtCLGdCQUFnQk4sS0FBS0UsSUFBSSxDQUFDSyxLQUFLLENBQUMsS0FBS0MsR0FBRztZQUM5QyxNQUFNQyxZQUFvQlYsZUFBZVYsTUFBTSxHQUFHO1lBQ2xELE1BQU1xQixXQUFXaEMsdUVBQWdCQSxDQUFDSSxLQUFLMkIsV0FBV0g7WUFDbEQsTUFBTUssV0FBV2xDLDBDQUFJQSxDQUFDYyxXQUFXbUI7WUFFakMsaUJBQWlCO1lBQ2pCLE1BQU1FLFFBQVEsTUFBTVosS0FBS2EsV0FBVztZQUNwQyxNQUFNQyxTQUFTQyxPQUFPQyxJQUFJLENBQUNKO1lBQzNCLE1BQU12QyxzREFBU0EsQ0FBQ3NDLFVBQVVHO1lBRTFCZixlQUFla0IsSUFBSSxDQUFDO2dCQUNsQkMsSUFBSSxDQUFDLEtBQUssRUFBRVQsVUFBVSxDQUFDO2dCQUN2QlUsY0FBY25CLEtBQUtFLElBQUk7Z0JBQ3ZCUSxVQUFVQTtnQkFDVkMsVUFBVUE7Z0JBQ1ZOLE1BQU1MLEtBQUtLLElBQUksQ0FBQ2UsVUFBVSxDQUFDLFlBQVksVUFBVTtnQkFDakRuQixNQUFNRCxLQUFLQyxJQUFJO2dCQUNmbkIsS0FBS0E7WUFDUDtRQUNGO1FBRUEsT0FBT1Ysa0ZBQVlBLENBQUNjLElBQUksQ0FBQztZQUN2Qm1DLFNBQVM7WUFDVHJDLE9BQU9lO1lBQ1BqQixLQUFLQTtRQUNQO0lBRUYsRUFBRSxPQUFPSyxPQUFPO1FBQ2RRLFFBQVFSLEtBQUssQ0FBQyxpQkFBaUJBO1FBQy9CLE9BQU9mLGtGQUFZQSxDQUFDYyxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBd0IsR0FDakM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9waG90by1za3UtcHJvY2Vzc29yLy4vc3JjL2FwcC9hcGkvdXBsb2FkL3JvdXRlLnRzPzUxMjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgd3JpdGVGaWxlLCBta2RpciwgcmVhZGRpciwgcm0gfSBmcm9tICdmcy9wcm9taXNlcydcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJ1xuaW1wb3J0IHsgZ2VuZXJhdGVGaWxlTmFtZSB9IGZyb20gJ0AvbGliL3V0aWxzL3ZhbGlkYXRpb24nXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCByZXF1ZXN0LmZvcm1EYXRhKClcbiAgICBjb25zdCBza3UgPSBmb3JtRGF0YS5nZXQoJ3NrdScpIGFzIHN0cmluZ1xuICAgIGNvbnN0IGZpbGVzID0gZm9ybURhdGEuZ2V0QWxsKCdmaWxlcycpIGFzIEZpbGVbXVxuICAgIFxuICAgIGlmICghc2t1KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdTS1UgaXMgcmVxdWlyZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIGlmICghZmlsZXMgfHwgZmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdObyBmaWxlcyBwcm92aWRlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8g0JLQsNC70LjQtNCw0YbQuNGPIFNLVVxuICAgIGlmICghL15bYS16QS1aMC05Xy1dKyQvLnRlc3Qoc2t1KSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnSW52YWxpZCBTS1UgZm9ybWF0LiBPbmx5IGxldHRlcnMsIG51bWJlcnMsIC0sIF8gYXJlIGFsbG93ZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vINCh0L7Qt9C00LDQtdC8INCy0YDQtdC80LXQvdC90YPRjiDQtNC40YDQtdC60YLQvtGA0LjRjiDQtNC70Y8g0Y3RgtC+0LPQviBTS1VcbiAgICBjb25zdCB1cGxvYWREaXIgPSBqb2luKHByb2Nlc3MuY3dkKCksICd0ZW1wJywgc2t1KVxuICAgIFxuICAgIC8vINCe0YfQuNGJ0LDQtdC8INGB0YLQsNGA0YvQtSDRhNCw0LnQu9GLINC00LvRjyDRjdGC0L7Qs9C+IFNLVSwg0LXRgdC70Lgg0L7QvdC4INGB0YPRidC10YHRgtCy0YPRjtGCXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nRmlsZXMgPSBhd2FpdCByZWFkZGlyKHVwbG9hZERpcilcbiAgICAgIGlmIChleGlzdGluZ0ZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coYENsZWFuaW5nIHVwICR7ZXhpc3RpbmdGaWxlcy5sZW5ndGh9IG9sZCBmaWxlcyBmb3IgU0tVOiAke3NrdX1gKVxuICAgICAgICBhd2FpdCBybSh1cGxvYWREaXIsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KVxuICAgICAgICBhd2FpdCBta2Rpcih1cGxvYWREaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vINCV0YHQu9C4INC00LjRgNC10LrRgtC+0YDQuNGPINC90LUg0YHRg9GJ0LXRgdGC0LLRg9C10YIsINC/0YDQvtGB0YLQviDRgdC+0LfQtNCw0LXQvCDQtdC1XG4gICAgICBhd2FpdCBta2Rpcih1cGxvYWREaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gICAgfVxuXG4gICAgY29uc3QgcHJvY2Vzc2VkRmlsZXMgPSBbXVxuXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAvLyDQktCw0LvQuNC00LDRhtC40Y8g0YDQsNC30LzQtdGA0LAgKDI1TUIgbWF4KVxuICAgICAgaWYgKGZpbGUuc2l6ZSA+IDI1ICogMTAyNCAqIDEwMjQpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgZXJyb3I6IGBGaWxlICR7ZmlsZS5uYW1lfSBleGNlZWRzIDI1TUIgbGltaXRgIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgLy8g0JLQsNC70LjQtNCw0YbQuNGPINGC0LjQv9CwINGE0LDQudC70LBcbiAgICAgIGNvbnN0IGFsbG93ZWRUeXBlcyA9IFtcbiAgICAgICAgJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvanBnJywgJ2ltYWdlL3BuZycsICdpbWFnZS9oZWljJyxcbiAgICAgICAgJ3ZpZGVvL21wNCcsICd2aWRlby9xdWlja3RpbWUnXG4gICAgICBdXG4gICAgICBcbiAgICAgIGlmICghYWxsb3dlZFR5cGVzLmluY2x1ZGVzKGZpbGUudHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgZXJyb3I6IGBGaWxlICR7ZmlsZS5uYW1lfSBoYXMgdW5zdXBwb3J0ZWQgdHlwZTogJHtmaWxlLnR5cGV9YCB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIC8vINCT0LXQvdC10YDQuNGA0YPQtdC8INC40LzRjyDRhNCw0LnQu9CwINC/0L4g0YTQvtGA0LzQsNGC0YMgc2t1X3tOTk59LntleHR9XG4gICAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gZmlsZS5uYW1lLnNwbGl0KCcuJykucG9wKClcbiAgICAgIGNvbnN0IGZpbGVJbmRleDogbnVtYmVyID0gcHJvY2Vzc2VkRmlsZXMubGVuZ3RoICsgMVxuICAgICAgY29uc3QgZmlsZU5hbWUgPSBnZW5lcmF0ZUZpbGVOYW1lKHNrdSwgZmlsZUluZGV4LCBmaWxlRXh0ZW5zaW9uISlcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gam9pbih1cGxvYWREaXIsIGZpbGVOYW1lKVxuXG4gICAgICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0YTQsNC50LtcbiAgICAgIGNvbnN0IGJ5dGVzID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpXG4gICAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShieXRlcylcbiAgICAgIGF3YWl0IHdyaXRlRmlsZShmaWxlUGF0aCwgYnVmZmVyKVxuXG4gICAgICBwcm9jZXNzZWRGaWxlcy5wdXNoKHtcbiAgICAgICAgaWQ6IGBmaWxlXyR7ZmlsZUluZGV4fWAsXG4gICAgICAgIG9yaWdpbmFsTmFtZTogZmlsZS5uYW1lLFxuICAgICAgICBmaWxlTmFtZTogZmlsZU5hbWUsXG4gICAgICAgIGZpbGVQYXRoOiBmaWxlUGF0aCxcbiAgICAgICAgdHlwZTogZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpID8gJ2ltYWdlJyA6ICd2aWRlbycsXG4gICAgICAgIHNpemU6IGZpbGUuc2l6ZSxcbiAgICAgICAgc2t1OiBza3VcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBmaWxlczogcHJvY2Vzc2VkRmlsZXMsXG4gICAgICBza3U6IHNrdVxuICAgIH0pXG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdVcGxvYWQgZXJyb3I6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJ3cml0ZUZpbGUiLCJta2RpciIsInJlYWRkaXIiLCJybSIsImpvaW4iLCJnZW5lcmF0ZUZpbGVOYW1lIiwiUE9TVCIsInJlcXVlc3QiLCJmb3JtRGF0YSIsInNrdSIsImdldCIsImZpbGVzIiwiZ2V0QWxsIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwibGVuZ3RoIiwidGVzdCIsInVwbG9hZERpciIsInByb2Nlc3MiLCJjd2QiLCJleGlzdGluZ0ZpbGVzIiwiY29uc29sZSIsImxvZyIsInJlY3Vyc2l2ZSIsImZvcmNlIiwicHJvY2Vzc2VkRmlsZXMiLCJmaWxlIiwic2l6ZSIsIm5hbWUiLCJhbGxvd2VkVHlwZXMiLCJpbmNsdWRlcyIsInR5cGUiLCJmaWxlRXh0ZW5zaW9uIiwic3BsaXQiLCJwb3AiLCJmaWxlSW5kZXgiLCJmaWxlTmFtZSIsImZpbGVQYXRoIiwiYnl0ZXMiLCJhcnJheUJ1ZmZlciIsImJ1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJwdXNoIiwiaWQiLCJvcmlnaW5hbE5hbWUiLCJzdGFydHNXaXRoIiwic3VjY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/upload/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/utils/validation.ts":
/*!*************************************!*\
  !*** ./src/lib/utils/validation.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatFileSize: () => (/* binding */ formatFileSize),\n/* harmony export */   formatProgress: () => (/* binding */ formatProgress),\n/* harmony export */   generateFileName: () => (/* binding */ generateFileName),\n/* harmony export */   isBarcodeDetectorSupported: () => (/* binding */ isBarcodeDetectorSupported),\n/* harmony export */   isCameraSupported: () => (/* binding */ isCameraSupported),\n/* harmony export */   isHeicFile: () => (/* binding */ isHeicFile),\n/* harmony export */   isImageFile: () => (/* binding */ isImageFile),\n/* harmony export */   isVideoFile: () => (/* binding */ isVideoFile),\n/* harmony export */   sanitizeFileName: () => (/* binding */ sanitizeFileName),\n/* harmony export */   skuSchema: () => (/* binding */ skuSchema),\n/* harmony export */   validateFile: () => (/* binding */ validateFile),\n/* harmony export */   validateSKU: () => (/* binding */ validateSKU)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n\n// Схема валидации SKU\nconst skuSchema = zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"SKU не может быть пустым\").max(50, \"SKU не может быть длиннее 50 символов\").regex(/^[a-zA-Z0-9\\-_\\/]+$/, \"SKU может содержать только буквы, цифры и символы -_/\").transform((value)=>value.toUpperCase());\n// Валидация SKU\nfunction validateSKU(sku) {\n    try {\n        skuSchema.parse(sku);\n        return {\n            isValid: true\n        };\n    } catch (error) {\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.ZodError) {\n            return {\n                isValid: false,\n                error: error.errors[0]?.message || \"Некорректный формат SKU\"\n            };\n        }\n        return {\n            isValid: false,\n            error: \"Произошла ошибка при валидации SKU\"\n        };\n    }\n}\n// Валидация файла\nfunction validateFile(file) {\n    const maxSize = parseInt(process.env.NEXT_PUBLIC_MAX_FILE_SIZE || \"26214400\") // 25MB\n    ;\n    if (file.size > maxSize) {\n        return {\n            isValid: false,\n            error: `Файл слишком большой. Максимальный размер: ${Math.round(maxSize / 1024 / 1024)}MB`\n        };\n    }\n    const allowedImageTypes = process.env.NEXT_PUBLIC_ALLOWED_IMAGE_TYPES?.split(\",\") || [\n        \"image/jpeg\",\n        \"image/png\",\n        \"image/heic\"\n    ];\n    const allowedVideoTypes = process.env.NEXT_PUBLIC_ALLOWED_VIDEO_TYPES?.split(\",\") || [\n        \"video/mp4\",\n        \"video/quicktime\"\n    ];\n    const allAllowedTypes = [\n        ...allowedImageTypes,\n        ...allowedVideoTypes\n    ];\n    if (!allAllowedTypes.includes(file.type)) {\n        const imageTypes = allowedImageTypes.join(\", \");\n        const videoTypes = allowedVideoTypes.join(\", \");\n        return {\n            isValid: false,\n            error: `Неподдерживаемый формат. Допустимые изображения: ${imageTypes}, видео: ${videoTypes}`\n        };\n    }\n    return {\n        isValid: true\n    };\n}\n// Генерация имени файла\nfunction generateFileName(sku, index, extension) {\n    const paddedIndex = index.toString().padStart(3, \"0\");\n    return `${sku}_${paddedIndex}.${extension}`;\n}\n// Проверка поддержки BarcodeDetector\nfunction isBarcodeDetectorSupported() {\n    return \"BarcodeDetector\" in window;\n}\n// Проверка поддержки MediaDevices\nfunction isCameraSupported() {\n    return \"mediaDevices\" in navigator && \"getUserMedia\" in navigator.mediaDevices;\n}\n// Форматирование размера файла\nfunction formatFileSize(bytes) {\n    if (bytes === 0) return \"0 Bytes\";\n    const k = 1024;\n    const sizes = [\n        \"Bytes\",\n        \"KB\",\n        \"MB\",\n        \"GB\"\n    ];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n}\n// Форматирование прогресса\nfunction formatProgress(progress) {\n    return `${Math.round(progress)}%`;\n}\n// Очистка имени файла от недопустимых символов\nfunction sanitizeFileName(name) {\n    return name.replace(/[^a-zA-Z0-9\\-_./]/g, \"_\");\n}\n// Проверка, является ли файл изображением\nfunction isImageFile(file) {\n    return file.type.startsWith(\"image/\");\n}\n// Проверка, является ли файл видео\nfunction isVideoFile(file) {\n    return file.type.startsWith(\"video/\");\n}\n// Проверка, является ли файл HEIC\nfunction isHeicFile(file) {\n    return file.type === \"image/heic\" || file.name.toLowerCase().endsWith(\".heic\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RTtBQUN6RTtBQUVBLDJCQUEyQjtBQUNwQixTQUFTTSxlQUFlQyxRQUFnQjtJQUM3QyxPQUFPLENBQUMsRUFBRW5DLEtBQUtDLEtBQUssQ0FBQ2tDLFVBQVUsQ0FBQyxDQUFDO0FBQ25DO0FBRUEsK0NBQStDO0FBQ3hDLFNBQVNDLGlCQUFpQkMsSUFBWTtJQUMzQyxPQUFPQSxLQUFLQyxPQUFPLENBQUMsc0JBQXNCO0FBQzVDO0FBRUEsMENBQTBDO0FBQ25DLFNBQVNDLFlBQVk5QyxJQUFVO0lBQ3BDLE9BQU9BLEtBQUtnQixJQUFJLENBQUMrQixVQUFVLENBQUM7QUFDOUI7QUFFQSxtQ0FBbUM7QUFDNUIsU0FBU0MsWUFBWWhELElBQVU7SUFDcEMsT0FBT0EsS0FBS2dCLElBQUksQ0FBQytCLFVBQVUsQ0FBQztBQUM5QjtBQUVBLGtDQUFrQztBQUMzQixTQUFTRSxXQUFXakQsSUFBVTtJQUNuQyxPQUFPQSxLQUFLZ0IsSUFBSSxLQUFLLGdCQUFnQmhCLEtBQUs0QyxJQUFJLENBQUNNLFdBQVcsR0FBR0MsUUFBUSxDQUFDO0FBQ3hFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGhvdG8tc2t1LXByb2Nlc3Nvci8uL3NyYy9saWIvdXRpbHMvdmFsaWRhdGlvbi50cz9hMzdkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnXG5cbi8vINCh0YXQtdC80LAg0LLQsNC70LjQtNCw0YbQuNC4IFNLVVxuZXhwb3J0IGNvbnN0IHNrdVNjaGVtYSA9IHouc3RyaW5nKClcbiAgLm1pbigxLCAnU0tVINC90LUg0LzQvtC20LXRgiDQsdGL0YLRjCDQv9GD0YHRgtGL0LwnKVxuICAubWF4KDUwLCAnU0tVINC90LUg0LzQvtC20LXRgiDQsdGL0YLRjCDQtNC70LjQvdC90LXQtSA1MCDRgdC40LzQstC+0LvQvtCyJylcbiAgLnJlZ2V4KC9eW2EtekEtWjAtOVxcLV9cXC9dKyQvLCAnU0tVINC80L7QttC10YIg0YHQvtC00LXRgNC20LDRgtGMINGC0L7Qu9GM0LrQviDQsdGD0LrQstGLLCDRhtC40YTRgNGLINC4INGB0LjQvNCy0L7Qu9GLIC1fLycpXG4gIC50cmFuc2Zvcm0odmFsdWUgPT4gdmFsdWUudG9VcHBlckNhc2UoKSlcblxuLy8g0JLQsNC70LjQtNCw0YbQuNGPIFNLVVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlU0tVKHNrdTogc3RyaW5nKTogeyBpc1ZhbGlkOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9IHtcbiAgdHJ5IHtcbiAgICBza3VTY2hlbWEucGFyc2Uoc2t1KVxuICAgIHJldHVybiB7IGlzVmFsaWQ6IHRydWUgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcbiAgICAgIHJldHVybiB7IFxuICAgICAgICBpc1ZhbGlkOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiBlcnJvci5lcnJvcnNbMF0/Lm1lc3NhZ2UgfHwgJ9Cd0LXQutC+0YDRgNC10LrRgtC90YvQuSDRhNC+0YDQvNCw0YIgU0tVJyBcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgXG4gICAgICBpc1ZhbGlkOiBmYWxzZSwgXG4gICAgICBlcnJvcjogJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAg0L/RgNC4INCy0LDQu9C40LTQsNGG0LjQuCBTS1UnIFxuICAgIH1cbiAgfVxufVxuXG4vLyDQktCw0LvQuNC00LDRhtC40Y8g0YTQsNC50LvQsFxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRmlsZShmaWxlOiBGaWxlKTogeyBpc1ZhbGlkOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9IHtcbiAgY29uc3QgbWF4U2l6ZSA9IHBhcnNlSW50KHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX01BWF9GSUxFX1NJWkUgfHwgJzI2MjE0NDAwJykgLy8gMjVNQlxuICBcbiAgaWYgKGZpbGUuc2l6ZSA+IG1heFNpemUpIHtcbiAgICByZXR1cm4geyBcbiAgICAgIGlzVmFsaWQ6IGZhbHNlLCBcbiAgICAgIGVycm9yOiBg0KTQsNC50Lsg0YHQu9C40YjQutC+0Lwg0LHQvtC70YzRiNC+0LkuINCc0LDQutGB0LjQvNCw0LvRjNC90YvQuSDRgNCw0LfQvNC10YA6ICR7TWF0aC5yb3VuZChtYXhTaXplIC8gMTAyNCAvIDEwMjQpfU1CYCBcbiAgICB9XG4gIH1cbiAgXG4gIGNvbnN0IGFsbG93ZWRJbWFnZVR5cGVzID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQUxMT1dFRF9JTUFHRV9UWVBFUz8uc3BsaXQoJywnKSB8fCBbXG4gICAgJ2ltYWdlL2pwZWcnLCBcbiAgICAnaW1hZ2UvcG5nJywgXG4gICAgJ2ltYWdlL2hlaWMnXG4gIF1cbiAgXG4gIGNvbnN0IGFsbG93ZWRWaWRlb1R5cGVzID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQUxMT1dFRF9WSURFT19UWVBFUz8uc3BsaXQoJywnKSB8fCBbXG4gICAgJ3ZpZGVvL21wNCcsIFxuICAgICd2aWRlby9xdWlja3RpbWUnXG4gIF1cbiAgXG4gIGNvbnN0IGFsbEFsbG93ZWRUeXBlcyA9IFsuLi5hbGxvd2VkSW1hZ2VUeXBlcywgLi4uYWxsb3dlZFZpZGVvVHlwZXNdXG4gIFxuICBpZiAoIWFsbEFsbG93ZWRUeXBlcy5pbmNsdWRlcyhmaWxlLnR5cGUpKSB7XG4gICAgY29uc3QgaW1hZ2VUeXBlcyA9IGFsbG93ZWRJbWFnZVR5cGVzLmpvaW4oJywgJylcbiAgICBjb25zdCB2aWRlb1R5cGVzID0gYWxsb3dlZFZpZGVvVHlwZXMuam9pbignLCAnKVxuICAgIHJldHVybiB7IFxuICAgICAgaXNWYWxpZDogZmFsc2UsIFxuICAgICAgZXJyb3I6IGDQndC10L/QvtC00LTQtdGA0LbQuNCy0LDQtdC80YvQuSDRhNC+0YDQvNCw0YIuINCU0L7Qv9GD0YHRgtC40LzRi9C1INC40LfQvtCx0YDQsNC20LXQvdC40Y86ICR7aW1hZ2VUeXBlc30sINCy0LjQtNC10L46ICR7dmlkZW9UeXBlc31gIFxuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSB9XG59XG5cbi8vINCT0LXQvdC10YDQsNGG0LjRjyDQuNC80LXQvdC4INGE0LDQudC70LBcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUZpbGVOYW1lKHNrdTogc3RyaW5nLCBpbmRleDogbnVtYmVyLCBleHRlbnNpb246IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHBhZGRlZEluZGV4ID0gaW5kZXgudG9TdHJpbmcoKS5wYWRTdGFydCgzLCAnMCcpXG4gIHJldHVybiBgJHtza3V9XyR7cGFkZGVkSW5kZXh9LiR7ZXh0ZW5zaW9ufWBcbn1cblxuLy8g0J/RgNC+0LLQtdGA0LrQsCDQv9C+0LTQtNC10YDQttC60LggQmFyY29kZURldGVjdG9yXG5leHBvcnQgZnVuY3Rpb24gaXNCYXJjb2RlRGV0ZWN0b3JTdXBwb3J0ZWQoKTogYm9vbGVhbiB7XG4gIHJldHVybiAnQmFyY29kZURldGVjdG9yJyBpbiB3aW5kb3dcbn1cblxuLy8g0J/RgNC+0LLQtdGA0LrQsCDQv9C+0LTQtNC10YDQttC60LggTWVkaWFEZXZpY2VzXG5leHBvcnQgZnVuY3Rpb24gaXNDYW1lcmFTdXBwb3J0ZWQoKTogYm9vbGVhbiB7XG4gIHJldHVybiAnbWVkaWFEZXZpY2VzJyBpbiBuYXZpZ2F0b3IgJiYgJ2dldFVzZXJNZWRpYScgaW4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlc1xufVxuXG4vLyDQpNC+0YDQvNCw0YLQuNGA0L7QstCw0L3QuNC1INGA0LDQt9C80LXRgNCwINGE0LDQudC70LBcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRGaWxlU2l6ZShieXRlczogbnVtYmVyKTogc3RyaW5nIHtcbiAgaWYgKGJ5dGVzID09PSAwKSByZXR1cm4gJzAgQnl0ZXMnXG4gIFxuICBjb25zdCBrID0gMTAyNFxuICBjb25zdCBzaXplcyA9IFsnQnl0ZXMnLCAnS0InLCAnTUInLCAnR0InXVxuICBjb25zdCBpID0gTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZyhrKSlcbiAgXG4gIHJldHVybiBwYXJzZUZsb2F0KChieXRlcyAvIE1hdGgucG93KGssIGkpKS50b0ZpeGVkKDIpKSArICcgJyArIHNpemVzW2ldXG59XG5cbi8vINCk0L7RgNC80LDRgtC40YDQvtCy0LDQvdC40LUg0L/RgNC+0LPRgNC10YHRgdCwXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0UHJvZ3Jlc3MocHJvZ3Jlc3M6IG51bWJlcik6IHN0cmluZyB7XG4gIHJldHVybiBgJHtNYXRoLnJvdW5kKHByb2dyZXNzKX0lYFxufVxuXG4vLyDQntGH0LjRgdGC0LrQsCDQuNC80LXQvdC4INGE0LDQudC70LAg0L7RgiDQvdC10LTQvtC/0YPRgdGC0LjQvNGL0YUg0YHQuNC80LLQvtC70L7QslxuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplRmlsZU5hbWUobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIG5hbWUucmVwbGFjZSgvW15hLXpBLVowLTlcXC1fLi9dL2csICdfJylcbn1cblxuLy8g0J/RgNC+0LLQtdGA0LrQsCwg0Y/QstC70Y/QtdGC0YHRjyDQu9C4INGE0LDQudC7INC40LfQvtCx0YDQsNC20LXQvdC40LXQvFxuZXhwb3J0IGZ1bmN0aW9uIGlzSW1hZ2VGaWxlKGZpbGU6IEZpbGUpOiBib29sZWFuIHtcbiAgcmV0dXJuIGZpbGUudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKVxufVxuXG4vLyDQn9GA0L7QstC10YDQutCwLCDRj9Cy0LvRj9C10YLRgdGPINC70Lgg0YTQsNC50Lsg0LLQuNC00LXQvlxuZXhwb3J0IGZ1bmN0aW9uIGlzVmlkZW9GaWxlKGZpbGU6IEZpbGUpOiBib29sZWFuIHtcbiAgcmV0dXJuIGZpbGUudHlwZS5zdGFydHNXaXRoKCd2aWRlby8nKVxufVxuXG4vLyDQn9GA0L7QstC10YDQutCwLCDRj9Cy0LvRj9C10YLRgdGPINC70Lgg0YTQsNC50LsgSEVJQ1xuZXhwb3J0IGZ1bmN0aW9uIGlzSGVpY0ZpbGUoZmlsZTogRmlsZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gZmlsZS50eXBlID09PSAnaW1hZ2UvaGVpYycgfHwgZmlsZS5uYW1lLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5oZWljJylcbn0iXSwibmFtZXMiOlsieiIsInNrdVNjaGVtYSIsInN0cmluZyIsIm1pbiIsIm1heCIsInJlZ2V4IiwidHJhbnNmb3JtIiwidmFsdWUiLCJ0b1VwcGVyQ2FzZSIsInZhbGlkYXRlU0tVIiwic2t1IiwicGFyc2UiLCJpc1ZhbGlkIiwiZXJyb3IiLCJab2RFcnJvciIsImVycm9ycyIsIm1lc3NhZ2UiLCJ2YWxpZGF0ZUZpbGUiLCJmaWxlIiwibWF4U2l6ZSIsInBhcnNlSW50IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX01BWF9GSUxFX1NJWkUiLCJzaXplIiwiTWF0aCIsInJvdW5kIiwiYWxsb3dlZEltYWdlVHlwZXMiLCJORVhUX1BVQkxJQ19BTExPV0VEX0lNQUdFX1RZUEVTIiwic3BsaXQiLCJhbGxvd2VkVmlkZW9UeXBlcyIsIk5FWFRfUFVCTElDX0FMTE9XRURfVklERU9fVFlQRVMiLCJhbGxBbGxvd2VkVHlwZXMiLCJpbmNsdWRlcyIsInR5cGUiLCJpbWFnZVR5cGVzIiwiam9pbiIsInZpZGVvVHlwZXMiLCJnZW5lcmF0ZUZpbGVOYW1lIiwiaW5kZXgiLCJleHRlbnNpb24iLCJwYWRkZWRJbmRleCIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJpc0JhcmNvZGVEZXRlY3RvclN1cHBvcnRlZCIsIndpbmRvdyIsImlzQ2FtZXJhU3VwcG9ydGVkIiwibmF2aWdhdG9yIiwibWVkaWFEZXZpY2VzIiwiZm9ybWF0RmlsZVNpemUiLCJieXRlcyIsImsiLCJzaXplcyIsImkiLCJmbG9vciIsImxvZyIsInBhcnNlRmxvYXQiLCJwb3ciLCJ0b0ZpeGVkIiwiZm9ybWF0UHJvZ3Jlc3MiLCJwcm9ncmVzcyIsInNhbml0aXplRmlsZU5hbWUiLCJuYW1lIiwicmVwbGFjZSIsImlzSW1hZ2VGaWxlIiwic3RhcnRzV2l0aCIsImlzVmlkZW9GaWxlIiwiaXNIZWljRmlsZSIsInRvTG93ZXJDYXNlIiwiZW5kc1dpdGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/utils/validation.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fmak%2FDesktop%2FPhotoSku%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmak%2FDesktop%2FPhotoSku&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();