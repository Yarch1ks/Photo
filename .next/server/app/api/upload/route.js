"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/upload/route";
exports.ids = ["app/api/upload/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fmak%2FDesktop%2FPhotoSku%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmak%2FDesktop%2FPhotoSku&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fmak%2FDesktop%2FPhotoSku%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmak%2FDesktop%2FPhotoSku&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_mak_Desktop_PhotoSku_src_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/upload/route.ts */ \"(rsc)/./src/app/api/upload/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/upload/route\",\n        pathname: \"/api/upload\",\n        filename: \"route\",\n        bundlePath: \"app/api/upload/route\"\n    },\n    resolvedPagePath: \"/Users/mak/Desktop/PhotoSku/src/app/api/upload/route.ts\",\n    nextConfigOutput,\n    userland: _Users_mak_Desktop_PhotoSku_src_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/upload/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1cGxvYWQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1hayUyRkRlc2t0b3AlMkZQaG90b1NrdSUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZtYWslMkZEZXNrdG9wJTJGUGhvdG9Ta3UmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDTztBQUNwRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL3Bob3RvLXNrdS1wcm9jZXNzb3IvP2QzYjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL21hay9EZXNrdG9wL1Bob3RvU2t1L3NyYy9hcHAvYXBpL3VwbG9hZC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdXBsb2FkL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdXBsb2FkXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS91cGxvYWQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvbWFrL0Rlc2t0b3AvUGhvdG9Ta3Uvc3JjL2FwcC9hcGkvdXBsb2FkL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3VwbG9hZC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fmak%2FDesktop%2FPhotoSku%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmak%2FDesktop%2FPhotoSku&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/upload/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/upload/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n// Явно отключаем статическую генерацию для этого API route\nconst dynamic = \"force-dynamic\";\nasync function POST(request) {\n    try {\n        console.log(\"=== UPLOAD API START ===\");\n        const formData = await request.formData();\n        const sku = formData.get(\"sku\");\n        const files = formData.getAll(\"files\");\n        console.log(\"FormData entries:\", Array.from(formData.entries()).map(([key, value])=>[\n                key,\n                value && typeof value === \"object\" && \"name\" in value ? value.name : value\n            ]));\n        if (!sku) {\n            console.error(\"SKU is required\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"SKU is required\"\n            }, {\n                status: 400\n            });\n        }\n        if (!files || files.length === 0) {\n            console.error(\"No files provided\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"No files provided\"\n            }, {\n                status: 400\n            });\n        }\n        // Фильтруем и проверяем файлы для Node.js 18 совместимости\n        const validFiles = [];\n        for (const file of files){\n            // Проверяем что файл имеет необходимые методы и свойства\n            if (file && typeof file === \"object\" && \"name\" in file && \"size\" in file && \"type\" in file && typeof file.arrayBuffer === \"function\") {\n                validFiles.push(file);\n            } else {\n                console.warn(\"Invalid file detected:\", file);\n            }\n        }\n        if (validFiles.length === 0) {\n            console.error(\"No valid files provided\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"No valid files provided\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(`Processing ${validFiles.length} valid files for SKU: ${sku}`);\n        // Детальное логирование переменных окружения для диагностики\n        console.log(\"Environment variables for debugging:\");\n        console.log(\"NODE_ENV:\", \"development\");\n        console.log(\"RAILWAY_SERVICE_NAME:\", process.env.RAILWAY_SERVICE_NAME);\n        console.log(\"RAILWAY_ENVIRONMENT:\", process.env.RAILWAY_ENVIRONMENT);\n        // Множественные способы определения продакшн-окружения\n        const isProduction =  false || process.env.RAILWAY_SERVICE_NAME || process.env.RAILWAY_ENVIRONMENT === \"production\" || process.env.VERCEL_ENV === \"production\";\n        const baseUploadDir = isProduction ? \"/tmp/uploads\" : \"./uploads\";\n        const uploadDir = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(baseUploadDir, sku);\n        console.log(`Upload directory: ${uploadDir}, Production: ${isProduction}`);\n        try {\n            // Проверяем доступность директории с более надежной обработкой\n            try {\n                await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.access)(uploadDir);\n                console.log(`Directory already exists: ${uploadDir}`);\n                // Проверяем права на запись\n                const testFilePath = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(uploadDir, \".test-write\");\n                await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.writeFile)(testFilePath, \"test\");\n                await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.unlink)(testFilePath);\n                console.log(`Directory is writable: ${uploadDir}`);\n            } catch  {\n                // Создаем директорию если не существует\n                console.log(`Creating directory: ${uploadDir}`);\n                await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.mkdir)(uploadDir, {\n                    recursive: true,\n                    mode: 493\n                });\n                console.log(`Directory created: ${uploadDir}`);\n                // Проверяем что директория создалась и доступна для записи\n                const testFilePath = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(uploadDir, \".test-write\");\n                await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.writeFile)(testFilePath, \"test\");\n                await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.unlink)(testFilePath);\n                console.log(`New directory is writable: ${uploadDir}`);\n            }\n        } catch (error) {\n            console.error(\"❌ CRITICAL: Error accessing/creating directory:\", error);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Storage directory inaccessible\",\n                details: error instanceof Error ? error.message : \"Unknown error\",\n                uploadDir,\n                isProduction\n            }, {\n                status: 500\n            });\n        }\n        const processedFiles = [];\n        for(let i = 0; i < validFiles.length; i++){\n            const file = validFiles[i];\n            console.log(`Processing file ${i + 1}/${validFiles.length}: ${file.name}`);\n            // Сохраняем оригинальное расширение файла\n            const fileExtension = file.name.split(\".\").pop() || \"jpg\";\n            const fileName = `${sku}_${String(i + 1).padStart(3, \"0\")}.${fileExtension}`;\n            const filePath = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(uploadDir, fileName);\n            console.log(`File path: ${filePath}`);\n            console.log(`File size: ${file.size}`);\n            console.log(`File type: ${file.type}`);\n            try {\n                // Сохраняем файл с Node.js 18 совместимым способом\n                const bytes = await file.arrayBuffer();\n                const buffer = Buffer.from(bytes);\n                await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.writeFile)(filePath, buffer);\n                console.log(`✅ File saved successfully: ${filePath}`);\n            } catch (error) {\n                console.error(`❌ Error saving file ${filePath}:`, error);\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: `Failed to save file: ${file.name}`\n                }, {\n                    status: 500\n                });\n            }\n            processedFiles.push({\n                id: `file_${i + 1}`,\n                originalName: file.name,\n                fileName: fileName,\n                filePath: filePath,\n                url: `/api/images/${sku}/${fileName}`,\n                type: file.type.startsWith(\"image/\") ? \"image\" : \"video\",\n                size: file.size,\n                sku: sku\n            });\n        }\n        console.log(\"=== UPLOAD API SUCCESS ===\");\n        console.log(\"Processed files:\", processedFiles);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            files: processedFiles,\n            sku: sku\n        });\n    } catch (error) {\n        console.error(\"❌ UPLOAD API ERROR:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Internal server error\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSSxFQUFFLENBQUM7Z0JBQ25CYyxjQUFjakMsS0FBS04sSUFBSTtnQkFDdkI2QixVQUFVQTtnQkFDVkcsVUFBVUE7Z0JBQ1ZRLEtBQUssQ0FBQyxZQUFZLEVBQUVsRCxJQUFJLENBQUMsRUFBRXVDLFNBQVMsQ0FBQztnQkFDckNLLE1BQU01QixLQUFLNEIsSUFBSSxDQUFDTyxVQUFVLENBQUMsWUFBWSxVQUFVO2dCQUNqRFIsTUFBTTNCLEtBQUsyQixJQUFJO2dCQUNmM0MsS0FBS0E7WUFDUDtRQUNGO1FBRUFILFFBQVFDLEdBQUcsQ0FBQztRQUNaRCxRQUFRQyxHQUFHLENBQUMsb0JBQW9Cb0M7UUFFaEMsT0FBTzlDLGtGQUFZQSxDQUFDd0IsSUFBSSxDQUFDO1lBQ3ZCd0MsU0FBUztZQUNUbEQsT0FBT2dDO1lBQ1BsQyxLQUFLQTtRQUNQO0lBRUYsRUFBRSxPQUFPVyxPQUFPO1FBQ2RkLFFBQVFjLEtBQUssQ0FBQyx1QkFBdUJBO1FBQ3JDLE9BQU92QixrRkFBWUEsQ0FBQ3dCLElBQUksQ0FDdEI7WUFBRUQsT0FBTztZQUF5Qm9CLFNBQVNwQixpQkFBaUJxQixRQUFRckIsTUFBTXNCLE9BQU8sR0FBRztRQUFnQixHQUNwRztZQUFFcEIsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9waG90by1za3UtcHJvY2Vzc29yLy4vc3JjL2FwcC9hcGkvdXBsb2FkL3JvdXRlLnRzPzUxMjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgd3JpdGVGaWxlLCBta2RpciwgYWNjZXNzLCB1bmxpbmsgfSBmcm9tICdmcy9wcm9taXNlcydcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJ1xuXG4vLyDQr9Cy0L3QviDQvtGC0LrQu9GO0YfQsNC10Lwg0YHRgtCw0YLQuNGH0LXRgdC60YPRjiDQs9C10L3QtdGA0LDRhtC40Y4g0LTQu9GPINGN0YLQvtCz0L4gQVBJIHJvdXRlXG5leHBvcnQgY29uc3QgZHluYW1pYyA9ICdmb3JjZS1keW5hbWljJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCc9PT0gVVBMT0FEIEFQSSBTVEFSVCA9PT0nKVxuICAgIFxuICAgIGNvbnN0IGZvcm1EYXRhID0gYXdhaXQgcmVxdWVzdC5mb3JtRGF0YSgpXG4gICAgY29uc3Qgc2t1ID0gZm9ybURhdGEuZ2V0KCdza3UnKSBhcyBzdHJpbmdcbiAgICBjb25zdCBmaWxlcyA9IGZvcm1EYXRhLmdldEFsbCgnZmlsZXMnKVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdGb3JtRGF0YSBlbnRyaWVzOicsIEFycmF5LmZyb20oZm9ybURhdGEuZW50cmllcygpKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gW2tleSwgdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAnbmFtZScgaW4gdmFsdWUgPyB2YWx1ZS5uYW1lIDogdmFsdWVdKSlcbiAgICBcbiAgICBpZiAoIXNrdSkge1xuICAgICAgY29uc29sZS5lcnJvcignU0tVIGlzIHJlcXVpcmVkJylcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ1NLVSBpcyByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKCFmaWxlcyB8fCBmaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIGZpbGVzIHByb3ZpZGVkJylcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ05vIGZpbGVzIHByb3ZpZGVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyDQpNC40LvRjNGC0YDRg9C10Lwg0Lgg0L/RgNC+0LLQtdGA0Y/QtdC8INGE0LDQudC70Ysg0LTQu9GPIE5vZGUuanMgMTgg0YHQvtCy0LzQtdGB0YLQuNC80L7RgdGC0LhcbiAgICBjb25zdCB2YWxpZEZpbGVzID0gW11cbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCDRh9GC0L4g0YTQsNC50Lsg0LjQvNC10LXRgiDQvdC10L7QsdGF0L7QtNC40LzRi9C1INC80LXRgtC+0LTRiyDQuCDRgdCy0L7QudGB0YLQstCwXG4gICAgICBpZiAoZmlsZSAmJiBcbiAgICAgICAgICB0eXBlb2YgZmlsZSA9PT0gJ29iamVjdCcgJiYgXG4gICAgICAgICAgJ25hbWUnIGluIGZpbGUgJiYgXG4gICAgICAgICAgJ3NpemUnIGluIGZpbGUgJiYgXG4gICAgICAgICAgJ3R5cGUnIGluIGZpbGUgJiYgXG4gICAgICAgICAgdHlwZW9mIChmaWxlIGFzIGFueSkuYXJyYXlCdWZmZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFsaWRGaWxlcy5wdXNoKGZpbGUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0ludmFsaWQgZmlsZSBkZXRlY3RlZDonLCBmaWxlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh2YWxpZEZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5lcnJvcignTm8gdmFsaWQgZmlsZXMgcHJvdmlkZWQnKVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnTm8gdmFsaWQgZmlsZXMgcHJvdmlkZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nICR7dmFsaWRGaWxlcy5sZW5ndGh9IHZhbGlkIGZpbGVzIGZvciBTS1U6ICR7c2t1fWApXG5cbiAgICAvLyDQlNC10YLQsNC70YzQvdC+0LUg0LvQvtCz0LjRgNC+0LLQsNC90LjQtSDQv9C10YDQtdC80LXQvdC90YvRhSDQvtC60YDRg9C20LXQvdC40Y8g0LTQu9GPINC00LjQsNCz0L3QvtGB0YLQuNC60LhcbiAgICBjb25zb2xlLmxvZygnRW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciBkZWJ1Z2dpbmc6JylcbiAgICBjb25zb2xlLmxvZygnTk9ERV9FTlY6JywgcHJvY2Vzcy5lbnYuTk9ERV9FTlYpXG4gICAgY29uc29sZS5sb2coJ1JBSUxXQVlfU0VSVklDRV9OQU1FOicsIHByb2Nlc3MuZW52LlJBSUxXQVlfU0VSVklDRV9OQU1FKVxuICAgIGNvbnNvbGUubG9nKCdSQUlMV0FZX0VOVklST05NRU5UOicsIHByb2Nlc3MuZW52LlJBSUxXQVlfRU5WSVJPTk1FTlQpXG4gICAgXG4gICAgLy8g0JzQvdC+0LbQtdGB0YLQstC10L3QvdGL0LUg0YHQv9C+0YHQvtCx0Ysg0L7Qv9GA0LXQtNC10LvQtdC90LjRjyDQv9GA0L7QtNCw0LrRiNC9LdC+0LrRgNGD0LbQtdC90LjRj1xuICAgIGNvbnN0IGlzUHJvZHVjdGlvbiA9XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nIHx8XG4gICAgICBwcm9jZXNzLmVudi5SQUlMV0FZX1NFUlZJQ0VfTkFNRSB8fFxuICAgICAgcHJvY2Vzcy5lbnYuUkFJTFdBWV9FTlZJUk9OTUVOVCA9PT0gJ3Byb2R1Y3Rpb24nIHx8XG4gICAgICBwcm9jZXNzLmVudi5WRVJDRUxfRU5WID09PSAncHJvZHVjdGlvbidcbiAgICBcbiAgICBjb25zdCBiYXNlVXBsb2FkRGlyID0gaXNQcm9kdWN0aW9uID8gJy90bXAvdXBsb2FkcycgOiAnLi91cGxvYWRzJ1xuICAgIGNvbnN0IHVwbG9hZERpciA9IGpvaW4oYmFzZVVwbG9hZERpciwgc2t1KVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBVcGxvYWQgZGlyZWN0b3J5OiAke3VwbG9hZERpcn0sIFByb2R1Y3Rpb246ICR7aXNQcm9kdWN0aW9ufWApXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCDQtNC+0YHRgtGD0L/QvdC+0YHRgtGMINC00LjRgNC10LrRgtC+0YDQuNC4INGBINCx0L7Qu9C10LUg0L3QsNC00LXQttC90L7QuSDQvtCx0YDQsNCx0L7RgtC60L7QuVxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgYWNjZXNzKHVwbG9hZERpcilcbiAgICAgICAgY29uc29sZS5sb2coYERpcmVjdG9yeSBhbHJlYWR5IGV4aXN0czogJHt1cGxvYWREaXJ9YClcbiAgICAgICAgXG4gICAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCDQv9GA0LDQstCwINC90LAg0LfQsNC/0LjRgdGMXG4gICAgICAgIGNvbnN0IHRlc3RGaWxlUGF0aCA9IGpvaW4odXBsb2FkRGlyLCAnLnRlc3Qtd3JpdGUnKVxuICAgICAgICBhd2FpdCB3cml0ZUZpbGUodGVzdEZpbGVQYXRoLCAndGVzdCcpXG4gICAgICAgIGF3YWl0IHVubGluayh0ZXN0RmlsZVBhdGgpXG4gICAgICAgIGNvbnNvbGUubG9nKGBEaXJlY3RvcnkgaXMgd3JpdGFibGU6ICR7dXBsb2FkRGlyfWApXG4gICAgICAgIFxuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIC8vINCh0L7Qt9C00LDQtdC8INC00LjRgNC10LrRgtC+0YDQuNGOINC10YHQu9C4INC90LUg0YHRg9GJ0LXRgdGC0LLRg9C10YJcbiAgICAgICAgY29uc29sZS5sb2coYENyZWF0aW5nIGRpcmVjdG9yeTogJHt1cGxvYWREaXJ9YClcbiAgICAgICAgYXdhaXQgbWtkaXIodXBsb2FkRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSwgbW9kZTogMG83NTUgfSlcbiAgICAgICAgY29uc29sZS5sb2coYERpcmVjdG9yeSBjcmVhdGVkOiAke3VwbG9hZERpcn1gKVxuICAgICAgICBcbiAgICAgICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INGH0YLQviDQtNC40YDQtdC60YLQvtGA0LjRjyDRgdC+0LfQtNCw0LvQsNGB0Ywg0Lgg0LTQvtGB0YLRg9C/0L3QsCDQtNC70Y8g0LfQsNC/0LjRgdC4XG4gICAgICAgIGNvbnN0IHRlc3RGaWxlUGF0aCA9IGpvaW4odXBsb2FkRGlyLCAnLnRlc3Qtd3JpdGUnKVxuICAgICAgICBhd2FpdCB3cml0ZUZpbGUodGVzdEZpbGVQYXRoLCAndGVzdCcpXG4gICAgICAgIGF3YWl0IHVubGluayh0ZXN0RmlsZVBhdGgpXG4gICAgICAgIGNvbnNvbGUubG9nKGBOZXcgZGlyZWN0b3J5IGlzIHdyaXRhYmxlOiAke3VwbG9hZERpcn1gKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgQ1JJVElDQUw6IEVycm9yIGFjY2Vzc2luZy9jcmVhdGluZyBkaXJlY3Rvcnk6JywgZXJyb3IpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHtcbiAgICAgICAgICBlcnJvcjogJ1N0b3JhZ2UgZGlyZWN0b3J5IGluYWNjZXNzaWJsZScsXG4gICAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgdXBsb2FkRGlyLFxuICAgICAgICAgIGlzUHJvZHVjdGlvblxuICAgICAgICB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBwcm9jZXNzZWRGaWxlcyA9IFtdXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbGlkRmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGZpbGUgPSB2YWxpZEZpbGVzW2ldXG4gICAgICBjb25zb2xlLmxvZyhgUHJvY2Vzc2luZyBmaWxlICR7aSArIDF9LyR7dmFsaWRGaWxlcy5sZW5ndGh9OiAke2ZpbGUubmFtZX1gKVxuICAgICAgXG4gICAgICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0L7RgNC40LPQuNC90LDQu9GM0L3QvtC1INGA0LDRgdGI0LjRgNC10L3QuNC1INGE0LDQudC70LBcbiAgICAgIGNvbnN0IGZpbGVFeHRlbnNpb24gPSBmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKSB8fCAnanBnJ1xuICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtza3V9XyR7U3RyaW5nKGkgKyAxKS5wYWRTdGFydCgzLCAnMCcpfS4ke2ZpbGVFeHRlbnNpb259YFxuICAgICAgY29uc3QgZmlsZVBhdGggPSBqb2luKHVwbG9hZERpciwgZmlsZU5hbWUpXG5cbiAgICAgIGNvbnNvbGUubG9nKGBGaWxlIHBhdGg6ICR7ZmlsZVBhdGh9YClcbiAgICAgIGNvbnNvbGUubG9nKGBGaWxlIHNpemU6ICR7ZmlsZS5zaXplfWApXG4gICAgICBjb25zb2xlLmxvZyhgRmlsZSB0eXBlOiAke2ZpbGUudHlwZX1gKVxuXG4gICAgICB0cnkge1xuICAgICAgICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0YTQsNC50Lsg0YEgTm9kZS5qcyAxOCDRgdC+0LLQvNC10YHRgtC40LzRi9C8INGB0L/QvtGB0L7QsdC+0LxcbiAgICAgICAgY29uc3QgYnl0ZXMgPSBhd2FpdCAoZmlsZSBhcyBhbnkpLmFycmF5QnVmZmVyKClcbiAgICAgICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oYnl0ZXMpXG4gICAgICAgIGF3YWl0IHdyaXRlRmlsZShmaWxlUGF0aCwgYnVmZmVyKVxuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIEZpbGUgc2F2ZWQgc3VjY2Vzc2Z1bGx5OiAke2ZpbGVQYXRofWApXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgRXJyb3Igc2F2aW5nIGZpbGUgJHtmaWxlUGF0aH06YCwgZXJyb3IpXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IGVycm9yOiBgRmFpbGVkIHRvIHNhdmUgZmlsZTogJHtmaWxlLm5hbWV9YCB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIHByb2Nlc3NlZEZpbGVzLnB1c2goe1xuICAgICAgICBpZDogYGZpbGVfJHtpICsgMX1gLFxuICAgICAgICBvcmlnaW5hbE5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgZmlsZU5hbWU6IGZpbGVOYW1lLFxuICAgICAgICBmaWxlUGF0aDogZmlsZVBhdGgsXG4gICAgICAgIHVybDogYC9hcGkvaW1hZ2VzLyR7c2t1fS8ke2ZpbGVOYW1lfWAsXG4gICAgICAgIHR5cGU6IGZpbGUudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSA/ICdpbWFnZScgOiAndmlkZW8nLFxuICAgICAgICBzaXplOiBmaWxlLnNpemUsXG4gICAgICAgIHNrdTogc2t1XG4gICAgICB9KVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCc9PT0gVVBMT0FEIEFQSSBTVUNDRVNTID09PScpXG4gICAgY29uc29sZS5sb2coJ1Byb2Nlc3NlZCBmaWxlczonLCBwcm9jZXNzZWRGaWxlcylcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGZpbGVzOiBwcm9jZXNzZWRGaWxlcyxcbiAgICAgIHNrdTogc2t1XG4gICAgfSlcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBVUExPQUQgQVBJIEVSUk9SOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLCBkZXRhaWxzOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIndyaXRlRmlsZSIsIm1rZGlyIiwiYWNjZXNzIiwidW5saW5rIiwiam9pbiIsImR5bmFtaWMiLCJQT1NUIiwicmVxdWVzdCIsImNvbnNvbGUiLCJsb2ciLCJmb3JtRGF0YSIsInNrdSIsImdldCIsImZpbGVzIiwiZ2V0QWxsIiwiQXJyYXkiLCJmcm9tIiwiZW50cmllcyIsIm1hcCIsImtleSIsInZhbHVlIiwibmFtZSIsImVycm9yIiwianNvbiIsInN0YXR1cyIsImxlbmd0aCIsInZhbGlkRmlsZXMiLCJmaWxlIiwiYXJyYXlCdWZmZXIiLCJwdXNoIiwid2FybiIsInByb2Nlc3MiLCJlbnYiLCJSQUlMV0FZX1NFUlZJQ0VfTkFNRSIsIlJBSUxXQVlfRU5WSVJPTk1FTlQiLCJpc1Byb2R1Y3Rpb24iLCJWRVJDRUxfRU5WIiwiYmFzZVVwbG9hZERpciIsInVwbG9hZERpciIsInRlc3RGaWxlUGF0aCIsInJlY3Vyc2l2ZSIsIm1vZGUiLCJkZXRhaWxzIiwiRXJyb3IiLCJtZXNzYWdlIiwicHJvY2Vzc2VkRmlsZXMiLCJpIiwiZmlsZUV4dGVuc2lvbiIsInNwbGl0IiwicG9wIiwiZmlsZU5hbWUiLCJTdHJpbmciLCJwYWRTdGFydCIsImZpbGVQYXRoIiwic2l6ZSIsInR5cGUiLCJieXRlcyIsImJ1ZmZlciIsIkJ1ZmZlciIsImlkIiwib3JpZ2luYWxOYW1lIiwidXJsIiwic3RhcnRzV2l0aCIsInN1Y2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/upload/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fmak%2FDesktop%2FPhotoSku%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmak%2FDesktop%2FPhotoSku&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();