(()=>{var t={};t.id=931,t.ids=[931],t.modules={7849:t=>{"use strict";t.exports=require("next/dist/client/components/action-async-storage.external")},2934:t=>{"use strict";t.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:t=>{"use strict";t.exports=require("next/dist/client/components/request-async-storage.external")},4580:t=>{"use strict";t.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:t=>{"use strict";t.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:t=>{"use strict";t.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5144:(t,e,r)=>{"use strict";r.r(e),r.d(e,{GlobalError:()=>a.a,__next_app__:()=>d,originalPathname:()=>h,pages:()=>l,routeModule:()=>f,tree:()=>c});var n=r(482),o=r(9108),i=r(2563),a=r.n(i),s=r(8300),u={};for(let t in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(t)&&(u[t]=()=>s[t]);r.d(e,u);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1136)),"/Users/mak/Desktop/PhotoSku/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1342)),"/Users/mak/Desktop/PhotoSku/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],l=["/Users/mak/Desktop/PhotoSku/src/app/page.tsx"],h="/page",d={require:r,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3069:(t,e,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},1389:()=>{},1773:(t,e,r)=>{Promise.resolve().then(r.bind(r,2436))},2295:(t,e,r)=>{"use strict";t.exports=r(6372).vendored["react-ssr"].ReactJsxRuntime},2436:(t,e,r)=>{"use strict";let n;r.r(e),r.d(e,{default:()=>aL});var o,i,a,s,u,c,l,h,d,f,p,g,y,m,v,w,_,C,A,E=r(2295),I=r(3729),b={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let S=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),N=(t,e)=>{let r=(0,I.forwardRef)(({color:r="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:a="",children:s,...u},c)=>(0,I.createElement)("svg",{ref:c,...b,width:n,height:n,stroke:r,strokeWidth:i?24*Number(o)/Number(n):o,className:["lucide",`lucide-${S(t)}`,a].join(" "),...u},[...e.map(([t,e])=>(0,I.createElement)(t,e)),...Array.isArray(s)?s:[s]]));return r.displayName=`${t}`,r},T=N("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),x=N("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),O=N("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]),R=N("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),D=N("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]),M=N("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),P=N("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var B=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),k=function(t){function e(e,r){var n,o,i,a,s=this.constructor,u=t.call(this,e,r)||this;return Object.defineProperty(u,"name",{value:s.name,enumerable:!1,configurable:!0}),i=s.prototype,(a=Object.setPrototypeOf)?a(u,i):u.__proto__=i,void 0===n&&(n=u.constructor),(o=Error.captureStackTrace)&&o(u,n),u}return B(e,t),e}(Error),L=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),F=function(t){function e(e){void 0===e&&(e=void 0);var r=t.call(this,e)||this;return r.message=e,r}return L(e,t),e.prototype.getKind=function(){return this.constructor.kind},e.kind="Exception",e}(k),j=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return j(e,t),e.kind="ArgumentException",e}(F),U=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return U(e,t),e.kind="IllegalArgumentException",e}(F),X=function(){function t(t){if(this.binarizer=t,null===t)throw new H("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(t,e){return this.binarizer.getBlackRow(t,e)},t.prototype.getBlackMatrix=function(){return(null===this.matrix||void 0===this.matrix)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,o){var i=this.binarizer.getLuminanceSource().crop(e,r,n,o);return new t(this.binarizer.createBinarizer(i))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(t){return""}},t}(),W=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return W(e,t),e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(F),z=function(){function t(t){this.source=t}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Z=function(){function t(){}return t.arraycopy=function(t,e,r,n,o){for(;o--;)r[n++]=t[e++]},t.currentTimeMillis=function(){return Date.now()},t}(),Y=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),K=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Y(e,t),e.kind="IndexOutOfBoundsException",e}(F),$=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),q=function(t){function e(e,r){void 0===e&&(e=void 0),void 0===r&&(r=void 0);var n=t.call(this,r)||this;return n.index=e,n.message=r,n}return $(e,t),e.kind="ArrayIndexOutOfBoundsException",e}(K),J=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q=function(){function t(){}return t.fill=function(t,e){for(var r=0,n=t.length;r<n;r++)t[r]=e},t.fillWithin=function(e,r,n,o){t.rangeCheck(e.length,r,n);for(var i=r;i<n;i++)e[i]=o},t.rangeCheck=function(t,e,r){if(e>r)throw new H("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new q(e);if(r>t)throw new q(r)},t.asList=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},t.create=function(t,e,r){return Array.from({length:t}).map(function(t){return Array.from({length:e}).fill(r)})},t.createInt32Array=function(t,e,r){return Array.from({length:t}).map(function(t){return Int32Array.from({length:e}).fill(r)})},t.equals=function(t,e){if(!t||!e||!t.length||!e.length||t.length!==e.length)return!1;for(var r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0},t.hashCode=function(t){if(null===t)return 0;var e,r,n=1;try{for(var o=J(t),i=o.next();!i.done;i=o.next()){var a=i.value;n=31*n+a}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},t.fillUint8Array=function(t,e){for(var r=0;r!==t.length;r++)t[r]=e},t.copyOf=function(t,e){return t.slice(0,e)},t.copyOfUint8Array=function(t,e){if(t.length<=e){var r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)},t.copyOfRange=function(t,e,r){var n=r-e,o=new Int32Array(n);return Z.arraycopy(t,e,o,0,n),o},t.binarySearch=function(e,r,n){void 0===n&&(n=t.numberComparator);for(var o=0,i=e.length-1;o<=i;){var a=i+o>>1,s=n(r,e[a]);if(s>0)o=a+1;else{if(!(s<0))return a;i=a-1}}return-o-1},t.numberComparator=function(t,e){return t-e},t}(),tt=function(){function t(){}return t.numberOfTrailingZeros=function(t){if(0===t)return 32;var e,r=31;return 0!=(e=t<<16)&&(r-=16,t=e),0!=(e=t<<8)&&(r-=8,t=e),0!=(e=t<<4)&&(r-=4,t=e),0!=(e=t<<2)&&(r-=2,t=e),r-(t<<1>>>31)},t.numberOfLeadingZeros=function(t){if(0===t)return 32;var e=1;return t>>>16==0&&(e+=16,t<<=16),t>>>24==0&&(e+=8,t<<=8),t>>>28==0&&(e+=4,t<<=4),t>>>30==0&&(e+=2,t<<=2),e-=t>>>31},t.toHexString=function(t){return t.toString(16)},t.toBinaryString=function(t){return String(parseInt(String(t),2))},t.bitCount=function(t){return t-=t>>>1&1431655765,t=(t=(858993459&t)+(t>>>2&858993459))+(t>>>4)&252645135,t+=t>>>8,63&(t+=t>>>16)},t.truncDivision=function(t,e){return Math.trunc(t/e)},t.parseInt=function(t,e){return void 0===e&&(e=void 0),parseInt(t,e)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),te=function(){function t(e,r){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,null==r?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>32*this.bits.length){var r=t.makeArray(e);Z.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(t){return(this.bits[Math.floor(t/32)]&1<<(31&t))!=0},t.prototype.set=function(t){this.bits[Math.floor(t/32)]|=1<<(31&t)},t.prototype.flip=function(t){this.bits[Math.floor(t/32)]^=1<<(31&t)},t.prototype.getNextSet=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,n=Math.floor(t/32),o=r[n];o&=~((1<<(31&t))-1);for(var i=r.length;0===o;){if(++n===i)return e;o=r[n]}var a=32*n+tt.numberOfTrailingZeros(o);return a>e?e:a},t.prototype.getNextUnset=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,n=Math.floor(t/32),o=~r[n];o&=~((1<<(31&t))-1);for(var i=r.length;0===o;){if(++n===i)return e;o=~r[n]}var a=32*n+tt.numberOfTrailingZeros(o);return a>e?e:a},t.prototype.setBulk=function(t,e){this.bits[Math.floor(t/32)]=e},t.prototype.setRange=function(t,e){if(e<t||t<0||e>this.size)throw new H;if(e!==t)for(var r=Math.floor(t/32),n=Math.floor(--e/32),o=this.bits,i=r;i<=n;i++){var a=i>r?0:31&t,s=(2<<(i<n?31:31&e))-(1<<a);o[i]|=s}},t.prototype.clear=function(){for(var t=this.bits.length,e=this.bits,r=0;r<t;r++)e[r]=0},t.prototype.isRange=function(t,e,r){if(e<t||t<0||e>this.size)throw new H;if(e===t)return!0;for(var n=Math.floor(t/32),o=Math.floor(--e/32),i=this.bits,a=n;a<=o;a++){var s=a>n?0:31&t,u=(2<<(a<o?31:31&e))-(1<<s)&4294967295;if((i[a]&u)!==(r?u:0))return!1}return!0},t.prototype.appendBit=function(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},t.prototype.appendBits=function(t,e){if(e<0||e>32)throw new H("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(var r=e;r>0;r--)this.appendBit((t>>r-1&1)==1)},t.prototype.appendBitArray=function(t){var e=t.size;this.ensureCapacity(this.size+e);for(var r=0;r<e;r++)this.appendBit(t.get(r))},t.prototype.xor=function(t){if(this.size!==t.size)throw new H("Sizes don't match");for(var e=this.bits,r=0,n=e.length;r<n;r++)e[r]^=t.bits[r]},t.prototype.toBytes=function(t,e,r,n){for(var o=0;o<n;o++){for(var i=0,a=0;a<8;a++)this.get(t)&&(i|=1<<7-a),t++;e[r+o]=i}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,n=this.bits,o=0;o<r;o++){var i=n[o];i=(i=(i=(i=(i=i>>1&1431655765|(1431655765&i)<<1)>>2&858993459|(858993459&i)<<2)>>4&252645135|(252645135&i)<<4)>>8&16711935|(16711935&i)<<8)>>16&65535|(65535&i)<<16,t[e-o]=i}if(this.size!==32*r){for(var a=32*r-this.size,s=t[0]>>>a,o=1;o<r;o++){var u=t[o];s|=u<<32-a,t[o-1]=s,s=u>>>a}t[r-1]=s}this.bits=t},t.makeArray=function(t){return new Int32Array(Math.floor((t+31)/32))},t.prototype.equals=function(e){return e instanceof t&&this.size===e.size&&Q.equals(this.bits,e.bits)},t.prototype.hashCode=function(){return 31*this.size+Q.hashCode(this.bits)},t.prototype.toString=function(){for(var t="",e=0,r=this.size;e<r;e++)(7&e)==0&&(t+=" "),t+=this.get(e)?"X":".";return t},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var t=[],e=0,r=this.size;e<r;e++)t.push(this.get(e));return t},t}();!function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"}(o||(o={}));let tr=o;var tn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),to=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tn(e,t),e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(F),ti=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"}(i||(i={}));var ta=function(){function t(e,r,n){for(var o,i,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,"number"==typeof r?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=a,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var u=this.values,c=0,l=u.length;c!==l;c++){var h=u[c];t.VALUES_TO_ECI.set(h,this)}try{for(var d=ti(a),f=d.next();!f.done;f=d.next()){var p=f.value;t.NAME_TO_ECI.set(p,this)}}catch(t){o={error:t}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new to("incorect value");var r=t.VALUES_TO_ECI.get(e);if(void 0===r)throw new to("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(void 0===r)throw new to("incorect value");return r},t.prototype.equals=function(e){return e instanceof t&&this.getName()===e.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(i.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(i.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(i.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(i.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(i.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(i.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(i.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(i.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(i.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(i.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(i.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(i.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(i.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(i.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(i.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(i.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(i.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(i.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(i.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(i.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(i.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(i.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(i.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(i.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(i.Big5,28,"Big5"),t.GB18030=new t(i.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(i.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),ts=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ts(e,t),e.kind="UnsupportedOperationException",e}(F),tc=function(){function t(){}return t.decode=function(t,e){var r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&"ISO-8859-1"===e},t.encode=function(t,e){var r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):"undefined"==typeof TextEncoder?this.encodeFallback(t):new TextEncoder().encode(t)},t.isBrowser=function(){return!1},t.encodingName=function(t){return"string"==typeof t?t:t.getName()},t.encodingCharacterSet=function(t){return t instanceof ta?t:ta.getCharacterSetECIByName(t)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var o="",i=0,a=e.length;i<a;i++){var s=e[i].toString(16);s.length<2&&(s="0"+s),o+="%"+s}return decodeURIComponent(o)}if(n.equals(ta.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new tu("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(t){return t.equals(ta.UTF8)||t.equals(ta.ISO8859_1)||t.equals(ta.ASCII)},t.encodeFallback=function(t){for(var e=btoa(unescape(encodeURIComponent(t))).split(""),r=[],n=0;n<e.length;n++)r.push(e[n].charCodeAt(0));return new Uint8Array(r)},t}(),tl=function(){function t(){}return t.castAsNonUtf8Char=function(t,e){void 0===e&&(e=null);var r=e?e.getName():this.ISO88591;return tc.decode(new Uint8Array([t]),r)},t.guessEncoding=function(e,r){if(null!=r&&void 0!==r.get(tr.CHARACTER_SET))return r.get(tr.CHARACTER_SET).toString();for(var n=e.length,o=!0,i=!0,a=!0,s=0,u=0,c=0,l=0,h=0,d=0,f=0,p=0,g=0,y=0,m=0,v=e.length>3&&239===e[0]&&187===e[1]&&191===e[2],w=0;w<n&&(o||i||a);w++){var _=255&e[w];a&&(s>0?(128&_)==0?a=!1:s--:(128&_)!=0&&((64&_)==0?a=!1:(s++,(32&_)==0?u++:(s++,(16&_)==0?c++:(s++,(8&_)==0?l++:a=!1))))),o&&(_>127&&_<160?o=!1:_>159&&(_<192||215===_||247===_)&&m++),i&&(h>0?_<64||127===_||_>252?i=!1:h--:128===_||160===_||_>239?i=!1:_>160&&_<224?(d++,p=0,++f>g&&(g=f)):_>127?(h++,f=0,++p>y&&(y=p)):(f=0,p=0))}return(a&&s>0&&(a=!1),i&&h>0&&(i=!1),a&&(v||u+c+l>0))?t.UTF8:i&&(t.ASSUME_SHIFT_JIS||g>=3||y>=3)?t.SHIFT_JIS:o&&i?2===g&&2===d||10*m>=n?t.SHIFT_JIS:t.ISO88591:o?t.ISO88591:i?t.SHIFT_JIS:a?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=-1;return t.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(t,r,o,i,a,s){if("%%"===t)return"%";if(void 0!==e[++n]){t=i?parseInt(i.substr(1)):void 0;var u,c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":u=e[n];break;case"c":u=e[n][0];break;case"f":u=parseFloat(e[n]).toFixed(t);break;case"p":u=parseFloat(e[n]).toPrecision(t);break;case"e":u=parseFloat(e[n]).toExponential(t);break;case"x":u=parseInt(e[n]).toString(c||16);break;case"d":u=parseFloat(parseInt(e[n],c||10).toPrecision(t)).toFixed(0)}u="object"==typeof u?JSON.stringify(u):(+u).toString(c);for(var l=parseInt(o),h=o&&o[0]+""=="0"?"0":" ";u.length<l;)u=void 0!==r?u+h:h+u;return u}})},t.getBytes=function(t,e){return tc.encode(t,e)},t.getCharCode=function(t,e){return void 0===e&&(e=0),t.charCodeAt(e)},t.getCharAt=function(t){return String.fromCharCode(t)},t.SHIFT_JIS=ta.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=ta.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=ta.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),th=function(){function t(t){void 0===t&&(t=""),this.value=t}return t.prototype.enableDecoding=function(t){return this.encoding=t,this},t.prototype.append=function(t){return"string"==typeof t?this.value+=t.toString():this.encoding?this.value+=tl.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this},t.prototype.appendChars=function(t,e,r){for(var n=e;e<e+r;n++)this.append(t[n]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(t){return this.value.charAt(t)},t.prototype.deleteCharAt=function(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)},t.prototype.setCharAt=function(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)},t.prototype.substring=function(t,e){return this.value.substring(t,e)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(t,e){this.value=this.value.substring(0,t)+e+this.value.substring(t)},t}(),td=function(){function t(t,e,r,n){if(this.width=t,this.height=e,this.rowSize=r,this.bits=n,null==e&&(e=t),this.height=e,t<1||e<1)throw new H("Both dimensions must be greater than 0");null==r&&(r=Math.floor((t+31)/32)),this.rowSize=r,null==n&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,o=new t(n,r),i=0;i<r;i++)for(var a=e[i],s=0;s<n;s++)a[s]&&o.set(s,i);return o},t.parseFromString=function(e,r,n){if(null===e)throw new H("stringRepresentation cannot be null");for(var o=Array(e.length),i=0,a=0,s=-1,u=0,c=0;c<e.length;)if("\n"===e.charAt(c)||"\r"===e.charAt(c)){if(i>a){if(-1===s)s=i-a;else if(i-a!==s)throw new H("row lengths do not match");a=i,u++}c++}else if(e.substring(c,c+r.length)===r)c+=r.length,o[i]=!0,i++;else if(e.substring(c,c+n.length)===n)c+=n.length,o[i]=!1,i++;else throw new H("illegal character encountered: "+e.substring(c));if(i>a){if(-1===s)s=i-a;else if(i-a!==s)throw new H("row lengths do not match");u++}for(var l=new t(s,u),h=0;h<i;h++)o[h]&&l.set(Math.floor(h%s),Math.floor(h/s));return l},t.prototype.get=function(t,e){var r=e*this.rowSize+Math.floor(t/32);return(this.bits[r]>>>(31&t)&1)!=0},t.prototype.set=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(31&t)&4294967295},t.prototype.unset=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(31&t)&4294967295)},t.prototype.flip=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(31&t)&4294967295},t.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new H("input matrix dimensions do not match");for(var e=new te(Math.floor(this.width/32)+1),r=this.rowSize,n=this.bits,o=0,i=this.height;o<i;o++)for(var a=o*r,s=t.getRow(o,e).getBitArray(),u=0;u<r;u++)n[a+u]^=s[u]},t.prototype.clear=function(){for(var t=this.bits,e=t.length,r=0;r<e;r++)t[r]=0},t.prototype.setRegion=function(t,e,r,n){if(e<0||t<0)throw new H("Left and top must be nonnegative");if(n<1||r<1)throw new H("Height and width must be at least 1");var o=t+r,i=e+n;if(i>this.height||o>this.width)throw new H("The region must fit inside the matrix");for(var a=this.rowSize,s=this.bits,u=e;u<i;u++)for(var c=u*a,l=t;l<o;l++)s[c+Math.floor(l/32)]|=1<<(31&l)&4294967295},t.prototype.getRow=function(t,e){null==e||e.getSize()<this.width?e=new te(this.width):e.clear();for(var r=this.rowSize,n=this.bits,o=t*r,i=0;i<r;i++)e.setBulk(32*i,n[o+i]);return e},t.prototype.setRow=function(t,e){Z.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var t=this.getWidth(),e=this.getHeight(),r=new te(t),n=new te(t),o=0,i=Math.floor((e+1)/2);o<i;o++)r=this.getRow(o,r),n=this.getRow(e-1-o,n),r.reverse(),n.reverse(),this.setRow(o,n),this.setRow(e-1-o,r)},t.prototype.getEnclosingRectangle=function(){for(var t=this.width,e=this.height,r=this.rowSize,n=this.bits,o=t,i=e,a=-1,s=-1,u=0;u<e;u++)for(var c=0;c<r;c++){var l=n[u*r+c];if(0!==l){if(u<i&&(i=u),u>s&&(s=u),32*c<o){for(var h=0;(l<<31-h&4294967295)==0;)h++;32*c+h<o&&(o=32*c+h)}if(32*c+31>a){for(var h=31;l>>>h==0;)h--;32*c+h>a&&(a=32*c+h)}}}return a<o||s<i?null:Int32Array.from([o,i,a-o+1,s-i+1])},t.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,e=this.bits,r=0;r<e.length&&0===e[r];)r++;if(r===e.length)return null;for(var n=r/t,o=r%t*32,i=e[r],a=0;(i<<31-a&4294967295)==0;)a++;return o+=a,Int32Array.from([o,n])},t.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,e=this.bits,r=e.length-1;r>=0&&0===e[r];)r--;if(r<0)return null;for(var n=Math.floor(r/t),o=32*Math.floor(r%t),i=e[r],a=31;i>>>a==0;)a--;return o+=a,Int32Array.from([o,n])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){return e instanceof t&&this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&Q.equals(this.bits,e.bits)},t.prototype.hashCode=function(){var t=this.width;return 31*(t=31*(t=31*(t=31*t+this.width)+this.height)+this.rowSize)+Q.hashCode(this.bits)},t.prototype.toString=function(t,e,r){return void 0===t&&(t="X "),void 0===e&&(e="  "),void 0===r&&(r="\n"),this.buildToString(t,e,r)},t.prototype.buildToString=function(t,e,r){for(var n=new th,o=0,i=this.height;o<i;o++){for(var a=0,s=this.width;a<s;a++)n.append(this.get(a,o)?t:e);n.append(r)}return n.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),tf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tf(e,t),e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(F),tg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ty=function(t){function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return tg(e,t),e.prototype.getBlackRow=function(t,r){var n=this.getLuminanceSource(),o=n.getWidth();null==r||r.getSize()<o?r=new te(o):r.clear(),this.initArrays(o);for(var i=n.getRow(t,this.luminances),a=this.buckets,s=0;s<o;s++)a[(255&i[s])>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(a);if(o<3)for(var s=0;s<o;s++)(255&i[s])<u&&r.set(s);else for(var c=255&i[0],l=255&i[1],s=1;s<o-1;s++){var h=255&i[s+1];(4*l-c-h)/2<u&&r.set(s),c=l,l=h}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),n=t.getHeight(),o=new td(r,n);this.initArrays(r);for(var i=this.buckets,a=1;a<5;a++)for(var s=Math.floor(n*a/5),u=t.getRow(s,this.luminances),c=Math.floor(4*r/5),l=Math.floor(r/5);l<c;l++){var h=255&u[l];i[h>>e.LUMINANCE_SHIFT]++}for(var d=e.estimateBlackPoint(i),f=t.getMatrix(),a=0;a<n;a++)for(var p=a*r,l=0;l<r;l++){var h=255&f[p+l];h<d&&o.set(l,a)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,n=0;n<e.LUMINANCE_BUCKETS;n++)r[n]=0},e.estimateBlackPoint=function(t){for(var r=t.length,n=0,o=0,i=0,a=0;a<r;a++)t[a]>i&&(o=a,i=t[a]),t[a]>n&&(n=t[a]);for(var s=0,u=0,a=0;a<r;a++){var c=a-o,l=t[a]*c*c;l>u&&(s=a,u=l)}if(o>s){var h=o;o=s,s=h}if(s-o<=r/16)throw new tp;for(var d=s-1,f=-1,a=s-1;a>o;a--){var p=a-o,l=p*p*(s-a)*(n-t[a]);l>f&&(d=a,f=l)}return d<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(z),tm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tv=function(t){function e(e){var r=t.call(this,e)||this;return r.matrix=null,r}return tm(e,t),e.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),o=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&o>=e.MINIMUM_DIMENSION){var i=r.getMatrix(),a=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!=0&&a++;var s=o>>e.BLOCK_SIZE_POWER;(o&e.BLOCK_SIZE_MASK)!=0&&s++;var u=e.calculateBlackPoints(i,a,s,n,o),c=new td(n,o);e.calculateThresholdForBlock(i,a,s,n,o,u,c),this.matrix=c}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,n,o,i,a,s){for(var u=i-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,l=0;l<n;l++){var h=l<<e.BLOCK_SIZE_POWER;h>u&&(h=u);for(var d=e.cap(l,2,n-3),f=0;f<r;f++){var p=f<<e.BLOCK_SIZE_POWER;p>c&&(p=c);for(var g=e.cap(f,2,r-3),y=0,m=-2;m<=2;m++){var v=a[d+m];y+=v[g-2]+v[g-1]+v[g]+v[g+1]+v[g+2]}var w=y/25;e.thresholdBlock(t,p,h,w,o,s)}}},e.cap=function(t,e,r){return t<e?e:t>r?r:t},e.thresholdBlock=function(t,r,n,o,i,a){for(var s=0,u=n*i+r;s<e.BLOCK_SIZE;s++,u+=i)for(var c=0;c<e.BLOCK_SIZE;c++)(255&t[u+c])<=o&&a.set(r+c,n+s)},e.calculateBlackPoints=function(t,r,n,o,i){for(var a=i-e.BLOCK_SIZE,s=o-e.BLOCK_SIZE,u=Array(n),c=0;c<n;c++){u[c]=new Int32Array(r);var l=c<<e.BLOCK_SIZE_POWER;l>a&&(l=a);for(var h=0;h<r;h++){var d=h<<e.BLOCK_SIZE_POWER;d>s&&(d=s);for(var f=0,p=255,g=0,y=0,m=l*o+d;y<e.BLOCK_SIZE;y++,m+=o){for(var v=0;v<e.BLOCK_SIZE;v++){var w=255&t[m+v];f+=w,w<p&&(p=w),w>g&&(g=w)}if(g-p>e.MIN_DYNAMIC_RANGE)for(y++,m+=o;y<e.BLOCK_SIZE;y++,m+=o)for(var v=0;v<e.BLOCK_SIZE;v++)f+=255&t[m+v]}var _=f>>2*e.BLOCK_SIZE_POWER;if(g-p<=e.MIN_DYNAMIC_RANGE&&(_=p/2,c>0&&h>0)){var C=(u[c-1][h]+2*u[c][h-1]+u[c-1][h-1])/4;p<C&&(_=C)}u[c][h]=_}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=5*e.BLOCK_SIZE,e.MIN_DYNAMIC_RANGE=24,e}(ty),tw=function(){function t(t,e){this.width=t,this.height=e}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(t,e,r,n){throw new tu("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new tu("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new tu("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var t=new Uint8ClampedArray(this.width),e=new th,r=0;r<this.height;r++){for(var n=this.getRow(r,t),o=0;o<this.width;o++){var i=255&n[o],a=void 0;a=i<64?"#":i<128?"+":i<192?".":" ",e.append(a)}e.append("\n")}return e.toString()},t}(),t_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tC=function(t){function e(e){var r=t.call(this,e.getWidth(),e.getHeight())||this;return r.delegate=e,r}return t_(e,t),e.prototype.getRow=function(t,e){for(var r=this.delegate.getRow(t,e),n=this.getWidth(),o=0;o<n;o++)r[o]=255-(255&r[o]);return r},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),e=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(e),n=0;n<e;n++)r[n]=255-(255&t[n]);return r},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,n,o){return new e(this.delegate.crop(t,r,n,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(tw),tA=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tE=function(t){function e(r,n){void 0===n&&(n=!1);var o=t.call(this,r.width,r.height)||this;return o.canvas=r,o.tempCanvasElement=null,o.buffer=e.makeBufferFromCanvasImageData(r,n),o}return tA(e,t),e.makeBufferFromCanvasImageData=function(t,r){void 0===r&&(r=!1);var n=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(n.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,n,o){void 0===o&&(o=!1);var i=new Uint8ClampedArray(r*n);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var a=0,s=0,u=t.length;a<u;a+=4,s++){var c=void 0,l=t[a+3];if(0===l)c=255;else{var h=t[a],d=t[a+1],f=t[a+2];c=306*h+601*d+117*f+512>>10}i[s]=c}else for(var a=0,s=0,p=t.length;a<p;a+=4,s++){var c=void 0,l=t[a+3];if(0===l)c=255;else{var h=t[a],d=t[a+1],f=t[a+2];c=306*h+601*d+117*f+512>>10}i[s]=255-c}return i},e.prototype.getRow=function(t,e){if(t<0||t>=this.getHeight())throw new H("Requested row is outside the image: "+t);var r=this.getWidth(),n=t*r;return null===e?e=this.buffer.slice(n,n+r):(e.length<r&&(e=new Uint8ClampedArray(r)),e.set(this.buffer.slice(n,n+r))),e},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(e,r,n,o){return t.prototype.crop.call(this,e,r,n,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),n=r.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,i=this.canvas.width,a=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(o))*i+Math.abs(Math.sin(o))*a),u=Math.ceil(Math.abs(Math.sin(o))*i+Math.abs(Math.cos(o))*a);return r.width=s,r.height=u,n.translate(s/2,u/2),n.rotate(o),n.drawImage(this.canvas,-(i/2),-(a/2)),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new tC(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(tw),tI=function(){function t(t,e,r){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=r||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),tb=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})},tS=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},tN=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tT=function(){function t(t,e,r){void 0===e&&(e=500),this.reader=t,this.timeBetweenScansMillis=e,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return"undefined"!=typeof navigator},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(t){this._timeBetweenDecodingAttempts=t<0?0:t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(t){this._hints=t||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return tb(this,void 0,void 0,function(){var t,e,r,n,o,i,a,s,u,c,l,h;return tS(this,function(d){switch(d.label){case 0:if(!this.hasNavigator)throw Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=d.sent(),e=[];try{for(n=(r=tN(t)).next();!n.done;n=r.next())o=n.value,i="video"===o.kind?"videoinput":o.kind,"videoinput"===i&&(a=o.deviceId||o.id,s=o.label||"Video device "+(e.length+1),u=o.groupId,c={deviceId:a,label:s,kind:i,groupId:u},e.push(c))}catch(t){l={error:t}}finally{try{n&&!n.done&&(h=r.return)&&h.call(r)}finally{if(l)throw l.error}}return[2,e]}})})},t.prototype.getVideoInputDevices=function(){return tb(this,void 0,void 0,function(){return tS(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,t.sent().map(function(t){return new tI(t.deviceId,t.label)})]}})})},t.prototype.findDeviceById=function(t){return tb(this,void 0,void 0,function(){var e;return tS(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:if(!(e=r.sent()))return[2,null];return[2,e.find(function(e){return e.deviceId===t})]}})})},t.prototype.decodeFromInputVideoDevice=function(t,e){return tb(this,void 0,void 0,function(){return tS(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(t,e)];case 1:return[2,r.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(t,e){return tb(this,void 0,void 0,function(){var r;return tS(this,function(n){switch(n.label){case 0:return this.reset(),r={video:t?{deviceId:{exact:t}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(r,e)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(t,e){return tb(this,void 0,void 0,function(){var r;return tS(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=n.sent(),[4,this.decodeOnceFromStream(r,e)];case 2:return[2,n.sent()]}})})},t.prototype.decodeOnceFromStream=function(t,e){return tb(this,void 0,void 0,function(){var r;return tS(this,function(n){switch(n.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return r=n.sent(),[4,this.decodeOnce(r)];case 2:return[2,n.sent()]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(t,e,r){return tb(this,void 0,void 0,function(){return tS(this,function(n){switch(n.label){case 0:return[4,this.decodeFromVideoDevice(t,e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromVideoDevice=function(t,e,r){return tb(this,void 0,void 0,function(){var n;return tS(this,function(o){switch(o.label){case 0:return n={video:t?{deviceId:{exact:t}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(n,e,r)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(t,e,r){return tb(this,void 0,void 0,function(){var n;return tS(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=o.sent(),[4,this.decodeFromStream(n,e,r)];case 2:return[2,o.sent()]}})})},t.prototype.decodeFromStream=function(t,e,r){return tb(this,void 0,void 0,function(){var n;return tS(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return n=o.sent(),[4,this.decodeContinuously(n,r)];case 2:return[2,o.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(t,e){return tb(this,void 0,void 0,function(){var r;return tS(this,function(n){switch(n.label){case 0:return r=this.prepareVideoElement(e),this.addVideoSource(r,t),this.videoElement=r,this.stream=t,[4,this.playVideoOnLoadAsync(r)];case 1:return n.sent(),[2,r]}})})},t.prototype.playVideoOnLoadAsync=function(t){var e=this;return new Promise(function(r,n){return e.playVideoOnLoad(t,function(){return r()})})},t.prototype.playVideoOnLoad=function(t,e){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(t)},t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)},t.prototype.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2},t.prototype.tryPlayVideo=function(t){return tb(this,void 0,void 0,function(){return tS(this,function(e){switch(e.label){case 0:if(this.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.play()];case 2:return e.sent(),[3,4];case 3:return e.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(t,e){var r=document.getElementById(t);if(!r)throw new V("element with id '"+t+"' not found");if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new V("element with id '"+t+"' must be an "+e+" element");return r},t.prototype.decodeFromImage=function(t,e){if(!t&&!e)throw new V("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)},t.prototype.decodeFromVideo=function(t,e){if(!t&&!e)throw new V("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)},t.prototype.decodeFromVideoContinuously=function(t,e,r){if(void 0===t&&void 0===e)throw new V("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,r):this.decodeFromVideoElementContinuously(t,r)},t.prototype.decodeFromImageElement=function(t){if(!t)throw new V("An image element must be provided.");this.reset();var e=this.prepareImageElement(t);return this.imageElement=e,this.isImageLoaded(e)?this.decodeOnce(e,!1,!0):this._decodeOnLoadImage(e)},t.prototype.decodeFromVideoElement=function(t){var e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)},t.prototype.decodeFromVideoElementContinuously=function(t,e){var r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,e)},t.prototype._decodeFromVideoElementSetup=function(t){if(!t)throw new V("A video element must be provided.");this.reset();var e=this.prepareVideoElement(t);return this.videoElement=e,e},t.prototype.decodeFromImageUrl=function(t){if(!t)throw new V("An URL must be provided.");this.reset();var e=this.prepareImageElement();this.imageElement=e;var r=this._decodeOnLoadImage(e);return e.src=t,r},t.prototype.decodeFromVideoUrl=function(t){if(!t)throw new V("An URL must be provided.");this.reset();var e=this.prepareVideoElement(),r=this.decodeFromVideoElement(e);return e.src=t,r},t.prototype.decodeFromVideoUrlContinuously=function(t,e){if(!t)throw new V("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElementContinuously(r,e);return r.src=t,n},t.prototype._decodeOnLoadImage=function(t){var e=this;return new Promise(function(r,n){e.imageLoadedListener=function(){return e.decodeOnce(t,!1,!0).then(r,n)},t.addEventListener("load",e.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(t){return tb(this,void 0,void 0,function(){return tS(this,function(e){switch(e.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return e.sent(),[4,this.decodeOnce(t)];case 2:return[2,e.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(t,e){return tb(this,void 0,void 0,function(){return tS(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return r.sent(),this.decodeContinuously(t,e),[2]}})})},t.prototype.isImageLoaded=function(t){return!!t.complete&&0!==t.naturalWidth},t.prototype.prepareImageElement=function(t){var e;return void 0===t&&((e=document.createElement("img")).width=200,e.height=200),"string"==typeof t&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e},t.prototype.prepareVideoElement=function(t){var e;return t||"undefined"==typeof document||((e=document.createElement("video")).width=200,e.height=200),"string"==typeof t&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e},t.prototype.decodeOnce=function(t,e,r){var n=this;void 0===e&&(e=!0),void 0===r&&(r=!0),this._stopAsyncDecode=!1;var o=function(i,a){if(n._stopAsyncDecode){a(new tp("Video stream has ended before any code could be detected.")),n._stopAsyncDecode=void 0;return}try{var s=n.decode(t);i(s)}catch(t){var u=e&&t instanceof tp,c=(t instanceof G||t instanceof to)&&r;if(u||c)return setTimeout(o,n._timeBetweenDecodingAttempts,i,a);a(t)}};return new Promise(function(t,e){return o(t,e)})},t.prototype.decodeContinuously=function(t,e){var r=this;this._stopContinuousDecode=!1;var n=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var o=r.decode(t);e(o,null),setTimeout(n,r.timeBetweenScansMillis)}catch(t){e(null,t);var i=t instanceof G||t instanceof to,a=t instanceof tp;(i||a)&&setTimeout(n,r._timeBetweenDecodingAttempts)}};n()},t.prototype.decode=function(t){var e=this.createBinaryBitmap(t);return this.decodeBitmap(e)},t.prototype.createBinaryBitmap=function(t){this.getCaptureCanvasContext(t);var e=!1;return t instanceof HTMLVideoElement?(this.drawFrameOnCanvas(t),e=!0):this.drawImageOnCanvas(t),new X(new tv(new tE(this.getCaptureCanvas(t),e)))},t.prototype.getCaptureCanvasContext=function(t){if(!this.captureCanvasContext){var e=this.getCaptureCanvas(t),r=void 0;try{r=e.getContext("2d",{willReadFrequently:!0})}catch(t){r=e.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(t){if(!this.captureCanvas){var e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(t,e,r){void 0===e&&(e={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),void 0===r&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},t.prototype.drawImageOnCanvas=function(t,e,r){void 0===e&&(e={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),void 0===r&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},t.prototype.decodeBitmap=function(t){return this.reader.decode(t,this._hints)},t.prototype.createCaptureCanvas=function(t){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;var e,r,n=document.createElement("canvas");return void 0!==t&&(t instanceof HTMLVideoElement?(e=t.videoWidth,r=t.videoHeight):t instanceof HTMLImageElement&&(e=t.naturalWidth||t.width,r=t.naturalHeight||t.height)),n.style.width=e+"px",n.style.height=r+"px",n.width=e,n.height=r,n},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(t){return t.stop()}),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(t,e){try{t.srcObject=e}catch(r){t.src=URL.createObjectURL(e)}},t.prototype.cleanVideoSource=function(t){try{t.srcObject=null}catch(e){t.src=""}this.videoElement.removeAttribute("src")},t}(),tx=function(){function t(t,e,r,n,o,i){void 0===r&&(r=null==e?0:8*e.length),void 0===i&&(i=Z.currentTimeMillis()),this.text=t,this.rawBytes=e,this.numBits=r,this.resultPoints=n,this.format=o,this.timestamp=i,this.text=t,this.rawBytes=e,null==r?this.numBits=null==e?0:8*e.length:this.numBits=r,this.resultPoints=n,this.format=o,this.resultMetadata=null,null==i?this.timestamp=Z.currentTimeMillis():this.timestamp=i}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(t,e){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)},t.prototype.putAllMetadata=function(t){null!==t&&(null===this.resultMetadata?this.resultMetadata=t:this.resultMetadata=new Map(t))},t.prototype.addResultPoints=function(t){var e=this.resultPoints;if(null===e)this.resultPoints=t;else if(null!==t&&t.length>0){var r=Array(e.length+t.length);Z.arraycopy(e,0,r,0,e.length),Z.arraycopy(t,0,r,e.length,t.length),this.resultPoints=r}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}();!function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(a||(a={}));let tO=a;!function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(s||(s={}));let tR=s;var tD=function(){function t(t,e,r,n,o,i){void 0===o&&(o=-1),void 0===i&&(i=-1),this.rawBytes=t,this.text=e,this.byteSegments=r,this.ecLevel=n,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=i,this.numBits=null==t?0:8*t.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(t){this.numBits=t},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(t){this.errorsCorrected=t},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(t){this.erasures=t},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(t){this.other=t},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),tM=function(){function t(){}return t.prototype.exp=function(t){return this.expTable[t]},t.prototype.log=function(t){if(0===t)throw new H;return this.logTable[t]},t.addOrSubtract=function(t,e){return t^e},t}(),tP=function(){function t(t,e){if(0===e.length)throw new H;this.field=t;var r=e.length;if(r>1&&0===e[0]){for(var n=1;n<r&&0===e[n];)n++;n===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-n),Z.arraycopy(e,n,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return 0===this.coefficients[0]},t.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},t.prototype.evaluateAt=function(t){if(0===t)return this.getCoefficient(0);var e,r=this.coefficients;if(1===t){e=0;for(var n=0,o=r.length;n!==o;n++){var i=r[n];e=tM.addOrSubtract(e,i)}return e}e=r[0];for(var a=r.length,s=this.field,n=1;n<a;n++)e=tM.addOrSubtract(s.multiply(t,e),r[n]);return e},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new H("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var o=r;r=n,n=o}var i=new Int32Array(n.length),a=n.length-r.length;Z.arraycopy(n,0,i,0,a);for(var s=a;s<n.length;s++)i[s]=tM.addOrSubtract(r[s-a],n[s]);return new t(this.field,i)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new H("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,o=e.coefficients,i=o.length,a=new Int32Array(n+i-1),s=this.field,u=0;u<n;u++)for(var c=r[u],l=0;l<i;l++)a[u+l]=tM.addOrSubtract(a[u+l],s.multiply(c,o[l]));return new t(s,a)},t.prototype.multiplyScalar=function(e){if(0===e)return this.field.getZero();if(1===e)return this;for(var r=this.coefficients.length,n=this.field,o=new Int32Array(r),i=this.coefficients,a=0;a<r;a++)o[a]=n.multiply(i[a],e);return new t(n,o)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new H;if(0===r)return this.field.getZero();for(var n=this.coefficients,o=n.length,i=new Int32Array(o+e),a=this.field,s=0;s<o;s++)i[s]=a.multiply(n[s],r);return new t(a,i)},t.prototype.divide=function(t){if(!this.field.equals(t.field))throw new H("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new H("Divide by 0");for(var e=this.field,r=e.getZero(),n=this,o=t.getCoefficient(t.getDegree()),i=e.inverse(o);n.getDegree()>=t.getDegree()&&!n.isZero();){var a=n.getDegree()-t.getDegree(),s=e.multiply(n.getCoefficient(n.getDegree()),i),u=t.multiplyByMonomial(a,s),c=e.buildMonomial(a,s);r=r.addOrSubtract(c),n=n.addOrSubtract(u)}return[r,n]},t.prototype.toString=function(){for(var t="",e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);if(0!==r){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),0===e||1!==r){var n=this.field.log(r);0===n?t+="1":1===n?t+="a":t+="a^"+n}0!==e&&(1===e?t+="x":t+="x^"+e)}}return t},t}(),tB=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tB(e,t),e.kind="ArithmeticException",e}(F),tL=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tF=function(t){function e(e,r,n){var o=t.call(this)||this;o.primitive=e,o.size=r,o.generatorBase=n;for(var i=new Int32Array(r),a=1,s=0;s<r;s++)i[s]=a,(a*=2)>=r&&(a^=e,a&=r-1);o.expTable=i;for(var u=new Int32Array(r),s=0;s<r-1;s++)u[i[s]]=s;return o.logTable=u,o.zero=new tP(o,Int32Array.from([0])),o.one=new tP(o,Int32Array.from([1])),o}return tL(e,t),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,e){if(t<0)throw new H;if(0===e)return this.zero;var r=new Int32Array(t+1);return r[0]=e,new tP(this,r)},e.prototype.inverse=function(t){if(0===t)throw new tk;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+tt.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(tM),tj=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tV=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tj(e,t),e.kind="ReedSolomonException",e}(F),tU=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tU(e,t),e.kind="IllegalStateException",e}(F),tX=function(){function t(t){this.field=t}return t.prototype.decode=function(t,e){for(var r=this.field,n=new tP(r,t),o=new Int32Array(e),i=!0,a=0;a<e;a++){var s=n.evaluateAt(r.exp(a+r.getGeneratorBase()));o[o.length-1-a]=s,0!==s&&(i=!1)}if(!i)for(var u=new tP(r,o),c=this.runEuclideanAlgorithm(r.buildMonomial(e,1),u,e),l=c[0],h=c[1],d=this.findErrorLocations(l),f=this.findErrorMagnitudes(h,d),a=0;a<d.length;a++){var p=t.length-1-r.log(d[a]);if(p<0)throw new tV("Bad error location");t[p]=tF.addOrSubtract(t[p],f[a])}},t.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var n=t;t=e,e=n}for(var o=this.field,i=t,a=e,s=o.getZero(),u=o.getOne();a.getDegree()>=(r/2|0);){var c=i,l=s;if(i=a,s=u,i.isZero())throw new tV("r_{i-1} was zero");a=c;for(var h=o.getZero(),d=i.getCoefficient(i.getDegree()),f=o.inverse(d);a.getDegree()>=i.getDegree()&&!a.isZero();){var p=a.getDegree()-i.getDegree(),g=o.multiply(a.getCoefficient(a.getDegree()),f);h=h.addOrSubtract(o.buildMonomial(p,g)),a=a.addOrSubtract(i.multiplyByMonomial(p,g))}if(u=h.multiply(s).addOrSubtract(l),a.getDegree()>=i.getDegree())throw new tH("Division algorithm failed to reduce polynomial?")}var y=u.getCoefficient(0);if(0===y)throw new tV("sigmaTilde(0) was zero");var m=o.inverse(y);return[u.multiplyScalar(m),a.multiplyScalar(m)]},t.prototype.findErrorLocations=function(t){var e=t.getDegree();if(1===e)return Int32Array.from([t.getCoefficient(1)]);for(var r=new Int32Array(e),n=0,o=this.field,i=1;i<o.getSize()&&n<e;i++)0===t.evaluateAt(i)&&(r[n]=o.inverse(i),n++);if(n!==e)throw new tV("Error locator degree does not match number of roots");return r},t.prototype.findErrorMagnitudes=function(t,e){for(var r=e.length,n=new Int32Array(r),o=this.field,i=0;i<r;i++){for(var a=o.inverse(e[i]),s=1,u=0;u<r;u++)if(i!==u){var c=o.multiply(e[u],a),l=(1&c)==0?1|c:-2&c;s=o.multiply(s,l)}n[i]=o.multiply(t.evaluateAt(a),o.inverse(s)),0!==o.getGeneratorBase()&&(n[i]=o.multiply(n[i],a))}return n},t}();!function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"}(u||(u={}));var tW=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),o=this.correctBits(n),i=new tD(t.convertBoolArrayToByteArray(o),t.getEncodedData(o),null,null);return i.setNumBits(o.length),i},t.highLevelDecode=function(t){return this.getEncodedData(t)},t.getEncodedData=function(e){for(var r=e.length,n=u.UPPER,o=u.UPPER,i="",a=0;a<r;)if(o===u.BINARY){if(r-a<5)break;var s=t.readCode(e,a,5);if(a+=5,0===s){if(r-a<11)break;s=t.readCode(e,a,11)+31,a+=11}for(var c=0;c<s;c++){if(r-a<8){a=r;break}var l=t.readCode(e,a,8);i+=tl.castAsNonUtf8Char(l),a+=8}o=n}else{var h=o===u.DIGIT?4:5;if(r-a<h)break;var l=t.readCode(e,a,h);a+=h;var d=t.getCharacter(o,l);d.startsWith("CTRL_")?(n=o,o=t.getTable(d.charAt(5)),"L"===d.charAt(6)&&(n=o)):(i+=d,o=n)}return i},t.getTable=function(t){switch(t){case"L":return u.LOWER;case"P":return u.PUNCT;case"M":return u.MIXED;case"D":return u.DIGIT;case"B":return u.BINARY;default:return u.UPPER}},t.getCharacter=function(e,r){switch(e){case u.UPPER:return t.UPPER_TABLE[r];case u.LOWER:return t.LOWER_TABLE[r];case u.MIXED:return t.MIXED_TABLE[r];case u.PUNCT:return t.PUNCT_TABLE[r];case u.DIGIT:return t.DIGIT_TABLE[r];default:throw new tH("Bad table")}},t.prototype.correctBits=function(e){2>=this.ddata.getNbLayers()?(n=6,r=tF.AZTEC_DATA_6):8>=this.ddata.getNbLayers()?(n=8,r=tF.AZTEC_DATA_8):22>=this.ddata.getNbLayers()?(n=10,r=tF.AZTEC_DATA_10):(n=12,r=tF.AZTEC_DATA_12);var r,n,o=this.ddata.getNbDatablocks(),i=e.length/n;if(i<o)throw new to;for(var a=e.length%n,s=new Int32Array(i),u=0;u<i;u++,a+=n)s[u]=t.readCode(e,a,n);try{new tX(r).decode(s,i-o)}catch(t){throw new to(t)}for(var c=(1<<n)-1,l=0,u=0;u<o;u++){var h=s[u];if(0===h||h===c)throw new to;(1===h||h===c-1)&&l++}for(var d=Array(o*n-l),f=0,u=0;u<o;u++){var h=s[u];if(1===h||h===c-1)d.fill(h>1,f,f+n-1),f+=n-1;else for(var p=n-1;p>=0;--p)d[f++]=(h&1<<p)!=0}return d},t.prototype.extractBits=function(t){var e=this.ddata.isCompact(),r=this.ddata.getNbLayers(),n=(e?11:14)+4*r,o=new Int32Array(n),i=Array(this.totalBitsInLayer(r,e));if(e)for(var a=0;a<o.length;a++)o[a]=a;else for(var s=n+1+2*tt.truncDivision(tt.truncDivision(n,2)-1,15),u=n/2,c=tt.truncDivision(s,2),a=0;a<u;a++){var l=a+tt.truncDivision(a,15);o[u-a-1]=c-l-1,o[u+a]=c+l+1}for(var a=0,h=0;a<r;a++){for(var d=(r-a)*4+(e?9:12),f=2*a,p=n-1-f,g=0;g<d;g++)for(var y=2*g,m=0;m<2;m++)i[h+y+m]=t.get(o[f+m],o[f+g]),i[h+2*d+y+m]=t.get(o[f+g],o[p-m]),i[h+4*d+y+m]=t.get(o[p-m],o[p-g]),i[h+6*d+y+m]=t.get(o[p-g],o[f+m]);h+=8*d}return i},t.readCode=function(t,e,r){for(var n=0,o=e;o<e+r;o++)n<<=1,t[o]&&(n|=1);return n},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","	","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),tG=function(){function t(){}return t.round=function(t){return isNaN(t)?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0},t.distance=function(t,e,r,n){var o=t-r,i=e-n;return Math.sqrt(o*o+i*i)},t.sum=function(t){for(var e=0,r=0,n=t.length;r!==n;r++)e+=t[r];return e},t}(),tz=function(){function t(){}return t.floatToIntBits=function(t){return t},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),tZ=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){return e instanceof t&&this.x===e.x&&this.y===e.y},t.prototype.hashCode=function(){return 31*tz.floatToIntBits(this.x)+tz.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(t){var e,r,n,o=this.distance(t[0],t[1]),i=this.distance(t[1],t[2]),a=this.distance(t[0],t[2]);if(i>=o&&i>=a?(r=t[0],e=t[1],n=t[2]):a>=i&&a>=o?(r=t[1],e=t[0],n=t[2]):(r=t[2],e=t[0],n=t[1]),0>this.crossProductZ(e,r,n)){var s=e;e=n,n=s}t[0]=e,t[1]=r,t[2]=n},t.distance=function(t,e){return tG.distance(t.x,t.y,e.x,e.y)},t.crossProductZ=function(t,e,r){var n=e.x,o=e.y;return(r.x-n)*(t.y-o)-(r.y-o)*(t.x-n)},t}(),tY=function(){function t(t,e){this.bits=t,this.points=e}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),tK=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),t$=function(t){function e(e,r,n,o,i){var a=t.call(this,e,r)||this;return a.compact=n,a.nbDatablocks=o,a.nbLayers=i,a}return tK(e,t),e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(tY),tq=function(){function t(e,r,n,o){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),null==r&&(r=t.INIT_SIZE),null==n&&(n=e.getWidth()/2|0),null==o&&(o=e.getHeight()/2|0);var i=r/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=o-i,this.downInit=o+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new tp}return t.prototype.detect=function(){for(var t=this.leftInit,e=this.rightInit,r=this.upInit,n=this.downInit,o=!1,i=!0,a=!1,s=!1,u=!1,c=!1,l=!1,h=this.width,d=this.height;i;){i=!1;for(var f=!0;(f||!s)&&e<h;)(f=this.containsBlackPoint(r,n,e,!1))?(e++,i=!0,s=!0):!s&&e++;if(e>=h){o=!0;break}for(var p=!0;(p||!u)&&n<d;)(p=this.containsBlackPoint(t,e,n,!0))?(n++,i=!0,u=!0):!u&&n++;if(n>=d){o=!0;break}for(var g=!0;(g||!c)&&t>=0;)(g=this.containsBlackPoint(r,n,t,!1))?(t--,i=!0,c=!0):!c&&t--;if(t<0){o=!0;break}for(var y=!0;(y||!l)&&r>=0;)(y=this.containsBlackPoint(t,e,r,!0))?(r--,i=!0,l=!0):!l&&r--;if(r<0){o=!0;break}i&&(a=!0)}if(!o&&a){for(var m=e-t,v=null,w=1;null===v&&w<m;w++)v=this.getBlackPointOnSegment(t,n-w,t+w,n);if(null==v)throw new tp;for(var _=null,w=1;null===_&&w<m;w++)_=this.getBlackPointOnSegment(t,r+w,t+w,r);if(null==_)throw new tp;for(var C=null,w=1;null===C&&w<m;w++)C=this.getBlackPointOnSegment(e,r+w,e-w,r);if(null==C)throw new tp;for(var A=null,w=1;null===A&&w<m;w++)A=this.getBlackPointOnSegment(e,n-w,e-w,n);if(null==A)throw new tp;return this.centerEdges(A,v,C,_)}throw new tp},t.prototype.getBlackPointOnSegment=function(t,e,r,n){for(var o=tG.round(tG.distance(t,e,r,n)),i=(r-t)/o,a=(n-e)/o,s=this.image,u=0;u<o;u++){var c=tG.round(t+u*i),l=tG.round(e+u*a);if(s.get(c,l))return new tZ(c,l)}return null},t.prototype.centerEdges=function(e,r,n,o){var i=e.getX(),a=e.getY(),s=r.getX(),u=r.getY(),c=n.getX(),l=n.getY(),h=o.getX(),d=o.getY(),f=t.CORR;return i<this.width/2?[new tZ(h-f,d+f),new tZ(s+f,u+f),new tZ(c-f,l-f),new tZ(i+f,a-f)]:[new tZ(h+f,d+f),new tZ(s+f,u-f),new tZ(c-f,l+f),new tZ(i-f,a-f)]},t.prototype.containsBlackPoint=function(t,e,r,n){var o=this.image;if(n){for(var i=t;i<=e;i++)if(o.get(i,r))return!0}else for(var a=t;a<=e;a++)if(o.get(r,a))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),tJ=function(){function t(){}return t.checkAndNudgePoints=function(t,e){for(var r=t.getWidth(),n=t.getHeight(),o=!0,i=0;i<e.length&&o;i+=2){var a=Math.floor(e[i]),s=Math.floor(e[i+1]);if(a<-1||a>r||s<-1||s>n)throw new tp;o=!1,-1===a?(e[i]=0,o=!0):a===r&&(e[i]=r-1,o=!0),-1===s?(e[i+1]=0,o=!0):s===n&&(e[i+1]=n-1,o=!0)}o=!0;for(var i=e.length-2;i>=0&&o;i-=2){var a=Math.floor(e[i]),s=Math.floor(e[i+1]);if(a<-1||a>r||s<-1||s>n)throw new tp;o=!1,-1===a?(e[i]=0,o=!0):a===r&&(e[i]=r-1,o=!0),-1===s?(e[i+1]=0,o=!0):s===n&&(e[i+1]=n-1,o=!0)}},t}(),tQ=function(){function t(t,e,r,n,o,i,a,s,u){this.a11=t,this.a21=e,this.a31=r,this.a12=n,this.a22=o,this.a32=i,this.a13=a,this.a23=s,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,o,i,a,s,u,c,l,h,d,f,p,g,y){var m=t.quadrilateralToSquare(e,r,n,o,i,a,s,u);return t.squareToQuadrilateral(c,l,h,d,f,p,g,y).times(m)},t.prototype.transformPoints=function(t){for(var e=t.length,r=this.a11,n=this.a12,o=this.a13,i=this.a21,a=this.a22,s=this.a23,u=this.a31,c=this.a32,l=this.a33,h=0;h<e;h+=2){var d=t[h],f=t[h+1],p=o*d+s*f+l;t[h]=(r*d+i*f+u)/p,t[h+1]=(n*d+a*f+c)/p}},t.prototype.transformPointsWithValues=function(t,e){for(var r=this.a11,n=this.a12,o=this.a13,i=this.a21,a=this.a22,s=this.a23,u=this.a31,c=this.a32,l=this.a33,h=t.length,d=0;d<h;d++){var f=t[d],p=e[d],g=o*f+s*p+l;t[d]=(r*f+i*p+u)/g,e[d]=(n*f+a*p+c)/g}},t.squareToQuadrilateral=function(e,r,n,o,i,a,s,u){var c=e-n+i-s,l=r-o+a-u;if(0===c&&0===l)return new t(n-e,i-n,e,o-r,a-o,r,0,0,1);var h=n-i,d=s-i,f=o-a,p=u-a,g=h*p-d*f,y=(c*p-d*l)/g,m=(h*l-c*f)/g;return new t(n-e+y*n,s-e+m*s,e,o-r+y*o,u-r+m*u,r,y,m,1)},t.quadrilateralToSquare=function(e,r,n,o,i,a,s,u){return t.squareToQuadrilateral(e,r,n,o,i,a,s,u).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),t1=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),t0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return t1(e,t),e.prototype.sampleGrid=function(t,e,r,n,o,i,a,s,u,c,l,h,d,f,p,g,y,m,v){var w=tQ.quadrilateralToQuadrilateral(n,o,i,a,s,u,c,l,h,d,f,p,g,y,m,v);return this.sampleGridWithTransform(t,e,r,w)},e.prototype.sampleGridWithTransform=function(t,e,r,n){if(e<=0||r<=0)throw new tp;for(var o=new td(e,r),i=new Float32Array(2*e),a=0;a<r;a++){for(var s=i.length,u=a+.5,c=0;c<s;c+=2)i[c]=c/2+.5,i[c+1]=u;n.transformPoints(i),tJ.checkAndNudgePoints(t,i);try{for(var c=0;c<s;c+=2)t.get(Math.floor(i[c]),Math.floor(i[c+1]))&&o.set(c/2,a)}catch(t){throw new tp}}return o},e}(tJ),t2=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new t0,t}(),t4=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.toResultPoint=function(){return new tZ(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),t3=function(){function t(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(t){var e=this.getMatrixCenter(),r=this.getBullsEyeCorners(e);if(t){var n=r[0];r[0]=r[2],r[2]=n}return this.extractParameters(r),new t$(this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),this.getMatrixCornerPoints(r),this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new tp;var e=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(r,e);for(var n=0,o=0;o<4;o++){var i=r[(this.shift+o)%4];this.compact?(n<<=7,n+=i>>1&127):(n<<=10,n+=(i>>2&992)+(i>>1&31))}var a=this.getCorrectedParameterData(n,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(63&a)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(2047&a)+1)},t.prototype.getRotation=function(t,e){var r=0;t.forEach(function(t,n,o){r=(r<<3)+((t>>e-2<<1)+(1&t))}),r=((1&r)<<11)+(r>>1);for(var n=0;n<4;n++)if(2>=tt.bitCount(r^this.EXPECTED_CORNER_BITS[n]))return n;throw new tp},t.prototype.getCorrectedParameterData=function(t,e){e?(r=7,n=2):(r=10,n=4);for(var r,n,o=r-n,i=new Int32Array(r),a=r-1;a>=0;--a)i[a]=15&t,t>>=4;try{new tX(tF.AZTEC_PARAM).decode(i,o)}catch(t){throw new tp}for(var s=0,a=0;a<n;a++)s=(s<<4)+i[a];return s},t.prototype.getBullsEyeCorners=function(t){var e=t,r=t,n=t,o=t,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(e,i,1,-1),s=this.getFirstDifferent(r,i,1,1),u=this.getFirstDifferent(n,i,-1,1),c=this.getFirstDifferent(o,i,-1,-1);if(this.nbCenterLayers>2){var l=this.distancePoint(c,a)*this.nbCenterLayers/(this.distancePoint(o,e)*(this.nbCenterLayers+2));if(l<.75||l>1.25||!this.isWhiteOrBlackRectangle(a,s,u,c))break}e=a,r=s,n=u,o=c,i=!i}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new tp;this.compact=5===this.nbCenterLayers;var h=new tZ(e.getX()+.5,e.getY()-.5),d=new tZ(r.getX()+.5,r.getY()+.5),f=new tZ(n.getX()-.5,n.getY()+.5),p=new tZ(o.getX()-.5,o.getY()-.5);return this.expandSquare([h,d,f,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){try{var t,e,r,n,o=new tq(this.image).detect();t=o[0],e=o[1],r=o[2],n=o[3]}catch(o){var i=this.image.getWidth()/2,a=this.image.getHeight()/2;t=this.getFirstDifferent(new t4(i+7,a-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new t4(i+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new t4(i-7,a+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new t4(i-7,a-7),!1,-1,-1).toResultPoint()}var s=tG.round((t.getX()+n.getX()+e.getX()+r.getX())/4),u=tG.round((t.getY()+n.getY()+e.getY()+r.getY())/4);try{var o=new tq(this.image,15,s,u).detect();t=o[0],e=o[1],r=o[2],n=o[3]}catch(o){t=this.getFirstDifferent(new t4(s+7,u-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new t4(s+7,u+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new t4(s-7,u+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new t4(s-7,u-7),!1,-1,-1).toResultPoint()}return new t4(s=tG.round((t.getX()+n.getX()+e.getX()+r.getX())/4),u=tG.round((t.getY()+n.getY()+e.getY()+r.getY())/4))},t.prototype.getMatrixCornerPoints=function(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(t,e,r,n,o){var i=t2.getInstance(),a=this.getDimension(),s=a/2-this.nbCenterLayers,u=a/2+this.nbCenterLayers;return i.sampleGrid(t,a,a,s,s,u,s,u,u,s,u,e.getX(),e.getY(),r.getX(),r.getY(),n.getX(),n.getY(),o.getX(),o.getY())},t.prototype.sampleLine=function(t,e,r){for(var n=0,o=this.distanceResultPoint(t,e),i=o/r,a=t.getX(),s=t.getY(),u=i*(e.getX()-t.getX())/o,c=i*(e.getY()-t.getY())/o,l=0;l<r;l++)this.image.get(tG.round(a+l*u),tG.round(s+l*c))&&(n|=1<<r-l-1);return n},t.prototype.isWhiteOrBlackRectangle=function(t,e,r,n){t=new t4(t.getX()-3,t.getY()+3),e=new t4(e.getX()-3,e.getY()-3),r=new t4(r.getX()+3,r.getY()-3),n=new t4(n.getX()+3,n.getY()+3);var o=this.getColor(n,t);if(0===o)return!1;var i=this.getColor(t,e);return i===o&&(i=this.getColor(e,r))===o&&(i=this.getColor(r,n))===o},t.prototype.getColor=function(t,e){for(var r=this.distancePoint(t,e),n=(e.getX()-t.getX())/r,o=(e.getY()-t.getY())/r,i=0,a=t.getX(),s=t.getY(),u=this.image.get(t.getX(),t.getY()),c=Math.ceil(r),l=0;l<c;l++)a+=n,s+=o,this.image.get(tG.round(a),tG.round(s))!==u&&i++;var h=i/r;return h>.1&&h<.9?0:h<=.1===u?1:-1},t.prototype.getFirstDifferent=function(t,e,r,n){for(var o=t.getX()+r,i=t.getY()+n;this.isValid(o,i)&&this.image.get(o,i)===e;)o+=r,i+=n;for(o-=r,i-=n;this.isValid(o,i)&&this.image.get(o,i)===e;)o+=r;for(o-=r;this.isValid(o,i)&&this.image.get(o,i)===e;)i+=n;return new t4(o,i-=n)},t.prototype.expandSquare=function(t,e,r){var n=r/(2*e),o=t[0].getX()-t[2].getX(),i=t[0].getY()-t[2].getY(),a=(t[0].getX()+t[2].getX())/2,s=(t[0].getY()+t[2].getY())/2,u=new tZ(a+n*o,s+n*i),c=new tZ(a-n*o,s-n*i);return o=t[1].getX()-t[3].getX(),i=t[1].getY()-t[3].getY(),[u,new tZ((a=(t[1].getX()+t[3].getX())/2)+n*o,(s=(t[1].getY()+t[3].getY())/2)+n*i),c,new tZ(a-n*o,s-n*i)]},t.prototype.isValid=function(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()},t.prototype.isValidPoint=function(t){var e=tG.round(t.getX()),r=tG.round(t.getY());return this.isValid(e,r)},t.prototype.distancePoint=function(t,e){return tG.distance(t.getX(),t.getY(),e.getX(),e.getY())},t.prototype.distanceResultPoint=function(t,e){return tG.distance(t.getX(),t.getY(),e.getX(),e.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(tt.truncDivision(this.nbLayers-4,8)+1)+15},t}(),t6=function(){function t(){}return t.prototype.decode=function(t,e){void 0===e&&(e=null);var r=null,n=new t3(t.getBlackMatrix()),o=null,i=null;try{var a=n.detectMirror(!1);o=a.getPoints(),this.reportFoundResultPoints(e,o),i=new tW().decode(a)}catch(t){r=t}if(null==i)try{var a=n.detectMirror(!0);o=a.getPoints(),this.reportFoundResultPoints(e,o),i=new tW().decode(a)}catch(t){if(null!=r)throw r;throw t}var s=new tx(i.getText(),i.getRawBytes(),i.getNumBits(),o,tO.AZTEC,Z.currentTimeMillis()),u=i.getByteSegments();null!=u&&s.putMetadata(tR.BYTE_SEGMENTS,u);var c=i.getECLevel();return null!=c&&s.putMetadata(tR.ERROR_CORRECTION_LEVEL,c),s},t.prototype.reportFoundResultPoints=function(t,e){if(null!=t){var r=t.get(tr.NEED_RESULT_POINT_CALLBACK);null!=r&&e.forEach(function(t,e,n){r.foundPossibleResultPoint(t)})}},t.prototype.reset=function(){},t}(),t8=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){t8(function(e){return void 0===e&&(e=500),t.call(this,new t6,e)||this},t)})(tT);var t5=function(){function t(){}return t.prototype.decode=function(t,e){try{return this.doDecode(t,e)}catch(c){if(e&&!0===e.get(tr.TRY_HARDER)&&t.isRotateSupported()){var r=t.rotateCounterClockwise(),n=this.doDecode(r,e),o=n.getResultMetadata(),i=270;null!==o&&!0===o.get(tR.ORIENTATION)&&(i+=o.get(tR.ORIENTATION)%360),n.putMetadata(tR.ORIENTATION,i);var a=n.getResultPoints();if(null!==a)for(var s=r.getHeight(),u=0;u<a.length;u++)a[u]=new tZ(s-a[u].getY()-1,a[u].getX());return n}throw new tp}},t.prototype.reset=function(){},t.prototype.doDecode=function(t,e){var r,n=t.getWidth(),o=t.getHeight(),i=new te(n),a=e&&!0===e.get(tr.TRY_HARDER),s=Math.max(1,o>>(a?8:5));r=a?o:15;for(var u=Math.trunc(o/2),c=0;c<r;c++){var l=Math.trunc((c+1)/2),h=u+s*((1&c)==0?l:-l);if(h<0||h>=o)break;try{i=t.getBlackRow(h,i)}catch(t){continue}for(var d=this,f=0;f<2;f++){var p=function(t){if(1===t&&(i.reverse(),e&&!0===e.get(tr.NEED_RESULT_POINT_CALLBACK))){var r=new Map;e.forEach(function(t,e){return r.set(e,t)}),r.delete(tr.NEED_RESULT_POINT_CALLBACK),e=r}try{var o=d.decodeRow(h,i,e);if(1===t){o.putMetadata(tR.ORIENTATION,180);var a=o.getResultPoints();null!==a&&(a[0]=new tZ(n-a[0].getX()-1,a[0].getY()),a[1]=new tZ(n-a[1].getX()-1,a[1].getY()))}return{value:o}}catch(t){}}(f);if("object"==typeof p)return p.value}}throw new tp},t.recordPattern=function(t,e,r){for(var n=r.length,o=0;o<n;o++)r[o]=0;var i=t.getSize();if(e>=i)throw new tp;for(var a=!t.get(e),s=0,u=e;u<i;){if(t.get(u)!==a)r[s]++;else{if(++s===n)break;r[s]=1,a=!a}u++}if(!(s===n||s===n-1&&u===i))throw new tp},t.recordPatternInReverse=function(e,r,n){for(var o=n.length,i=e.get(r);r>0&&o>=0;)e.get(--r)!==i&&(o--,i=!i);if(o>=0)throw new tp;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(t,e,r){for(var n=t.length,o=0,i=0,a=0;a<n;a++)o+=t[a],i+=e[a];if(o<i)return Number.POSITIVE_INFINITY;var s=o/i;r*=s;for(var u=0,c=0;c<n;c++){var l=t[c],h=e[c]*s,d=l>h?l-h:h-l;if(d>r)return Number.POSITIVE_INFINITY;u+=d}return u/o},t}(),t9=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),t7=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return t9(e,t),e.findStartPattern=function(t){for(var r=t.getSize(),n=t.getNextSet(0),o=0,i=Int32Array.from([0,0,0,0,0,0]),a=n,s=!1,u=n;u<r;u++)if(t.get(u)!==s)i[o]++;else{if(5===o){for(var c=e.MAX_AVG_VARIANCE,l=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var d=t5.patternMatchVariance(i,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);d<c&&(c=d,l=h)}if(l>=0&&t.isRange(Math.max(0,a-(u-a)/2),a,!1))return Int32Array.from([a,u,l]);a+=i[0]+i[1],(i=i.slice(2,i.length))[o-1]=0,i[o]=0,o--}else o++;i[o]=1,s=!s}throw new tp},e.decodeCode=function(t,r,n){t5.recordPattern(t,n,r);for(var o=e.MAX_AVG_VARIANCE,i=-1,a=0;a<e.CODE_PATTERNS.length;a++){var s=e.CODE_PATTERNS[a],u=this.patternMatchVariance(r,s,e.MAX_INDIVIDUAL_VARIANCE);u<o&&(o=u,i=a)}if(i>=0)return i;throw new tp},e.prototype.decodeRow=function(t,r,n){var o,i=n&&!0===n.get(tr.ASSUME_GS1),a=e.findStartPattern(r),s=a[2],u=0,c=new Uint8Array(20);switch(c[u++]=s,s){case e.CODE_START_A:o=e.CODE_CODE_A;break;case e.CODE_START_B:o=e.CODE_CODE_B;break;case e.CODE_START_C:o=e.CODE_CODE_C;break;default:throw new to}for(var l=!1,h=!1,d="",f=a[0],p=a[1],g=Int32Array.from([0,0,0,0,0,0]),y=0,m=0,v=s,w=0,_=!0,C=!1,A=!1;!l;){var E=h;switch(h=!1,y=m,m=e.decodeCode(r,g,p),c[u++]=m,m!==e.CODE_STOP&&(_=!0),m!==e.CODE_STOP&&(v+=++w*m),f=p,p+=g.reduce(function(t,e){return t+e},0),m){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new to}switch(o){case e.CODE_CODE_A:if(m<64)A===C?d+=String.fromCharCode(32+m):d+=String.fromCharCode(32+m+128),A=!1;else if(m<96)A===C?d+=String.fromCharCode(m-64):d+=String.fromCharCode(m+64),A=!1;else switch(m!==e.CODE_STOP&&(_=!1),m){case e.CODE_FNC_1:i&&(0===d.length?d+="]C1":d+="\x1d");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!C&&A?(C=!0,A=!1):C&&A?(C=!1,A=!1):A=!0;break;case e.CODE_SHIFT:h=!0,o=e.CODE_CODE_B;break;case e.CODE_CODE_B:o=e.CODE_CODE_B;break;case e.CODE_CODE_C:o=e.CODE_CODE_C;break;case e.CODE_STOP:l=!0}break;case e.CODE_CODE_B:if(m<96)A===C?d+=String.fromCharCode(32+m):d+=String.fromCharCode(32+m+128),A=!1;else switch(m!==e.CODE_STOP&&(_=!1),m){case e.CODE_FNC_1:i&&(0===d.length?d+="]C1":d+="\x1d");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!C&&A?(C=!0,A=!1):C&&A?(C=!1,A=!1):A=!0;break;case e.CODE_SHIFT:h=!0,o=e.CODE_CODE_A;break;case e.CODE_CODE_A:o=e.CODE_CODE_A;break;case e.CODE_CODE_C:o=e.CODE_CODE_C;break;case e.CODE_STOP:l=!0}break;case e.CODE_CODE_C:if(m<100)m<10&&(d+="0"),d+=m;else switch(m!==e.CODE_STOP&&(_=!1),m){case e.CODE_FNC_1:i&&(0===d.length?d+="]C1":d+="\x1d");break;case e.CODE_CODE_A:o=e.CODE_CODE_A;break;case e.CODE_CODE_B:o=e.CODE_CODE_B;break;case e.CODE_STOP:l=!0}}E&&(o=o===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var I=p-f;if(p=r.getNextUnset(p),!r.isRange(p,Math.min(r.getSize(),p+(p-f)/2),!1))throw new tp;if((v-=w*y)%103!==y)throw new G;var b=d.length;if(0===b)throw new tp;b>0&&_&&(d=o===e.CODE_CODE_C?d.substring(0,b-2):d.substring(0,b-1));for(var S=(a[1]+a[0])/2,N=f+I/2,T=c.length,x=new Uint8Array(T),O=0;O<T;O++)x[O]=c[O];return new tx(d,x,0,[new tZ(S,t),new tZ(N,t)],tO.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(t5),et=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ee=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},er=function(t){function e(e,r){void 0===e&&(e=!1),void 0===r&&(r=!1);var n=t.call(this)||this;return n.usingCheckDigit=e,n.extendedMode=r,n.decodeRowResult="",n.counters=new Int32Array(9),n}return et(e,t),e.prototype.decodeRow=function(t,r,n){var o,i,a,s,u,c,l,h=this.counters;h.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(r,h),f=r.getNextSet(d[1]),p=r.getSize();do{e.recordPattern(r,f,h);var g=e.toNarrowWidePattern(h);if(g<0)throw new tp;u=e.patternToChar(g),this.decodeRowResult+=u,c=f;try{for(var y=(o=void 0,ee(h)),m=y.next();!m.done;m=y.next()){var v=m.value;f+=v}}catch(t){o={error:t}}finally{try{m&&!m.done&&(i=y.return)&&i.call(y)}finally{if(o)throw o.error}}f=r.getNextSet(f)}while("*"!==u);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var w=0;try{for(var _=ee(h),C=_.next();!C.done;C=_.next()){var v=C.value;w+=v}}catch(t){a={error:t}}finally{try{C&&!C.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}var A=f-c-w;if(f!==p&&2*A<w)throw new tp;if(this.usingCheckDigit){for(var E=this.decodeRowResult.length-1,I=0,b=0;b<E;b++)I+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(b));if(this.decodeRowResult.charAt(E)!==e.ALPHABET_STRING.charAt(I%43))throw new G;this.decodeRowResult=this.decodeRowResult.substring(0,E)}if(0===this.decodeRowResult.length)throw new tp;l=this.extendedMode?e.decodeExtended(this.decodeRowResult):this.decodeRowResult;var S=(d[1]+d[0])/2,N=c+w/2;return new tx(l,null,0,[new tZ(S,t),new tZ(N,t)],tO.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var n=t.getSize(),o=t.getNextSet(0),i=0,a=o,s=!1,u=r.length,c=o;c<n;c++)if(t.get(c)!==s)r[i]++;else{if(i===u-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,a-Math.floor((c-a)/2)),a,!1))return[a,c];a+=r[0]+r[1],r.copyWithin(0,2,2+i-1),r[i-1]=0,r[i]=0,i--}else i++;r[i]=1,s=!s}throw new tp},e.toNarrowWidePattern=function(t){var e,r,n,o=t.length,i=0;do{var a=2147483647;try{for(var s=(e=void 0,ee(t)),u=s.next();!u.done;u=s.next()){var c=u.value;c<a&&c>i&&(a=c)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}i=a,n=0;for(var l=0,h=0,d=0;d<o;d++){var c=t[d];c>i&&(h|=1<<o-1-d,n++,l+=c)}if(3===n){for(var d=0;d<o&&n>0;d++){var c=t[d];if(c>i&&(n--,2*c>=l))return -1}return h}}while(n>3);return -1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new tp},e.decodeExtended=function(t){for(var e=t.length,r="",n=0;n<e;n++){var o=t.charAt(n);if("+"===o||"$"===o||"%"===o||"/"===o){var i=t.charAt(n+1),a="\x00";switch(o){case"+":if(i>="A"&&i<="Z")a=String.fromCharCode(i.charCodeAt(0)+32);else throw new to;break;case"$":if(i>="A"&&i<="Z")a=String.fromCharCode(i.charCodeAt(0)-64);else throw new to;break;case"%":if(i>="A"&&i<="E")a=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")a=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")a=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)a="\x00";else if("V"===i)a="@";else if("W"===i)a="`";else if("X"===i||"Y"===i||"Z"===i)a="\x7f";else throw new to;break;case"/":if(i>="A"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)-32);else if("Z"===i)a=":";else throw new to}r+=a,n++}else r+=o}return r},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(t5),en=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eo=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ei=function(t){function e(){var e=t.call(this)||this;return e.decodeRowResult="",e.counters=new Int32Array(6),e}return en(e,t),e.prototype.decodeRow=function(t,r,n){var o,i,a,s,u,c,l=this.findAsteriskPattern(r),h=r.getNextSet(l[1]),d=r.getSize(),f=this.counters;f.fill(0),this.decodeRowResult="";do{e.recordPattern(r,h,f);var p=this.toPattern(f);if(p<0)throw new tp;u=this.patternToChar(p),this.decodeRowResult+=u,c=h;try{for(var g=(o=void 0,eo(f)),y=g.next();!y.done;y=g.next()){var m=y.value;h+=m}}catch(t){o={error:t}}finally{try{y&&!y.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}h=r.getNextSet(h)}while("*"!==u);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var v=0;try{for(var w=eo(f),_=w.next();!_.done;_=w.next()){var m=_.value;v+=m}}catch(t){a={error:t}}finally{try{_&&!_.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}if(h===d||!r.get(h)||this.decodeRowResult.length<2)throw new tp;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var C=this.decodeExtended(this.decodeRowResult),A=(l[1]+l[0])/2,E=c+v/2;return new tx(C,null,0,[new tZ(A,t),new tZ(E,t)],tO.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),n=t.getNextSet(0);this.counters.fill(0);for(var o=this.counters,i=n,a=!1,s=o.length,u=0,c=n;c<r;c++)if(t.get(c)!==a)o[u]++;else{if(u===s-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([i,c]);i+=o[0]+o[1],o.copyWithin(0,2,2+u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,a=!a}throw new tp},e.prototype.toPattern=function(t){var e,r,n=0;try{for(var o=eo(t),i=o.next();!i.done;i=o.next()){var a=i.value;n+=a}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}for(var s=0,u=t.length,c=0;c<u;c++){var l=Math.round(9*t[c]/n);if(l<1||l>4)return -1;if((1&c)==0)for(var h=0;h<l;h++)s=s<<1|1;else s<<=l}return s},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new tp},e.prototype.decodeExtended=function(t){for(var e=t.length,r="",n=0;n<e;n++){var o=t.charAt(n);if(o>="a"&&o<="d"){if(n>=e-1)throw new to;var i=t.charAt(n+1),a="\x00";switch(o){case"d":if(i>="A"&&i<="Z")a=String.fromCharCode(i.charCodeAt(0)+32);else throw new to;break;case"a":if(i>="A"&&i<="Z")a=String.fromCharCode(i.charCodeAt(0)-64);else throw new to;break;case"b":if(i>="A"&&i<="E")a=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")a=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")a=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)a="\x00";else if("V"===i)a="@";else if("W"===i)a="`";else if(i>="X"&&i<="Z")a="\x7f";else throw new to;break;case"c":if(i>="A"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)-32);else if("Z"===i)a=":";else throw new to}r+=a,n++}else r+=o}return r},e.prototype.checkChecksums=function(t){var e=t.length;this.checkOneChecksum(t,e-2,20),this.checkOneChecksum(t,e-1,15)},e.prototype.checkOneChecksum=function(t,r,n){for(var o=1,i=0,a=r-1;a>=0;a--)i+=o*e.ALPHABET_STRING.indexOf(t.charAt(a)),++o>n&&(o=1);if(t.charAt(r)!==e.ALPHABET_STRING[i%47])throw new G},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(t5),ea=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),es=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eu=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.narrowLineWidth=-1,e}return ea(e,t),e.prototype.decodeRow=function(t,r,n){var o,i,a=this.decodeStart(r),s=this.decodeEnd(r),u=new th;e.decodeMiddle(r,a[1],s[0],u);var c=u.toString(),l=null;null!=n&&(l=n.get(tr.ALLOWED_LENGTHS)),null==l&&(l=e.DEFAULT_ALLOWED_LENGTHS);var h=c.length,d=!1,f=0;try{for(var p=es(l),g=p.next();!g.done;g=p.next()){var y=g.value;if(h===y){d=!0;break}y>f&&(f=y)}}catch(t){o={error:t}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}if(!d&&h>f&&(d=!0),!d)throw new to;return new tx(c,null,0,[new tZ(a[1],t),new tZ(s[0],t)],tO.ITF,new Date().getTime())},e.decodeMiddle=function(t,r,n,o){var i=new Int32Array(10),a=new Int32Array(5),s=new Int32Array(5);for(i.fill(0),a.fill(0),s.fill(0);r<n;){t5.recordPattern(t,r,i);for(var u=0;u<5;u++){var c=2*u;a[u]=i[c],s[u]=i[c+1]}var l=e.decodeDigit(a);o.append(l.toString()),l=this.decodeDigit(s),o.append(l.toString()),i.forEach(function(t){r+=t})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),n=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(t,n[0]),n},e.prototype.validateQuietZone=function(t,e){var r=10*this.narrowLineWidth;r=r<e?r:e;for(var n=e-1;r>0&&n>=0&&!t.get(n);n--)r--;if(0!==r)throw new tp},e.skipWhiteSpace=function(t){var e=t.getSize(),r=t.getNextSet(0);if(r===e)throw new tp;return r},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),n=void 0;try{n=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof tp&&(n=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,n[0]);var o=n[0];return n[0]=t.getSize()-n[1],n[1]=t.getSize()-o,n}finally{t.reverse()}},e.findGuardPattern=function(t,r,n){var o=n.length,i=new Int32Array(o),a=t.getSize(),s=!1,u=0,c=r;i.fill(0);for(var l=r;l<a;l++)if(t.get(l)!==s)i[u]++;else{if(u===o-1){if(t5.patternMatchVariance(i,n,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[c,l];c+=i[0]+i[1],Z.arraycopy(i,2,i,0,u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,s=!s}throw new tp},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,n=-1,o=e.PATTERNS.length,i=0;i<o;i++){var a=e.PATTERNS[i],s=t5.patternMatchVariance(t,a,e.MAX_INDIVIDUAL_VARIANCE);s<r?(r=s,n=i):s===r&&(n=-1)}if(n>=0)return n%10;throw new tp},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(t5),ec=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),el=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.decodeRowStringBuffer="",e}return ec(e,t),e.findStartGuardPattern=function(t){for(var r,n=!1,o=0,i=Int32Array.from([0,0,0]);!n;){i=Int32Array.from([0,0,0]);var a=(r=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,i))[0],s=a-((o=r[1])-a);s>=0&&(n=t.isRange(s,a,!1))}return r},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(0===r)return!1;var n=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===n},e.getStandardUPCEANChecksum=function(t){for(var e=t.length,r=0,n=e-1;n>=0;n-=2){var o=t.charAt(n).charCodeAt(0)-48;if(o<0||o>9)throw new to;r+=o}r*=3;for(var n=e-2;n>=0;n-=2){var o=t.charAt(n).charCodeAt(0)-48;if(o<0||o>9)throw new to;r+=o}return(1e3-r)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,e,r,n){return this.findGuardPattern(t,e,r,n,new Int32Array(n.length))},e.findGuardPattern=function(t,r,n,o,i){var a=t.getSize();r=n?t.getNextUnset(r):t.getNextSet(r);for(var s=0,u=r,c=o.length,l=n,h=r;h<a;h++)if(t.get(h)!==l)i[s]++;else{if(s===c-1){if(t5.patternMatchVariance(i,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,h]);u+=i[0]+i[1];for(var d=i.slice(2,i.length),f=0;f<s-1;f++)i[f]=d[f];i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,l=!l}throw new tp},e.decodeDigit=function(t,r,n,o){this.recordPattern(t,n,r);for(var i=this.MAX_AVG_VARIANCE,a=-1,s=o.length,u=0;u<s;u++){var c=o[u],l=t5.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);l<i&&(i=l,a=u)}if(a>=0)return a;throw new tp},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(t5),eh=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ed=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var o=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,o),a=o.toString(),s=t.parseExtensionString(a),u=new tx(a,null,0,[new tZ((n[0]+n[1])/2,e),new tZ(i,e)],tO.UPC_EAN_EXTENSION,new Date().getTime());return null!=s&&u.putAllMetadata(s),u},t.prototype.decodeMiddle=function(e,r,n){var o,i,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),u=r[1],c=0,l=0;l<5&&u<s;l++){var h=el.decodeDigit(e,a,u,el.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);try{for(var d=(o=void 0,eh(a)),f=d.next();!f.done;f=d.next()){var p=f.value;u+=p}}catch(t){o={error:t}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}h>=10&&(c|=1<<4-l),4!==l&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(5!==n.length)throw new tp;var g=this.determineCheckDigit(c);if(t.extensionChecksum(n.toString())!==g)throw new tp;return u},t.extensionChecksum=function(t){for(var e=t.length,r=0,n=e-2;n>=0;n-=2)r+=t.charAt(n).charCodeAt(0)-48;r*=3;for(var n=e-1;n>=0;n-=2)r+=t.charAt(n).charCodeAt(0)-48;return(r*=3)%10},t.prototype.determineCheckDigit=function(t){for(var e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new tp},t.parseExtensionString=function(e){if(5!==e.length)return null;var r=t.parseExtension5String(e);return null==r?null:new Map([[tR.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(t){switch(t.charAt(0)){case"0":e="\xa3";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e=""}var e,r=parseInt(t.substring(1)),n=(r/100).toString(),o=r%100;return e+n+"."+(o<10?"0"+o:o.toString())},t}(),ef=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ep=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var o=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,o),a=o.toString(),s=t.parseExtensionString(a),u=new tx(a,null,0,[new tZ((n[0]+n[1])/2,e),new tZ(i,e)],tO.UPC_EAN_EXTENSION,new Date().getTime());return null!=s&&u.putAllMetadata(s),u},t.prototype.decodeMiddle=function(t,e,r){var n,o,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),s=e[1],u=0,c=0;c<2&&s<a;c++){var l=el.decodeDigit(t,i,s,el.L_AND_G_PATTERNS);r+=String.fromCharCode(48+l%10);try{for(var h=(n=void 0,ef(i)),d=h.next();!d.done;d=h.next()){var f=d.value;s+=f}}catch(t){n={error:t}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}l>=10&&(u|=1<<1-c),1!==c&&(s=t.getNextSet(s),s=t.getNextUnset(s))}if(2!==r.length||parseInt(r.toString())%4!==u)throw new tp;return s},t.parseExtensionString=function(t){return 2!==t.length?null:new Map([[tR.ISSUE_NUMBER,parseInt(t)]])},t}(),eg=function(){function t(){}return t.decodeRow=function(t,e,r){var n=el.findGuardPattern(e,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ed().decodeRow(t,e,n)}catch(r){return new ep().decodeRow(t,e,n)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),ey=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),em=function(t){function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(t){return Int32Array.from(t)});for(var n=10;n<20;n++){for(var o=e.L_PATTERNS[n-10],i=new Int32Array(o.length),a=0;a<o.length;a++)i[a]=o[o.length-a-1];e.L_AND_G_PATTERNS[n]=i}return r}return ey(e,t),e.prototype.decodeRow=function(t,r,n){var o=e.findStartGuardPattern(r),i=null==n?null:n.get(tr.NEED_RESULT_POINT_CALLBACK);if(null!=i){var a=new tZ((o[0]+o[1])/2,t);i.foundPossibleResultPoint(a)}var s=this.decodeMiddle(r,o,this.decodeRowStringBuffer),u=s.rowOffset,c=s.resultString;if(null!=i){var l=new tZ(u,t);i.foundPossibleResultPoint(l)}var h=e.decodeEnd(r,u);if(null!=i){var d=new tZ((h[0]+h[1])/2,t);i.foundPossibleResultPoint(d)}var f=h[1],p=f+(f-h[0]);if(p>=r.getSize()||!r.isRange(f,p,!1))throw new tp;var g=c.toString();if(g.length<8)throw new to;if(!e.checkChecksum(g))throw new G;var y=(o[1]+o[0])/2,m=(h[1]+h[0])/2,v=this.getBarcodeFormat(),w=new tx(g,null,0,[new tZ(y,t),new tZ(m,t)],v,new Date().getTime()),_=0;try{var C=eg.decodeRow(t,r,h[1]);w.putMetadata(tR.UPC_EAN_EXTENSION,C.getText()),w.putAllMetadata(C.getResultMetadata()),w.addResultPoints(C.getResultPoints()),_=C.getText().length}catch(t){}var A=null==n?null:n.get(tr.ALLOWED_EAN_EXTENSIONS);if(null!=A){var E=!1;for(var I in A)if(_.toString()===I){E=!0;break}if(!E)throw new tp}return v===tO.EAN_13||tO.UPC_A,w},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(0===r)return!1;var n=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===n},e.getStandardUPCEANChecksum=function(t){for(var e=t.length,r=0,n=e-1;n>=0;n-=2){var o=t.charAt(n).charCodeAt(0)-48;if(o<0||o>9)throw new to;r+=o}r*=3;for(var n=e-2;n>=0;n-=2){var o=t.charAt(n).charCodeAt(0)-48;if(o<0||o>9)throw new to;r+=o}return(1e3-r)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(el),ev=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ew=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},e_=function(t){function e(){var e=t.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return ev(e,t),e.prototype.decodeMiddle=function(t,r,n){var o,i,a,s,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=t.getSize(),l=r[1],h=0,d=0;d<6&&l<c;d++){var f=em.decodeDigit(t,u,l,em.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var p=(o=void 0,ew(u)),g=p.next();!g.done;g=p.next()){var y=g.value;l+=y}}catch(t){o={error:t}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}f>=10&&(h|=1<<5-d)}n=e.determineFirstDigit(n,h),l=em.findGuardPattern(t,l,!0,em.MIDDLE_PATTERN,new Int32Array(em.MIDDLE_PATTERN.length).fill(0))[1];for(var d=0;d<6&&l<c;d++){var f=em.decodeDigit(t,u,l,em.L_PATTERNS);n+=String.fromCharCode(48+f);try{for(var m=(a=void 0,ew(u)),v=m.next();!v.done;v=m.next()){var y=v.value;l+=y}}catch(t){a={error:t}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}}return{rowOffset:l,resultString:n}},e.prototype.getBarcodeFormat=function(){return tO.EAN_13},e.determineFirstDigit=function(t,e){for(var r=0;r<10;r++)if(e===this.FIRST_DIGIT_ENCODINGS[r])return t=String.fromCharCode(48+r)+t;throw new tp},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(em),eC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eA=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eE=function(t){function e(){var e=t.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return eC(e,t),e.prototype.decodeMiddle=function(t,e,r){var n,o,i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var u=t.getSize(),c=e[1],l=0;l<4&&c<u;l++){var h=em.decodeDigit(t,s,c,em.L_PATTERNS);r+=String.fromCharCode(48+h);try{for(var d=(n=void 0,eA(s)),f=d.next();!f.done;f=d.next()){var p=f.value;c+=p}}catch(t){n={error:t}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}}c=em.findGuardPattern(t,c,!0,em.MIDDLE_PATTERN,new Int32Array(em.MIDDLE_PATTERN.length).fill(0))[1];for(var l=0;l<4&&c<u;l++){var h=em.decodeDigit(t,s,c,em.L_PATTERNS);r+=String.fromCharCode(48+h);try{for(var g=(i=void 0,eA(s)),y=g.next();!y.done;y=g.next()){var p=y.value;c+=p}}catch(t){i={error:t}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return{rowOffset:c,resultString:r}},e.prototype.getBarcodeFormat=function(){return tO.EAN_8},e}(em),eI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ean13Reader=new e_,e}return eI(e,t),e.prototype.getBarcodeFormat=function(){return tO.UPC_A},e.prototype.decode=function(t,e){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,e,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,e,r))},e.prototype.decodeMiddle=function(t,e,r){return this.ean13Reader.decodeMiddle(t,e,r)},e.prototype.maybeReturnResult=function(t){var e=t.getText();if("0"===e.charAt(0)){var r=new tx(e.substring(1),null,null,t.getResultPoints(),tO.UPC_A);return null!=t.getResultMetadata()&&r.putAllMetadata(t.getResultMetadata()),r}throw new tp},e.prototype.reset=function(){this.ean13Reader.reset()},e}(em),eS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eN=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eT=function(t){function e(){var e=t.call(this)||this;return e.decodeMiddleCounters=new Int32Array(4),e}return eS(e,t),e.prototype.decodeMiddle=function(t,r,n){var o,i,a=this.decodeMiddleCounters.map(function(t){return t});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=t.getSize(),u=r[1],c=0,l=0;l<6&&u<s;l++){var h=e.decodeDigit(t,a,u,e.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);try{for(var d=(o=void 0,eN(a)),f=d.next();!f.done;f=d.next()){var p=f.value;u+=p}}catch(t){o={error:t}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}h>=10&&(c|=1<<5-l)}return e.determineNumSysAndCheckDigit(new th(n),c),u},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return em.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,e){for(var r=0;r<=1;r++)for(var n=0;n<10;n++)if(e===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][n]){t.insert(0,"0"+r),t.append("0"+n);return}throw tp.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return tO.UPC_E},e.convertUPCEtoUPCA=function(t){var e=t.slice(1,7).split("").map(function(t){return t.charCodeAt(0)}),r=new th;r.append(t.charAt(0));var n=e[5];switch(n){case 0:case 1:case 2:r.appendChars(e,0,2),r.append(n),r.append("0000"),r.appendChars(e,2,3);break;case 3:r.appendChars(e,0,3),r.append("00000"),r.appendChars(e,3,2);break;case 4:r.appendChars(e,0,4),r.append("00000"),r.append(e[4]);break;default:r.appendChars(e,0,5),r.append("0000"),r.append(n)}return t.length>=8&&r.append(t.charAt(7)),r.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(em),ex=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eO=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eR=function(t){function e(e){var r=t.call(this)||this,n=null==e?null:e.get(tr.POSSIBLE_FORMATS),o=[];return null!=n&&(n.indexOf(tO.EAN_13)>-1&&o.push(new e_),n.indexOf(tO.UPC_A)>-1&&o.push(new eb),n.indexOf(tO.EAN_8)>-1&&o.push(new eE),n.indexOf(tO.UPC_E)>-1&&o.push(new eT)),0===o.length&&(o.push(new e_),o.push(new eb),o.push(new eE),o.push(new eT)),r.readers=o,r}return ex(e,t),e.prototype.decodeRow=function(t,e,r){var n,o;try{for(var i=eO(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{var u=s.decodeRow(t,e,r),c=u.getBarcodeFormat()===tO.EAN_13&&"0"===u.getText().charAt(0),l=null==r?null:r.get(tr.POSSIBLE_FORMATS),h=null==l||l.includes(tO.UPC_A);if(c&&h){var d=u.getRawBytes(),f=new tx(u.getText().substring(1),d,d?d.length:null,u.getResultPoints(),tO.UPC_A);return f.putAllMetadata(u.getResultMetadata()),f}return u}catch(t){}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}throw new tp},e.prototype.reset=function(){var t,e;try{for(var r=eO(this.readers),n=r.next();!n.done;n=r.next())n.value.reset()}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},e}(t5),eD=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eM=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},e}return eD(e,t),e.prototype.decodeRow=function(t,e,r){var n=this.getValidRowData(e);if(!n)throw new tp;var o=this.codaBarDecodeRow(n.row);if(!o)throw new tp;return new tx(o,null,0,[new tZ(n.left,t),new tZ(n.right,t)],tO.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var e=t.toArray(),r=e.indexOf(!0);if(-1===r)return null;var n=e.lastIndexOf(!0);if(n<=r)return null;e=e.slice(r,n+1);for(var o=[],i=e[0],a=1,s=1;s<e.length;s++)e[s]===i?a++:(i=e[s],o.push(a),a=1);return(o.push(a),o.length<23&&(o.length+1)%8!=0)?null:{row:o,left:r,right:n}},e.prototype.codaBarDecodeRow=function(t){for(var e=[],r=Math.ceil(t.reduce(function(t,e){return(t+e)/2},0));t.length>0;){var n=t.splice(0,8).splice(0,7).map(function(t){return t<r?"n":"w"}).join("");if(void 0===this.CODA_BAR_CHAR_SET[n])return null;e.push(this.CODA_BAR_CHAR_SET[n])}var o=e.join("");return this.validCodaBarString(o)?o:null},e.prototype.validCodaBarString=function(t){return/^[A-D].{1,}[A-D]$/.test(t)},e}(t5),eP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eB=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ek=function(t){function e(){var e=t.call(this)||this;return e.decodeFinderCounters=new Int32Array(4),e.dataCharacterCounters=new Int32Array(8),e.oddRoundingErrors=[,,,,],e.evenRoundingErrors=[,,,,],e.oddCounts=Array(e.dataCharacterCounters.length/2),e.evenCounts=Array(e.dataCharacterCounters.length/2),e}return eP(e,t),e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var n=0;n<r.length;n++)if(t5.patternMatchVariance(t,r[n],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return n;throw new tp},e.count=function(t){return tG.sum(new Int32Array(t))},e.increment=function(t,e){for(var r=0,n=e[0],o=1;o<t.length;o++)e[o]>n&&(n=e[o],r=o);t[r]++},e.decrement=function(t,e){for(var r=0,n=e[0],o=1;o<t.length;o++)e[o]<n&&(n=e[o],r=o);t[r]--},e.isFinderPattern=function(t){var r,n,o=t[0]+t[1],i=o+t[2]+t[3],a=o/i;if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var s=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var c=eB(t),l=c.next();!l.done;l=c.next()){var h=l.value;h>u&&(u=h),h<s&&(s=h)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return u<10*s}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(t5),eL=function(){function t(t,e){this.value=t,this.checksumPortion=e}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){return e instanceof t&&this.value===e.value&&this.checksumPortion===e.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),eF=function(){function t(t,e,r,n,o){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=[],this.resultPoints.push(new tZ(r,o)),this.resultPoints.push(new tZ(n,o))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){return e instanceof t&&this.value===e.value},t.prototype.hashCode=function(){return this.value},t}(),ej=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eV=function(){function t(){}return t.getRSSvalue=function(e,r,n){var o,i,a=0;try{for(var s=ej(e),u=s.next();!u.done;u=s.next()){var c=u.value;a+=c}}catch(t){o={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}for(var l=0,h=0,d=e.length,f=0;f<d-1;f++){var p=void 0;for(p=1,h|=1<<f;p<e[f];p++,h&=~(1<<f)){var g=t.combins(a-p-1,d-f-2);if(n&&0===h&&a-p-(d-f-1)>=d-f-1&&(g-=t.combins(a-p-(d-f),d-f-2)),d-f-1>1){for(var y=0,m=a-p-(d-f-2);m>r;m--)y+=t.combins(a-p-m-1,d-f-3);g-=y*(d-1-f)}else a-p>r&&g--;l+=g}a-=p}return l},t.combins=function(t,e){t-e>e?(n=e,r=t-e):(n=t-e,r=e);for(var r,n,o=1,i=1,a=t;a>r;a--)o*=a,i<=n&&(o/=i,i++);for(;i<=n;)o/=i,i++;return o},t}(),eU=function(){function t(){}return t.buildBitArray=function(t){var e=2*t.length-1;null==t[t.length-1].getRightChar()&&(e-=1);for(var r=new te(12*e),n=0,o=t[0].getRightChar().getValue(),i=11;i>=0;--i)(o&1<<i)!=0&&r.set(n),n++;for(var i=1;i<t.length;++i){for(var a=t[i],s=a.getLeftChar().getValue(),u=11;u>=0;--u)(s&1<<u)!=0&&r.set(n),n++;if(null!==a.getRightChar())for(var c=a.getRightChar().getValue(),u=11;u>=0;--u)(c&1<<u)!=0&&r.set(n),n++}return r},t}(),eH=function(){function t(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),eX=function(){function t(t){this.newPosition=t}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),eW=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eG=function(t){function e(e,r){var n=t.call(this,e)||this;return n.value=r,n}return eW(e,t),e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(eX),ez=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eZ=function(t){function e(e,r,n){var o=t.call(this,e)||this;return n?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return ez(e,t),e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(eX),eY=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eK=function(t){function e(e,r,n){var o=t.call(this,e)||this;if(r<0||r>10||n<0||n>10)throw new to;return o.firstDigit=r,o.secondDigit=n,o}return eY(e,t),e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(eX),e$=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eq=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){if(!e)return null;if(e.length<2)throw new tp;var r,n,o,i,a,s,u,c,l=e.substring(0,2);try{for(var h=e$(t.TWO_DIGIT_DATA_LENGTH),d=h.next();!d.done;d=h.next()){var f=d.value;if(f[0]===l){if(f[1]===t.VARIABLE_LENGTH)return t.processVariableAI(2,f[2],e);return t.processFixedAI(2,f[1],e)}}}catch(t){r={error:t}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}if(e.length<3)throw new tp;var p=e.substring(0,3);try{for(var g=e$(t.THREE_DIGIT_DATA_LENGTH),y=g.next();!y.done;y=g.next()){var f=y.value;if(f[0]===p){if(f[1]===t.VARIABLE_LENGTH)return t.processVariableAI(3,f[2],e);return t.processFixedAI(3,f[1],e)}}}catch(t){o={error:t}}finally{try{y&&!y.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}try{for(var m=e$(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),v=m.next();!v.done;v=m.next()){var f=v.value;if(f[0]===p){if(f[1]===t.VARIABLE_LENGTH)return t.processVariableAI(4,f[2],e);return t.processFixedAI(4,f[1],e)}}}catch(t){a={error:t}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(e.length<4)throw new tp;var w=e.substring(0,4);try{for(var _=e$(t.FOUR_DIGIT_DATA_LENGTH),C=_.next();!C.done;C=_.next()){var f=C.value;if(f[0]===w){if(f[1]===t.VARIABLE_LENGTH)return t.processVariableAI(4,f[2],e);return t.processFixedAI(4,f[1],e)}}}catch(t){u={error:t}}finally{try{C&&!C.done&&(c=_.return)&&c.call(_)}finally{if(u)throw u.error}}throw new tp},t.processFixedAI=function(e,r,n){if(n.length<e)throw new tp;var o=n.substring(0,e);if(n.length<e+r)throw new tp;var i=n.substring(e,e+r),a=n.substring(e+r),s="("+o+")"+i,u=t.parseFieldsInGeneralPurpose(a);return null==u?s:s+u},t.processVariableAI=function(e,r,n){var o,i=n.substring(0,e);o=n.length<e+r?n.length:e+r;var a=n.substring(e,o),s=n.substring(o),u="("+i+")"+a,c=t.parseFieldsInGeneralPurpose(s);return null==c?u:u+c},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),eJ=function(){function t(t){this.buffer=new th,this.information=t}return t.prototype.decodeAllCodes=function(t,e){for(var r=e,n=null;;){var o=this.decodeGeneralPurposeField(r,n),i=eq.parseFieldsInGeneralPurpose(o.getNewString());if(null!=i&&t.append(i),n=o.isRemaining()?""+o.getRemainingValue():null,r===o.getNewPosition())break;r=o.getNewPosition()}return t.toString()},t.prototype.isStillNumeric=function(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(var e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)},t.prototype.decodeNumeric=function(t){if(t+7>this.information.getSize()){var e=this.extractNumericValueFromBitArray(t,4);return 0===e?new eK(this.information.getSize(),eK.FNC1,eK.FNC1):new eK(this.information.getSize(),e-1,eK.FNC1)}var r=this.extractNumericValueFromBitArray(t,7);return new eK(t+7,(r-8)/11,(r-8)%11)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(t,e,r){for(var n=0,o=0;o<r;++o)t.get(e+o)&&(n|=1<<r-o-1);return n},t.prototype.decodeGeneralPurposeField=function(t,e){this.buffer.setLengthToZero(),null!=e&&this.buffer.append(e),this.current.setPosition(t);var r=this.parseBlocks();return null!=r&&r.isRemaining()?new eZ(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new eZ(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){do{var t,e,r=this.current.getPosition();if(t=this.current.isAlpha()?(e=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(e=this.parseIsoIec646Block()).isFinished():(e=this.parseNumericBlock()).isFinished(),!(r!==this.current.getPosition())&&!t)break}while(!t);return e.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){var e=void 0;return new eH(!0,e=t.isSecondDigitFNC1()?new eZ(this.current.getPosition(),this.buffer.toString()):new eZ(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()))}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){var e=new eZ(this.current.getPosition(),this.buffer.toString());return new eH(!0,e)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new eH(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1())return new eH(!0,new eZ(this.current.getPosition(),this.buffer.toString()));this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new eH(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1())return new eH(!0,new eZ(this.current.getPosition(),this.buffer.toString()));this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new eH(!1)},t.prototype.isStillIsoIec646=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(t,8);return n>=232&&n<253},t.prototype.decodeIsoIec646=function(t){var e,r=this.extractNumericValueFromBitArray(t,5);if(15===r)return new eG(t+5,eG.FNC1);if(r>=5&&r<15)return new eG(t+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(t,7);if(n>=64&&n<90)return new eG(t+7,""+(n+1));if(n>=90&&n<116)return new eG(t+7,""+(n+7));switch(this.extractNumericValueFromBitArray(t,8)){case 232:e="!";break;case 233:e='"';break;case 234:e="%";break;case 235:e="&";break;case 236:e="'";break;case 237:e="(";break;case 238:e=")";break;case 239:e="*";break;case 240:e="+";break;case 241:e=",";break;case 242:e="-";break;case 243:e=".";break;case 244:e="/";break;case 245:e=":";break;case 246:e=";";break;case 247:e="<";break;case 248:e="=";break;case 249:e=">";break;case 250:e="?";break;case 251:e="_";break;case 252:e=" ";break;default:throw new to}return new eG(t+8,e)},t.prototype.isStillAlpha=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63},t.prototype.decodeAlphanumeric=function(t){var e,r=this.extractNumericValueFromBitArray(t,5);if(15===r)return new eG(t+5,eG.FNC1);if(r>=5&&r<15)return new eG(t+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(t,6);if(n>=32&&n<58)return new eG(t+6,""+(n+33));switch(n){case 58:e="*";break;case 59:e=",";break;case 60:e="-";break;case 61:e=".";break;case 62:e="/";break;default:throw new tH("Decoding invalid alphanumeric value: "+n)}return new eG(t+6,e)},t.prototype.isAlphaTo646ToAlphaLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<5&&e+t<this.information.getSize();++e)if(2===e){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(t){if(t+3>this.information.getSize())return!1;for(var e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0},t}(),eQ=function(){function t(t){this.information=t,this.generalDecoder=new eJ(t)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),e1=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),e0=function(t){function e(e){return t.call(this,e)||this}return e1(e,t),e.prototype.encodeCompressedGtin=function(t,e){t.append("(01)");var r=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,e,r)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,n){for(var o=0;o<4;++o){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);i/100==0&&t.append("0"),i/10==0&&t.append("0"),t.append(i)}e.appendCheckDigit(t,n)},e.appendCheckDigit=function(t,e){for(var r=0,n=0;n<13;n++){var o=t.charAt(n+e).charCodeAt(0)-48;r+=(1&n)==0?3*o:o}10==(r=10-r%10)&&(r=0),t.append(r)},e.GTIN_SIZE=40,e}(eQ),e2=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),e4=function(t){function e(e){return t.call(this,e)||this}return e2(e,t),e.prototype.parseInformation=function(){var t=new th;t.append("(01)");var r=t.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(n),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(e0),e3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),e6=function(t){function e(e){return t.call(this,e)||this}return e3(e,t),e.prototype.parseInformation=function(){var t=new th;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(eQ),e8=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),e5=function(t){function e(e){return t.call(this,e)||this}return e8(e,t),e.prototype.encodeCompressedWeight=function(t,e,r){var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e,r);this.addWeightCode(t,n);for(var o=this.checkWeight(n),i=1e5,a=0;a<5;++a)o/i==0&&t.append("0"),i/=10;t.append(o)},e}(e0),e9=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),e7=function(t){function e(e){return t.call(this,e)||this}return e9(e,t),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e5.GTIN_SIZE+e.WEIGHT_SIZE)throw new tp;var t=new th;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e5.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(e5),rt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),re=function(t){function e(e){return t.call(this,e)||this}return rt(e,t),e.prototype.addWeightCode=function(t,e){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(e7),rr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rn=function(t){function e(e){return t.call(this,e)||this}return rr(e,t),e.prototype.addWeightCode=function(t,e){e<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(e7),ro=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ri=function(t){function e(e){return t.call(this,e)||this}return ro(e,t),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+e0.GTIN_SIZE)throw new tp;var t=new th;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+e0.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var n=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+e0.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(n.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(e0),ra=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rs=function(t){function e(e){return t.call(this,e)||this}return ra(e,t),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+e0.GTIN_SIZE)throw new tp;var t=new th;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+e0.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+e0.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);n/100==0&&t.append("0"),n/10==0&&t.append("0"),t.append(n);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+e0.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(e0),ru=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rc=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.dateCode=n,o.firstAIdigits=r,o}return ru(e,t),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new tp;var t=new th;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var n=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(38400!==n){t.append("("),t.append(this.dateCode),t.append(")");var o=n%32,i=(n/=32)%12+1,a=n/=12;a/10==0&&t.append("0"),t.append(a),i/10==0&&t.append("0"),t.append(i),o/10==0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,e){t.append("("),t.append(this.firstAIdigits),t.append(e/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(e5),rl=function(){function t(t,e,r,n){this.leftchar=t,this.rightchar=e,this.finderpattern=r,this.maybeLast=n}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return null==this.rightchar},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t&&t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern)},t.equalsOrNull=function(e,r){return null===e?null===r:t.equals(e,r)},t.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},t}(),rh=function(){function t(t,e,r){this.pairs=t,this.rowNumber=e,this.wasReversed=r}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(t){return this.checkEqualitity(this,t)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t&&this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed},t.prototype.checkEqualitity=function(t,e){var r;if(t&&e)return t.forEach(function(t,n){e.forEach(function(e){t.getLeftChar().getValue()===e.getLeftChar().getValue()&&t.getRightChar().getValue()===e.getRightChar().getValue()&&t.getFinderPatter().getValue()===e.getFinderPatter().getValue()&&(r=!0)})}),r},t}(),rd=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rf=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rp=function(t){function e(){var r=null!==t&&t.apply(this,arguments)||this;return r.pairs=Array(e.MAX_PAIRS),r.rows=[],r.startEnd=[2],r}return rd(e,t),e.prototype.decodeRow=function(t,r,n){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch(t){}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,e){for(var r,n=!1;!n;)try{this.pairs.push(this.retrieveNextPair(e,this.pairs,t))}catch(t){if(t instanceof tp){if(!this.pairs.length)throw new tp;n=!0}}if(this.checkChecksum())return this.pairs;if(r=!!this.rows.length,this.storeRow(t,!1),r){var o=this.checkRowsBoolean(!1);if(null!=o||null!=(o=this.checkRowsBoolean(!0)))return o}throw new tp},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var e=null;try{e=this.checkRows([],0)}catch(t){console.log(t)}return t&&(this.rows=this.rows.reverse()),e},e.prototype.checkRows=function(t,r){for(var n,o,i=r;i<this.rows.length;i++){var a=this.rows[i];this.pairs.length=0;try{for(var s=(n=void 0,rf(t)),u=s.next();!u.done;u=s.next()){var c=u.value;this.pairs.push(c.getPairs())}}catch(t){n={error:t}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}if(this.pairs.push(a.getPairs()),e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var l=Array(t);l.push(a);try{return this.checkRows(l,i+1)}catch(t){console.log(t)}}}throw new tp},e.isValidSequence=function(t){var r,n;try{for(var o=rf(e.FINDER_PATTERN_SEQUENCES),i=o.next();!i.done;i=o.next()){var a=i.value;if(!(t.length>a.length)){for(var s=!0,u=0;u<t.length;u++)if(t[u].getFinderPattern().getValue()!==a[u]){s=!1;break}if(s)return!0}}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var n=0,o=!1,i=!1;n<this.rows.length;){var a=this.rows[n];if(a.getRowNumber()>t){i=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),n++}i||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new rh(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,e){var r,n,o,i,a,s;try{for(var u=rf(e),c=u.next();!c.done;c=u.next()){var l=c.value;if(l.getPairs().length!==t.length)try{for(var h=(o=void 0,rf(l.getPairs())),d=h.next();!d.done;d=h.next()){var f=d.value;try{for(var p=(a=void 0,rf(t)),g=p.next();!g.done;g=p.next()){var y=g.value;if(rl.equals(f,y))break}}catch(t){a={error:t}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}}}catch(t){o={error:t}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}}}catch(t){r={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}},e.isPartialRow=function(t,e){var r,n,o,i,a,s;try{for(var u=rf(e),c=u.next();!c.done;c=u.next()){var l=c.value,h=!0;try{for(var d=(o=void 0,rf(t)),f=d.next();!f.done;f=d.next()){var p=f.value,g=!1;try{for(var y=(a=void 0,rf(l.getPairs())),m=y.next();!m.done;m=y.next()){var v=m.value;if(p.equals(v)){g=!0;break}}}catch(t){a={error:t}}finally{try{m&&!m.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}if(!g){h=!1;break}}}catch(t){o={error:t}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}if(h)return!0}}catch(t){r={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var e=(function(t){try{if(t.get(1))return new e4(t);if(!t.get(2))return new e6(t);switch(eJ.extractNumericValueFromBitArray(t,1,4)){case 4:return new re(t);case 5:return new rn(t)}switch(eJ.extractNumericValueFromBitArray(t,1,5)){case 12:return new ri(t);case 13:return new rs(t)}switch(eJ.extractNumericValueFromBitArray(t,1,7)){case 56:return new rc(t,"310","11");case 57:return new rc(t,"320","11");case 58:return new rc(t,"310","13");case 59:return new rc(t,"320","13");case 60:return new rc(t,"310","15");case 61:return new rc(t,"320","15");case 62:return new rc(t,"310","17");case 63:return new rc(t,"320","17")}}catch(e){throw console.log(e),new tH("unknown decoder: "+t)}})(eU.buildBitArray(t)).parseInformation(),r=t[0].getFinderPattern().getResultPoints(),n=t[t.length-1].getFinderPattern().getResultPoints();return new tx(e,null,null,[r[0],r[1],n[0],n[1]],tO.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),e=t.getLeftChar(),r=t.getRightChar();if(null===r)return!1;for(var n=r.getChecksumPortion(),o=2,i=1;i<this.pairs.size();++i){var a=this.pairs.get(i);n+=a.getLeftChar().getChecksumPortion(),o++;var s=a.getRightChar();null!=s&&(n+=s.getChecksumPortion(),o++)}return 211*(o-4)+(n%=211)===e.getValue()},e.getNextSecondBar=function(t,e){var r;return t.get(e)?(r=t.getNextUnset(e),r=t.getNextSet(r)):(r=t.getNextSet(e),r=t.getNextUnset(r)),r},e.prototype.retrieveNextPair=function(t,r,n){var o,i,a=r.length%2==0;this.startFromEven&&(a=!a);var s=!0,u=-1;do this.findNextPair(t,r,u),null===(o=this.parseFoundFinderPattern(t,n,a))?u=e.getNextSecondBar(t,this.startEnd[0]):s=!1;while(s);var c=this.decodeDataCharacter(t,o,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new tp;try{i=this.decodeDataCharacter(t,o,a,!1)}catch(t){i=null,console.log(t)}return new rl(c,i,o,!0)},e.prototype.isEmptyPair=function(t){return 0===t.length},e.prototype.findNextPair=function(t,r,n){var o,i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;var a=t.getSize();o=n>=0?n:this.isEmptyPair(r)?0:r[r.length-1].getFinderPattern().getStartEnd()[1];var s=r.length%2!=0;this.startFromEven&&(s=!s);for(var u=!1;o<a&&(u=!t.get(o));)o++;for(var c=0,l=o,h=o;h<a;h++)if(t.get(h)!==u)i[c]++;else{if(3===c){if(s&&e.reverseCounters(i),e.isFinderPattern(i)){this.startEnd[0]=l,this.startEnd[1]=h;return}s&&e.reverseCounters(i),l+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,u=!u}throw new tp},e.reverseCounters=function(t){for(var e=t.length,r=0;r<e/2;++r){var n=t[r];t[r]=t[e-r-1],t[e-r-1]=n}},e.prototype.parseFoundFinderPattern=function(t,r,n){if(n){for(var o,i,a,s,u=this.startEnd[0]-1;u>=0&&!t.get(u);)u--;u++,o=this.startEnd[0]-u,i=u,a=this.startEnd[1]}else i=this.startEnd[0],o=(a=t.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var c=this.getDecodeFinderCounters();Z.arraycopy(c,0,c,1,c.length-1),c[0]=o;try{s=this.parseFinderValue(c,e.FINDER_PATTERNS)}catch(t){return null}return new eF(s,[i,a],i,a,r)},e.prototype.decodeDataCharacter=function(t,r,n,o){for(var i=this.getDataCharacterCounters(),a=0;a<i.length;a++)i[a]=0;if(o)e.recordPatternInReverse(t,r.getStartEnd()[0],i);else{e.recordPattern(t,r.getStartEnd()[1],i);for(var s=0,u=i.length-1;s<u;s++,u--){var c=i[s];i[s]=i[u],i[u]=c}}var l=tG.sum(new Int32Array(i))/17,h=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(l-h)/h>.3)throw new tp;for(var d=this.getOddCounts(),f=this.getEvenCounts(),p=this.getOddRoundingErrors(),g=this.getEvenRoundingErrors(),s=0;s<i.length;s++){var y=1*i[s]/l,m=y+.5;if(m<1){if(y<.3)throw new tp;m=1}else if(m>8){if(y>8.7)throw new tp;m=8}var v=s/2;(1&s)==0?(d[v]=m,p[v]=y-m):(f[v]=m,g[v]=y-m)}this.adjustOddEvenCounts(17);for(var w=4*r.getValue()+(n?0:2)+(o?0:1)-1,_=0,C=0,s=d.length-1;s>=0;s--){if(e.isNotA1left(r,n,o)){var A=e.WEIGHTS[w][2*s];C+=d[s]*A}_+=d[s]}for(var E=0,s=f.length-1;s>=0;s--)if(e.isNotA1left(r,n,o)){var A=e.WEIGHTS[w][2*s+1];E+=f[s]*A}var I=C+E;if((1&_)!=0||_>13||_<4)throw new tp;var b=(13-_)/2,S=e.SYMBOL_WIDEST[b],N=eV.getRSSvalue(d,S,!0),T=eV.getRSSvalue(f,9-S,!1);return new eL(N*e.EVEN_TOTAL_SUBSET[b]+T+e.GSUM[b],I)},e.isNotA1left=function(t,e,r){return!(0===t.getValue()&&e&&r)},e.prototype.adjustOddEvenCounts=function(t){var r=tG.sum(new Int32Array(this.getOddCounts())),n=tG.sum(new Int32Array(this.getEvenCounts())),o=!1,i=!1;r>13?i=!0:r<4&&(o=!0);var a=!1,s=!1;n>13?s=!0:n<4&&(a=!0);var u=r+n-t,c=(1&r)==1,l=(1&n)==0;if(1===u){if(c){if(l)throw new tp;i=!0}else{if(!l)throw new tp;s=!0}}else if(-1===u){if(c){if(l)throw new tp;o=!0}else{if(!l)throw new tp;a=!0}}else if(0===u){if(c){if(!l)throw new tp;r<n?(o=!0,s=!0):(i=!0,a=!0)}else if(l)throw new tp}else throw new tp;if(o){if(i)throw new tp;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new tp;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(ek),rg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ry=function(t){function e(e,r,n){var o=t.call(this,e,r)||this;return o.count=0,o.finderPattern=n,o}return rg(e,t),e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(eL),rm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rv=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rw=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.possibleLeftPairs=[],e.possibleRightPairs=[],e}return rm(e,t),e.prototype.decodeRow=function(t,r,n){var o,i,a,s,u=this.decodePair(r,!1,t,n);e.addOrTally(this.possibleLeftPairs,u),r.reverse();var c=this.decodePair(r,!0,t,n);e.addOrTally(this.possibleRightPairs,c),r.reverse();try{for(var l=rv(this.possibleLeftPairs),h=l.next();!h.done;h=l.next()){var d=h.value;if(d.getCount()>1)try{for(var f=(a=void 0,rv(this.possibleRightPairs)),p=f.next();!p.done;p=f.next()){var g=p.value;if(g.getCount()>1&&e.checkChecksum(d,g))return e.constructResult(d,g)}}catch(t){a={error:t}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}}}catch(t){o={error:t}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}throw new tp},e.addOrTally=function(t,e){if(null!=e){var r,n,o=!1;try{for(var i=rv(t),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.getValue()===e.getValue()){s.incrementCount(),o=!0;break}}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}o||t.push(e)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,e){for(var r=new String(4537077*t.getValue()+e.getValue()).toString(),n=new th,o=13-r.length;o>0;o--)n.append("0");n.append(r);for(var i=0,o=0;o<13;o++){var a=n.charAt(o).charCodeAt(0)-48;i+=(1&o)==0?3*a:a}10==(i=10-i%10)&&(i=0),n.append(i.toString());var s=t.getFinderPattern().getResultPoints(),u=e.getFinderPattern().getResultPoints();return new tx(n.toString(),null,0,[s[0],s[1],u[0],u[1]],tO.RSS_14,new Date().getTime())},e.checkChecksum=function(t,e){var r=(t.getChecksumPortion()+16*e.getChecksumPortion())%79,n=9*t.getFinderPattern().getValue()+e.getFinderPattern().getValue();return n>72&&n--,n>8&&n--,r===n},e.prototype.decodePair=function(t,e,r,n){try{var o=this.findFinderPattern(t,e),i=this.parseFoundFinderPattern(t,r,e,o),a=null==n?null:n.get(tr.NEED_RESULT_POINT_CALLBACK);if(null!=a){var s=(o[0]+o[1])/2;e&&(s=t.getSize()-1-s),a.foundPossibleResultPoint(new tZ(s,r))}var u=this.decodeDataCharacter(t,i,!0),c=this.decodeDataCharacter(t,i,!1);return new ry(1597*u.getValue()+c.getValue(),u.getChecksumPortion()+4*c.getChecksumPortion(),i)}catch(t){return null}},e.prototype.decodeDataCharacter=function(t,r,n){for(var o=this.getDataCharacterCounters(),i=0;i<o.length;i++)o[i]=0;if(n)t5.recordPatternInReverse(t,r.getStartEnd()[0],o);else{t5.recordPattern(t,r.getStartEnd()[1]+1,o);for(var a=0,s=o.length-1;a<s;a++,s--){var u=o[a];o[a]=o[s],o[s]=u}}for(var c=n?16:15,l=tG.sum(new Int32Array(o))/c,h=this.getOddCounts(),d=this.getEvenCounts(),f=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors(),a=0;a<o.length;a++){var g=o[a]/l,y=Math.floor(g+.5);y<1?y=1:y>8&&(y=8);var m=Math.floor(a/2);(1&a)==0?(h[m]=y,f[m]=g-y):(d[m]=y,p[m]=g-y)}this.adjustOddEvenCounts(n,c);for(var v=0,w=0,a=h.length-1;a>=0;a--)w*=9,w+=h[a],v+=h[a];for(var _=0,C=0,a=d.length-1;a>=0;a--)_*=9,_+=d[a],C+=d[a];var A=w+3*_;if(n){if((1&v)!=0||v>12||v<4)throw new tp;var E=(12-v)/2,I=e.OUTSIDE_ODD_WIDEST[E],b=9-I,S=eV.getRSSvalue(h,I,!1),N=eV.getRSSvalue(d,b,!0),T=e.OUTSIDE_EVEN_TOTAL_SUBSET[E],x=e.OUTSIDE_GSUM[E];return new eL(S*T+N+x,A)}if((1&C)!=0||C>10||C<4)throw new tp;var E=(10-C)/2,I=e.INSIDE_ODD_WIDEST[E],b=9-I,S=eV.getRSSvalue(h,I,!0),N=eV.getRSSvalue(d,b,!1),O=e.INSIDE_ODD_TOTAL_SUBSET[E],x=e.INSIDE_GSUM[E];return new eL(N*O+S+x,A)},e.prototype.findFinderPattern=function(t,e){var r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;for(var n=t.getSize(),o=!1,i=0;i<n&&e!==(o=!t.get(i));)i++;for(var a=0,s=i,u=i;u<n;u++)if(t.get(u)!==o)r[a]++;else{if(3===a){if(ek.isFinderPattern(r))return[s,u];s+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,a--}else a++;r[a]=1,o=!o}throw new tp},e.prototype.parseFoundFinderPattern=function(t,r,n,o){for(var i=t.get(o[0]),a=o[0]-1;a>=0&&i!==t.get(a);)a--;a++;var s=o[0]-a,u=this.getDecodeFinderCounters(),c=new Int32Array(u.length);Z.arraycopy(u,0,c,1,u.length-1),c[0]=s;var l=this.parseFinderValue(c,e.FINDER_PATTERNS),h=a,d=o[1];return n&&(h=t.getSize()-1-h,d=t.getSize()-1-d),new eF(l,[a,o[1]],h,d,r)},e.prototype.adjustOddEvenCounts=function(t,e){var r=tG.sum(new Int32Array(this.getOddCounts())),n=tG.sum(new Int32Array(this.getEvenCounts())),o=!1,i=!1,a=!1,s=!1;t?(r>12?i=!0:r<4&&(o=!0),n>12?s=!0:n<4&&(a=!0)):(r>11?i=!0:r<5&&(o=!0),n>10?s=!0:n<4&&(a=!0));var u=r+n-e,c=(1&r)==(t?1:0),l=(1&n)==1;if(1===u){if(c){if(l)throw new tp;i=!0}else{if(!l)throw new tp;s=!0}}else if(-1===u){if(c){if(l)throw new tp;o=!0}else{if(!l)throw new tp;a=!0}}else if(0===u){if(c){if(!l)throw new tp;r<n?(o=!0,s=!0):(i=!0,a=!0)}else if(l)throw new tp}else throw new tp;if(o){if(i)throw new tp;ek.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&ek.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new tp;ek.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&ek.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(ek),r_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rC=function(t){function e(e){var r=t.call(this)||this;r.readers=[];var n=e?e.get(tr.POSSIBLE_FORMATS):null,o=e&&void 0!==e.get(tr.ASSUME_CODE_39_CHECK_DIGIT),i=e&&void 0!==e.get(tr.ENABLE_CODE_39_EXTENDED_MODE);return n&&((n.includes(tO.EAN_13)||n.includes(tO.UPC_A)||n.includes(tO.EAN_8)||n.includes(tO.UPC_E))&&r.readers.push(new eR(e)),n.includes(tO.CODE_39)&&r.readers.push(new er(o,i)),n.includes(tO.CODE_93)&&r.readers.push(new ei),n.includes(tO.CODE_128)&&r.readers.push(new t7),n.includes(tO.ITF)&&r.readers.push(new eu),n.includes(tO.CODABAR)&&r.readers.push(new eM),n.includes(tO.RSS_14)&&r.readers.push(new rw),n.includes(tO.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new rp))),0===r.readers.length&&(r.readers.push(new eR(e)),r.readers.push(new er),r.readers.push(new ei),r.readers.push(new eR(e)),r.readers.push(new t7),r.readers.push(new eu),r.readers.push(new rw)),r}return r_(e,t),e.prototype.decodeRow=function(t,e,r){for(var n=0;n<this.readers.length;n++)try{return this.readers[n].decodeRow(t,e,r)}catch(t){}throw new tp},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(t5),rA=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){rA(function(e,r){return void 0===e&&(e=500),t.call(this,new rC(r),e,r)||this},t)})(tT);var rE=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rI=function(){function t(t,e,r){this.ecCodewords=t,this.ecBlocks=[e],r&&this.ecBlocks.push(r)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),rb=function(){function t(t,e){this.count=t,this.dataCodewords=e}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),rS=function(){function t(t,e,r,n,o,i){this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=r,this.dataRegionSizeRows=n,this.dataRegionSizeColumns=o,this.ecBlocks=i;var a,s,u=0,c=i.getECCodewords(),l=i.getECBlocks();try{for(var h=rE(l),d=h.next();!d.done;d=h.next()){var f=d.value;u+=f.getCount()*(f.getDataCodewords()+c)}}catch(t){a={error:t}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,o;if((1&e)!=0||(1&r)!=0)throw new to;try{for(var i=rE(t.VERSIONS),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}throw new to},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new rI(5,new rb(1,3))),new t(2,12,12,10,10,new rI(7,new rb(1,5))),new t(3,14,14,12,12,new rI(10,new rb(1,8))),new t(4,16,16,14,14,new rI(12,new rb(1,12))),new t(5,18,18,16,16,new rI(14,new rb(1,18))),new t(6,20,20,18,18,new rI(18,new rb(1,22))),new t(7,22,22,20,20,new rI(20,new rb(1,30))),new t(8,24,24,22,22,new rI(24,new rb(1,36))),new t(9,26,26,24,24,new rI(28,new rb(1,44))),new t(10,32,32,14,14,new rI(36,new rb(1,62))),new t(11,36,36,16,16,new rI(42,new rb(1,86))),new t(12,40,40,18,18,new rI(48,new rb(1,114))),new t(13,44,44,20,20,new rI(56,new rb(1,144))),new t(14,48,48,22,22,new rI(68,new rb(1,174))),new t(15,52,52,24,24,new rI(42,new rb(2,102))),new t(16,64,64,14,14,new rI(56,new rb(2,140))),new t(17,72,72,16,16,new rI(36,new rb(4,92))),new t(18,80,80,18,18,new rI(48,new rb(4,114))),new t(19,88,88,20,20,new rI(56,new rb(4,144))),new t(20,96,96,22,22,new rI(68,new rb(4,174))),new t(21,104,104,24,24,new rI(56,new rb(6,136))),new t(22,120,120,18,18,new rI(68,new rb(6,175))),new t(23,132,132,20,20,new rI(62,new rb(8,163))),new t(24,144,144,22,22,new rI(62,new rb(8,156),new rb(2,155))),new t(25,8,18,6,16,new rI(7,new rb(1,5))),new t(26,8,32,6,14,new rI(11,new rb(1,10))),new t(27,12,26,10,24,new rI(14,new rb(1,16))),new t(28,12,36,10,16,new rI(18,new rb(1,22))),new t(29,16,36,14,16,new rI(24,new rb(1,32))),new t(30,16,48,14,22,new rI(28,new rb(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),rN=function(){function t(e){var r=e.getHeight();if(r<8||r>144||(1&r)!=0)throw new to;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new td(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(t){var e=t.getHeight(),r=t.getWidth();return rS.getVersionForDimensions(e,r)},t.prototype.readCodewords=function(){var t=new Int8Array(this.version.getTotalCodewords()),e=0,r=4,n=0,o=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth(),a=!1,s=!1,u=!1,c=!1;do if(r!==o||0!==n||a){if(r!==o-2||0!==n||(3&i)==0||s){if(r!==o+4||2!==n||(7&i)!=0||u){if(r!==o-2||0!==n||(7&i)!=4||c){do r<o&&n>=0&&!this.readMappingMatrix.get(n,r)&&(t[e++]=255&this.readUtah(r,n,o,i)),r-=2,n+=2;while(r>=0&&n<i);r+=1,n+=3;do r>=0&&n<i&&!this.readMappingMatrix.get(n,r)&&(t[e++]=255&this.readUtah(r,n,o,i)),r+=2,n-=2;while(r<o&&n>=0);r+=3,n+=1}else t[e++]=255&this.readCorner4(o,i),r-=2,n+=2,c=!0}else t[e++]=255&this.readCorner3(o,i),r-=2,n+=2,u=!0}else t[e++]=255&this.readCorner2(o,i),r-=2,n+=2,s=!0}else t[e++]=255&this.readCorner1(o,i),r-=2,n+=2,a=!0;while(r<o||n<i);if(e!==this.version.getTotalCodewords())throw new to;return t},t.prototype.readModule=function(t,e,r,n){return t<0&&(t+=r,e+=4-(r+4&7)),e<0&&(e+=n,t+=4-(n+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)},t.prototype.readUtah=function(t,e,r,n){var o=0;return this.readModule(t-2,e-2,r,n)&&(o|=1),o<<=1,this.readModule(t-2,e-1,r,n)&&(o|=1),o<<=1,this.readModule(t-1,e-2,r,n)&&(o|=1),o<<=1,this.readModule(t-1,e-1,r,n)&&(o|=1),o<<=1,this.readModule(t-1,e,r,n)&&(o|=1),o<<=1,this.readModule(t,e-2,r,n)&&(o|=1),o<<=1,this.readModule(t,e-1,r,n)&&(o|=1),o<<=1,this.readModule(t,e,r,n)&&(o|=1),o},t.prototype.readCorner1=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,1,t,e)&&(r|=1),r<<=1,this.readModule(t-1,2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},t.prototype.readCorner2=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-4,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},t.prototype.readCorner3=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-3,t,e)&&(r|=1),r<<=1,this.readModule(1,e-2,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},t.prototype.readCorner4=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},t.prototype.extractDataRegion=function(t){var e=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new H("Dimension of bitMatrix must match the version size");for(var n=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),i=e/n|0,a=r/o|0,s=new td(a*o,i*n),u=0;u<i;++u)for(var c=u*n,l=0;l<a;++l)for(var h=l*o,d=0;d<n;++d)for(var f=u*(n+2)+1+d,p=c+d,g=0;g<o;++g){var y=l*(o+2)+1+g;if(t.get(y,f)){var m=h+g;s.set(m,p)}}return s},t}(),rT=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rx=function(){function t(t,e){this.numDataCodewords=t,this.codewords=e}return t.getDataBlocks=function(e,r){var n,o,i,a,s=r.getECBlocks(),u=0,c=s.getECBlocks();try{for(var l=rT(c),h=l.next();!h.done;h=l.next()){var d=h.value;u+=d.getCount()}}catch(t){n={error:t}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}var f=Array(u),p=0;try{for(var g=rT(c),y=g.next();!y.done;y=g.next())for(var d=y.value,m=0;m<d.getCount();m++){var v=d.getDataCodewords(),w=s.getECCodewords()+v;f[p++]=new t(v,new Uint8Array(w))}}catch(t){i={error:t}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var _=f[0].codewords.length-s.getECCodewords(),C=_-1,A=0,m=0;m<C;m++)for(var E=0;E<p;E++)f[E].codewords[m]=e[A++];for(var I=24===r.getVersionNumber(),b=I?8:p,E=0;E<b;E++)f[E].codewords[_-1]=e[A++];for(var S=f[0].codewords.length,m=_;m<S;m++)for(var E=0;E<p;E++){var N=I?(E+8)%p:E,T=I&&N>7?m-1:m;f[N].codewords[T]=e[A++]}if(A!==e.length)throw new H;return f},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),rO=function(){function t(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(t){if(t<1||t>32||t>this.available())throw new H(""+t);var e=0,r=this.bitOffset,n=this.byteOffset,o=this.bytes;if(r>0){var i=8-r,a=t<i?t:i,s=i-a,u=255>>8-a<<s;e=(o[n]&u)>>s,t-=a,8===(r+=a)&&(r=0,n++)}if(t>0){for(;t>=8;)e=e<<8|255&o[n],n++,t-=8;if(t>0){var s=8-t,u=255>>s<<s;e=e<<t|(o[n]&u)>>s,r+=t}}return this.bitOffset=r,this.byteOffset=n,e},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}();!function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"}(c||(c={}));var rR=function(){function t(){}return t.decode=function(t){var e=new rO(t),r=new th,n=new th,o=[],i=c.ASCII_ENCODE;do if(i===c.ASCII_ENCODE)i=this.decodeAsciiSegment(e,r,n);else{switch(i){case c.C40_ENCODE:this.decodeC40Segment(e,r);break;case c.TEXT_ENCODE:this.decodeTextSegment(e,r);break;case c.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,r);break;case c.EDIFACT_ENCODE:this.decodeEdifactSegment(e,r);break;case c.BASE256_ENCODE:this.decodeBase256Segment(e,r,o);break;default:throw new to}i=c.ASCII_ENCODE}while(i!==c.PAD_ENCODE&&e.available()>0);return n.length()>0&&r.append(n.toString()),new tD(t,r.toString(),0===o.length?null:o,null)},t.decodeAsciiSegment=function(t,e,r){var n=!1;do{var o=t.readBits(8);if(0===o)throw new to;if(o<=128){n&&(o+=128),e.append(String.fromCharCode(o-1));break}if(129===o)return c.PAD_ENCODE;if(o<=229){var i=o-130;i<10&&e.append("0"),e.append(""+i)}else switch(o){case 230:return c.C40_ENCODE;case 231:return c.BASE256_ENCODE;case 232:e.append("\x1d");break;case 233:case 234:case 241:break;case 235:n=!0;break;case 236:e.append("[)>\x1e05\x1d"),r.insert(0,"\x1e\x04");break;case 237:e.append("[)>\x1e06\x1d"),r.insert(0,"\x1e\x04");break;case 238:return c.ANSIX12_ENCODE;case 239:return c.TEXT_ENCODE;case 240:return c.EDIFACT_ENCODE;default:if(254!==o||0!==t.available())throw new to}}while(t.available()>0);return c.ASCII_ENCODE},t.decodeC40Segment=function(t,e){var r=!1,n=[],o=0;do{if(8===t.available())return;var i=t.readBits(8);if(254===i)return;this.parseTwoBytes(i,t.readBits(8),n);for(var a=0;a<3;a++){var s=n[a];switch(o){case 0:if(s<3)o=s+1;else if(s<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[s];r?(e.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):e.append(u)}else throw new to;break;case 1:r?(e.append(String.fromCharCode(s+128)),r=!1):e.append(String.fromCharCode(s)),o=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[s];r?(e.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):e.append(u)}else switch(s){case 27:e.append("\x1d");break;case 30:r=!0;break;default:throw new to}o=0;break;case 3:r?(e.append(String.fromCharCode(s+224)),r=!1):e.append(String.fromCharCode(s+96)),o=0;break;default:throw new to}}}while(t.available()>0)},t.decodeTextSegment=function(t,e){var r=!1,n=[],o=0;do{if(8===t.available())return;var i=t.readBits(8);if(254===i)return;this.parseTwoBytes(i,t.readBits(8),n);for(var a=0;a<3;a++){var s=n[a];switch(o){case 0:if(s<3)o=s+1;else if(s<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[s];r?(e.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):e.append(u)}else throw new to;break;case 1:r?(e.append(String.fromCharCode(s+128)),r=!1):e.append(String.fromCharCode(s)),o=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[s];r?(e.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):e.append(u)}else switch(s){case 27:e.append("\x1d");break;case 30:r=!0;break;default:throw new to}o=0;break;case 3:if(s<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[s];r?(e.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):e.append(u),o=0}else throw new to;break;default:throw new to}}}while(t.available()>0)},t.decodeAnsiX12Segment=function(t,e){var r=[];do{if(8===t.available())return;var n=t.readBits(8);if(254===n)return;this.parseTwoBytes(n,t.readBits(8),r);for(var o=0;o<3;o++){var i=r[o];switch(i){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(i<14)e.append(String.fromCharCode(i+44));else if(i<40)e.append(String.fromCharCode(i+51));else throw new to}}}while(t.available()>0)},t.parseTwoBytes=function(t,e,r){var n=(t<<8)+e-1,o=Math.floor(n/1600);r[0]=o,n-=1600*o,o=Math.floor(n/40),r[1]=o,r[2]=n-40*o},t.decodeEdifactSegment=function(t,e){do{if(16>=t.available())return;for(var r=0;r<4;r++){var n=t.readBits(6);if(31===n){var o=8-t.getBitOffset();8!==o&&t.readBits(o);return}(32&n)==0&&(n|=64),e.append(String.fromCharCode(n))}}while(t.available()>0)},t.decodeBase256Segment=function(t,e,r){var n,o=1+t.getByteOffset(),i=this.unrandomize255State(t.readBits(8),o++);if((n=0===i?t.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(t.readBits(8),o++))<0)throw new to;for(var a=new Uint8Array(n),s=0;s<n;s++){if(8>t.available())throw new to;a[s]=this.unrandomize255State(t.readBits(8),o++)}r.push(a);try{e.append(tc.decode(a,tl.ISO88591))}catch(t){throw new tH("Platform does not support required encoding: "+t.message)}},t.unrandomize255State=function(t,e){var r=t-(149*e%255+1);return r>=0?r:r+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7f"],t}(),rD=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rM=function(){function t(){this.rsDecoder=new tX(tF.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(t){var e,r,n=new rN(t),o=n.getVersion(),i=n.readCodewords(),a=rx.getDataBlocks(i,o),s=0;try{for(var u=rD(a),c=u.next();!c.done;c=u.next()){var l=c.value;s+=l.getNumDataCodewords()}}catch(t){e={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}for(var h=new Uint8Array(s),d=a.length,f=0;f<d;f++){var p=a[f],g=p.getCodewords(),y=p.getNumDataCodewords();this.correctErrors(g,y);for(var m=0;m<y;m++)h[m*d+f]=g[m]}return rR.decode(h)},t.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch(t){throw new G}for(var n=0;n<e;n++)t[n]=r[n]},t}(),rP=function(){function t(t){this.image=t,this.rectangleDetector=new tq(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if((r=this.detectSolid2(r))[3]=this.correctTopRight(r),!r[3])throw new tp;var n=(r=this.shiftToModuleCenter(r))[0],o=r[1],i=r[2],a=r[3],s=this.transitionsBetween(n,a)+1,u=this.transitionsBetween(i,a)+1;return(1&s)==1&&(s+=1),(1&u)==1&&(u+=1),4*s<7*u&&4*u<7*s&&(s=u=Math.max(s,u)),new tY(t.sampleGrid(this.image,n,o,i,a,s,u),[n,o,i,a])},t.shiftPoint=function(t,e,r){var n=(e.getX()-t.getX())/(r+1),o=(e.getY()-t.getY())/(r+1);return new tZ(t.getX()+n,t.getY()+o)},t.moveAway=function(t,e,r){var n=t.getX(),o=t.getY();return n<e?n-=1:n+=1,o<r?o-=1:o+=1,new tZ(n,o)},t.prototype.detectSolid1=function(t){var e=t[0],r=t[1],n=t[3],o=t[2],i=this.transitionsBetween(e,r),a=this.transitionsBetween(r,n),s=this.transitionsBetween(n,o),u=this.transitionsBetween(o,e),c=i,l=[o,e,r,n];return c>a&&(c=a,l[0]=e,l[1]=r,l[2]=n,l[3]=o),c>s&&(c=s,l[0]=r,l[1]=n,l[2]=o,l[3]=e),c>u&&(l[0]=n,l[1]=o,l[2]=e,l[3]=r),l},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],o=e[2],i=e[3],a=this.transitionsBetween(r,i),s=t.shiftPoint(n,o,(a+1)*4),u=t.shiftPoint(o,n,(a+1)*4);return this.transitionsBetween(s,r)<this.transitionsBetween(u,i)?(e[0]=r,e[1]=n,e[2]=o,e[3]=i):(e[0]=n,e[1]=o,e[2]=i,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],o=e[2],i=e[3],a=this.transitionsBetween(r,i),s=this.transitionsBetween(n,i),u=t.shiftPoint(r,n,(s+1)*4),c=t.shiftPoint(o,n,(a+1)*4);a=this.transitionsBetween(u,i),s=this.transitionsBetween(c,i);var l=new tZ(i.getX()+(o.getX()-n.getX())/(a+1),i.getY()+(o.getY()-n.getY())/(a+1)),h=new tZ(i.getX()+(r.getX()-n.getX())/(s+1),i.getY()+(r.getY()-n.getY())/(s+1));return this.isValid(l)?this.isValid(h)?this.transitionsBetween(u,l)+this.transitionsBetween(c,l)>this.transitionsBetween(u,h)+this.transitionsBetween(c,h)?l:h:l:this.isValid(h)?h:null},t.prototype.shiftToModuleCenter=function(e){var r,n,o=e[0],i=e[1],a=e[2],s=e[3],u=this.transitionsBetween(o,s)+1,c=this.transitionsBetween(a,s)+1,l=t.shiftPoint(o,i,4*c),h=t.shiftPoint(a,i,4*u);u=this.transitionsBetween(l,s)+1,c=this.transitionsBetween(h,s)+1,(1&u)==1&&(u+=1),(1&c)==1&&(c+=1);var d=(o.getX()+i.getX()+a.getX()+s.getX())/4,f=(o.getY()+i.getY()+a.getY()+s.getY())/4;return o=t.moveAway(o,d,f),i=t.moveAway(i,d,f),a=t.moveAway(a,d,f),s=t.moveAway(s,d,f),l=t.shiftPoint(o,i,4*c),l=t.shiftPoint(l,s,4*u),r=t.shiftPoint(i,o,4*c),r=t.shiftPoint(r,a,4*u),h=t.shiftPoint(a,s,4*c),h=t.shiftPoint(h,i,4*u),n=t.shiftPoint(s,a,4*c),[l,r,h,n=t.shiftPoint(n,o,4*u)]},t.prototype.isValid=function(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()},t.sampleGrid=function(t,e,r,n,o,i,a){return t2.getInstance().sampleGrid(t,i,a,.5,.5,i-.5,.5,i-.5,a-.5,.5,a-.5,e.getX(),e.getY(),o.getX(),o.getY(),n.getX(),n.getY(),r.getX(),r.getY())},t.prototype.transitionsBetween=function(t,e){var r=Math.trunc(t.getX()),n=Math.trunc(t.getY()),o=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.abs(i-n)>Math.abs(o-r);if(a){var s=r;r=n,n=s,s=o,o=i,i=s}for(var u=Math.abs(o-r),c=Math.abs(i-n),l=-u/2,h=n<i?1:-1,d=r<o?1:-1,f=0,p=this.image.get(a?n:r,a?r:n),g=r,y=n;g!==o;g+=d){var m=this.image.get(a?y:g,a?g:y);if(m!==p&&(f++,p=m),(l+=c)>0){if(y===i)break;y+=h,l-=u}}return f},t}(),rB=function(){function t(){this.decoder=new rM}return t.prototype.decode=function(e,r){if(void 0===r&&(r=null),null!=r&&r.has(tr.PURE_BARCODE)){var n,o,i=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(i),o=t.NO_POINTS}else{var a=new rP(e.getBlackMatrix()).detect();n=this.decoder.decode(a.getBits()),o=a.getPoints()}var s=n.getRawBytes(),u=new tx(n.getText(),s,8*s.length,o,tO.DATA_MATRIX,Z.currentTimeMillis()),c=n.getByteSegments();null!=c&&u.putMetadata(tR.BYTE_SEGMENTS,c);var l=n.getECLevel();return null!=l&&u.putMetadata(tR.ERROR_CORRECTION_LEVEL,l),u},t.prototype.reset=function(){},t.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(null==e||null==r)throw new tp;var n=this.moduleSize(e,t),o=e[1],i=r[1],a=e[0],s=(r[0]-a+1)/n,u=(i-o+1)/n;if(s<=0||u<=0)throw new tp;var c=n/2;o+=c,a+=c;for(var l=new td(s,u),h=0;h<u;h++)for(var d=o+h*n,f=0;f<s;f++)t.get(a+f*n,d)&&l.set(f,h);return l},t.moduleSize=function(t,e){for(var r=e.getWidth(),n=t[0],o=t[1];n<r&&e.get(n,o);)n++;if(n===r)throw new tp;var i=n-t[0];if(0===i)throw new tp;return i},t.NO_POINTS=[],t}(),rk=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){rk(function(e){return void 0===e&&(e=500),t.call(this,new rB,e)||this},t)})(tT),function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"}(l||(l={}));var rL=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new V(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){return e instanceof t&&this.value===e.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new H;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(l.L,"L",1),t.M=new t(l.M,"M",0),t.Q=new t(l.Q,"Q",3),t.H=new t(l.H,"H",2),t}(),rF=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rj=function(){function t(t){this.errorCorrectionLevel=rL.forBits(t>>3&3),this.dataMask=7&t}return t.numBitsDiffering=function(t,e){return tt.bitCount(t^e)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return null!==n?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,o,i=Number.MAX_SAFE_INTEGER,a=0;try{for(var s=rF(t.FORMAT_INFO_DECODE_LOOKUP),u=s.next();!u.done;u=s.next()){var c=u.value,l=c[0];if(l===e||l===r)return new t(c[1]);var h=t.numBitsDiffering(e,l);h<i&&(a=c[1],i=h),e!==r&&(h=t.numBitsDiffering(r,l))<i&&(a=c[1],i=h)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return i<=3?new t(a):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){return e instanceof t&&this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),rV=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rU=function(){function t(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.ecCodewordsPerBlock=t,this.ecBlocks=e}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var t,e,r=0,n=this.ecBlocks;try{for(var o=rV(n),i=o.next();!i.done;i=o.next()){var a=i.value;r+=a.getCount()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),rH=function(){function t(t,e){this.count=t,this.dataCodewords=e}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),rX=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rW=function(){function t(t,e){for(var r,n,o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=o;var a=0,s=o[0].getECCodewordsPerBlock(),u=o[0].getECBlocks();try{for(var c=rX(u),l=c.next();!l.done;l=c.next()){var h=l.value;a+=h.getCount()*(h.getDataCodewords()+s)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}this.totalCodewords=a}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.getValue()]},t.getProvisionalVersionForDimension=function(t){if(t%4!=1)throw new to;try{return this.getVersionForNumber((t-17)/4)}catch(t){throw new to}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new H;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,o=0;o<t.VERSION_DECODE_INFO.length;o++){var i=t.VERSION_DECODE_INFO[o];if(i===e)return t.getVersionForNumber(o+7);var a=rj.numBitsDiffering(e,i);a<r&&(n=o+7,r=a)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var t=this.getDimensionForVersion(),e=new td(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);for(var r=this.alignmentPatternCenters.length,n=0;n<r;n++)for(var o=this.alignmentPatternCenters[n]-2,i=0;i<r;i++)(0!==n||0!==i&&i!==r-1)&&(n!==r-1||0!==i)&&e.setRegion(this.alignmentPatternCenters[i]-2,o,5,5);return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new rU(7,new rH(1,19)),new rU(10,new rH(1,16)),new rU(13,new rH(1,13)),new rU(17,new rH(1,9))),new t(2,Int32Array.from([6,18]),new rU(10,new rH(1,34)),new rU(16,new rH(1,28)),new rU(22,new rH(1,22)),new rU(28,new rH(1,16))),new t(3,Int32Array.from([6,22]),new rU(15,new rH(1,55)),new rU(26,new rH(1,44)),new rU(18,new rH(2,17)),new rU(22,new rH(2,13))),new t(4,Int32Array.from([6,26]),new rU(20,new rH(1,80)),new rU(18,new rH(2,32)),new rU(26,new rH(2,24)),new rU(16,new rH(4,9))),new t(5,Int32Array.from([6,30]),new rU(26,new rH(1,108)),new rU(24,new rH(2,43)),new rU(18,new rH(2,15),new rH(2,16)),new rU(22,new rH(2,11),new rH(2,12))),new t(6,Int32Array.from([6,34]),new rU(18,new rH(2,68)),new rU(16,new rH(4,27)),new rU(24,new rH(4,19)),new rU(28,new rH(4,15))),new t(7,Int32Array.from([6,22,38]),new rU(20,new rH(2,78)),new rU(18,new rH(4,31)),new rU(18,new rH(2,14),new rH(4,15)),new rU(26,new rH(4,13),new rH(1,14))),new t(8,Int32Array.from([6,24,42]),new rU(24,new rH(2,97)),new rU(22,new rH(2,38),new rH(2,39)),new rU(22,new rH(4,18),new rH(2,19)),new rU(26,new rH(4,14),new rH(2,15))),new t(9,Int32Array.from([6,26,46]),new rU(30,new rH(2,116)),new rU(22,new rH(3,36),new rH(2,37)),new rU(20,new rH(4,16),new rH(4,17)),new rU(24,new rH(4,12),new rH(4,13))),new t(10,Int32Array.from([6,28,50]),new rU(18,new rH(2,68),new rH(2,69)),new rU(26,new rH(4,43),new rH(1,44)),new rU(24,new rH(6,19),new rH(2,20)),new rU(28,new rH(6,15),new rH(2,16))),new t(11,Int32Array.from([6,30,54]),new rU(20,new rH(4,81)),new rU(30,new rH(1,50),new rH(4,51)),new rU(28,new rH(4,22),new rH(4,23)),new rU(24,new rH(3,12),new rH(8,13))),new t(12,Int32Array.from([6,32,58]),new rU(24,new rH(2,92),new rH(2,93)),new rU(22,new rH(6,36),new rH(2,37)),new rU(26,new rH(4,20),new rH(6,21)),new rU(28,new rH(7,14),new rH(4,15))),new t(13,Int32Array.from([6,34,62]),new rU(26,new rH(4,107)),new rU(22,new rH(8,37),new rH(1,38)),new rU(24,new rH(8,20),new rH(4,21)),new rU(22,new rH(12,11),new rH(4,12))),new t(14,Int32Array.from([6,26,46,66]),new rU(30,new rH(3,115),new rH(1,116)),new rU(24,new rH(4,40),new rH(5,41)),new rU(20,new rH(11,16),new rH(5,17)),new rU(24,new rH(11,12),new rH(5,13))),new t(15,Int32Array.from([6,26,48,70]),new rU(22,new rH(5,87),new rH(1,88)),new rU(24,new rH(5,41),new rH(5,42)),new rU(30,new rH(5,24),new rH(7,25)),new rU(24,new rH(11,12),new rH(7,13))),new t(16,Int32Array.from([6,26,50,74]),new rU(24,new rH(5,98),new rH(1,99)),new rU(28,new rH(7,45),new rH(3,46)),new rU(24,new rH(15,19),new rH(2,20)),new rU(30,new rH(3,15),new rH(13,16))),new t(17,Int32Array.from([6,30,54,78]),new rU(28,new rH(1,107),new rH(5,108)),new rU(28,new rH(10,46),new rH(1,47)),new rU(28,new rH(1,22),new rH(15,23)),new rU(28,new rH(2,14),new rH(17,15))),new t(18,Int32Array.from([6,30,56,82]),new rU(30,new rH(5,120),new rH(1,121)),new rU(26,new rH(9,43),new rH(4,44)),new rU(28,new rH(17,22),new rH(1,23)),new rU(28,new rH(2,14),new rH(19,15))),new t(19,Int32Array.from([6,30,58,86]),new rU(28,new rH(3,113),new rH(4,114)),new rU(26,new rH(3,44),new rH(11,45)),new rU(26,new rH(17,21),new rH(4,22)),new rU(26,new rH(9,13),new rH(16,14))),new t(20,Int32Array.from([6,34,62,90]),new rU(28,new rH(3,107),new rH(5,108)),new rU(26,new rH(3,41),new rH(13,42)),new rU(30,new rH(15,24),new rH(5,25)),new rU(28,new rH(15,15),new rH(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new rU(28,new rH(4,116),new rH(4,117)),new rU(26,new rH(17,42)),new rU(28,new rH(17,22),new rH(6,23)),new rU(30,new rH(19,16),new rH(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new rU(28,new rH(2,111),new rH(7,112)),new rU(28,new rH(17,46)),new rU(30,new rH(7,24),new rH(16,25)),new rU(24,new rH(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new rU(30,new rH(4,121),new rH(5,122)),new rU(28,new rH(4,47),new rH(14,48)),new rU(30,new rH(11,24),new rH(14,25)),new rU(30,new rH(16,15),new rH(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new rU(30,new rH(6,117),new rH(4,118)),new rU(28,new rH(6,45),new rH(14,46)),new rU(30,new rH(11,24),new rH(16,25)),new rU(30,new rH(30,16),new rH(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new rU(26,new rH(8,106),new rH(4,107)),new rU(28,new rH(8,47),new rH(13,48)),new rU(30,new rH(7,24),new rH(22,25)),new rU(30,new rH(22,15),new rH(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new rU(28,new rH(10,114),new rH(2,115)),new rU(28,new rH(19,46),new rH(4,47)),new rU(28,new rH(28,22),new rH(6,23)),new rU(30,new rH(33,16),new rH(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new rU(30,new rH(8,122),new rH(4,123)),new rU(28,new rH(22,45),new rH(3,46)),new rU(30,new rH(8,23),new rH(26,24)),new rU(30,new rH(12,15),new rH(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new rU(30,new rH(3,117),new rH(10,118)),new rU(28,new rH(3,45),new rH(23,46)),new rU(30,new rH(4,24),new rH(31,25)),new rU(30,new rH(11,15),new rH(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new rU(30,new rH(7,116),new rH(7,117)),new rU(28,new rH(21,45),new rH(7,46)),new rU(30,new rH(1,23),new rH(37,24)),new rU(30,new rH(19,15),new rH(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new rU(30,new rH(5,115),new rH(10,116)),new rU(28,new rH(19,47),new rH(10,48)),new rU(30,new rH(15,24),new rH(25,25)),new rU(30,new rH(23,15),new rH(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new rU(30,new rH(13,115),new rH(3,116)),new rU(28,new rH(2,46),new rH(29,47)),new rU(30,new rH(42,24),new rH(1,25)),new rU(30,new rH(23,15),new rH(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new rU(30,new rH(17,115)),new rU(28,new rH(10,46),new rH(23,47)),new rU(30,new rH(10,24),new rH(35,25)),new rU(30,new rH(19,15),new rH(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new rU(30,new rH(17,115),new rH(1,116)),new rU(28,new rH(14,46),new rH(21,47)),new rU(30,new rH(29,24),new rH(19,25)),new rU(30,new rH(11,15),new rH(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new rU(30,new rH(13,115),new rH(6,116)),new rU(28,new rH(14,46),new rH(23,47)),new rU(30,new rH(44,24),new rH(7,25)),new rU(30,new rH(59,16),new rH(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new rU(30,new rH(12,121),new rH(7,122)),new rU(28,new rH(12,47),new rH(26,48)),new rU(30,new rH(39,24),new rH(14,25)),new rU(30,new rH(22,15),new rH(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new rU(30,new rH(6,121),new rH(14,122)),new rU(28,new rH(6,47),new rH(34,48)),new rU(30,new rH(46,24),new rH(10,25)),new rU(30,new rH(2,15),new rH(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new rU(30,new rH(17,122),new rH(4,123)),new rU(28,new rH(29,46),new rH(14,47)),new rU(30,new rH(49,24),new rH(10,25)),new rU(30,new rH(24,15),new rH(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new rU(30,new rH(4,122),new rH(18,123)),new rU(28,new rH(13,46),new rH(32,47)),new rU(30,new rH(48,24),new rH(14,25)),new rU(30,new rH(42,15),new rH(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new rU(30,new rH(20,117),new rH(4,118)),new rU(28,new rH(40,47),new rH(7,48)),new rU(30,new rH(43,24),new rH(22,25)),new rU(30,new rH(10,15),new rH(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new rU(30,new rH(19,118),new rH(6,119)),new rU(28,new rH(18,47),new rH(31,48)),new rU(30,new rH(34,24),new rH(34,25)),new rU(30,new rH(20,15),new rH(61,16)))],t}();!function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"}(h||(h={}));var rG=function(){function t(t,e){this.value=t,this.isMasked=e}return t.prototype.unmaskBitMatrix=function(t,e){for(var r=0;r<e;r++)for(var n=0;n<e;n++)this.isMasked(r,n)&&t.flip(n,r)},t.values=new Map([[h.DATA_MASK_000,new t(h.DATA_MASK_000,function(t,e){return(t+e&1)==0})],[h.DATA_MASK_001,new t(h.DATA_MASK_001,function(t,e){return(1&t)==0})],[h.DATA_MASK_010,new t(h.DATA_MASK_010,function(t,e){return e%3==0})],[h.DATA_MASK_011,new t(h.DATA_MASK_011,function(t,e){return(t+e)%3==0})],[h.DATA_MASK_100,new t(h.DATA_MASK_100,function(t,e){return(Math.floor(t/2)+Math.floor(e/3)&1)==0})],[h.DATA_MASK_101,new t(h.DATA_MASK_101,function(t,e){return t*e%6==0})],[h.DATA_MASK_110,new t(h.DATA_MASK_110,function(t,e){return t*e%6<3})],[h.DATA_MASK_111,new t(h.DATA_MASK_111,function(t,e){return(t+e+t*e%3&1)==0})]]),t}(),rz=function(){function t(t){var e=t.getHeight();if(e<21||(3&e)!=1)throw new to;this.bitMatrix=t}return t.prototype.readFormatInformation=function(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;for(var t=0,e=0;e<6;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var r=5;r>=0;r--)t=this.copyBit(8,r,t);for(var n=this.bitMatrix.getHeight(),o=0,i=n-7,r=n-1;r>=i;r--)o=this.copyBit(8,r,o);for(var e=n-8;e<n;e++)o=this.copyBit(e,8,o);if(this.parsedFormatInfo=rj.decodeFormatInformation(t,o),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new to},t.prototype.readVersion=function(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;var t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return rW.getVersionForNumber(e);for(var r=0,n=t-11,o=5;o>=0;o--)for(var i=t-9;i>=n;i--)r=this.copyBit(i,o,r);var a=rW.decodeVersionInformation(r);if(null!==a&&a.getDimensionForVersion()===t)return this.parsedVersion=a,a;r=0;for(var i=5;i>=0;i--)for(var o=t-9;o>=n;o--)r=this.copyBit(i,o,r);if(null!==(a=rW.decodeVersionInformation(r))&&a.getDimensionForVersion()===t)return this.parsedVersion=a,a;throw new to},t.prototype.copyBit=function(t,e,r){return(this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e))?r<<1|1:r<<1},t.prototype.readCodewords=function(){var t=this.readFormatInformation(),e=this.readVersion(),r=rG.values.get(t.getDataMask()),n=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,n);for(var o=e.buildFunctionPattern(),i=!0,a=new Uint8Array(e.getTotalCodewords()),s=0,u=0,c=0,l=n-1;l>0;l-=2){6===l&&l--;for(var h=0;h<n;h++)for(var d=i?n-1-h:h,f=0;f<2;f++)o.get(l-f,d)||(c++,u<<=1,this.bitMatrix.get(l-f,d)&&(u|=1),8!==c||(a[s++]=u,c=0,u=0));i=!i}if(s!==e.getTotalCodewords())throw new to;return a},t.prototype.remask=function(){if(null!==this.parsedFormatInfo){var t=rG.values.get(this.parsedFormatInfo.getDataMask()),e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}},t.prototype.setMirror=function(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t},t.prototype.mirror=function(){for(var t=this.bitMatrix,e=0,r=t.getWidth();e<r;e++)for(var n=e+1,o=t.getHeight();n<o;n++)t.get(e,n)!==t.get(n,e)&&(t.flip(n,e),t.flip(e,n))},t}(),rZ=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rY=function(){function t(t,e){this.numDataCodewords=t,this.codewords=e}return t.getDataBlocks=function(e,r,n){if(e.length!==r.getTotalCodewords())throw new H;var o,i,a,s,u=r.getECBlocksForLevel(n),c=0,l=u.getECBlocks();try{for(var h=rZ(l),d=h.next();!d.done;d=h.next()){var f=d.value;c+=f.getCount()}}catch(t){o={error:t}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}var p=Array(c),g=0;try{for(var y=rZ(l),m=y.next();!m.done;m=y.next())for(var f=m.value,v=0;v<f.getCount();v++){var w=f.getDataCodewords(),_=u.getECCodewordsPerBlock()+w;p[g++]=new t(w,new Uint8Array(_))}}catch(t){a={error:t}}finally{try{m&&!m.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}for(var C=p[0].codewords.length,A=p.length-1;A>=0&&p[A].codewords.length!==C;)A--;A++;for(var E=C-u.getECCodewordsPerBlock(),I=0,v=0;v<E;v++)for(var b=0;b<g;b++)p[b].codewords[v]=e[I++];for(var b=A;b<g;b++)p[b].codewords[E]=e[I++];for(var S=p[0].codewords.length,v=E;v<S;v++)for(var b=0;b<g;b++){var N=b<A?v:v+1;p[b].codewords[N]=e[I++]}return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}();!function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"}(d||(d={}));var rK=function(){function t(e,r,n,o){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=o,t.FOR_BITS.set(o,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(void 0===r)throw new H;return r},t.prototype.getCharacterCountBits=function(t){var e=t.getVersionNumber();return this.characterCountBitsForVersions[e<=9?0:e<=26?1:2]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){return e instanceof t&&this.value===e.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(d.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(d.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(d.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(d.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(d.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(d.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(d.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(d.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(d.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(d.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),r$=function(){function t(){}return t.decode=function(e,r,n,o){var i=new rO(e),a=new th,s=[],u=-1,c=-1;try{var l=null,h=!1,d=void 0;do{if(4>i.available())d=rK.TERMINATOR;else{var f=i.readBits(4);d=rK.forBits(f)}switch(d){case rK.TERMINATOR:break;case rK.FNC1_FIRST_POSITION:case rK.FNC1_SECOND_POSITION:h=!0;break;case rK.STRUCTURED_APPEND:if(16>i.available())throw new to;u=i.readBits(8),c=i.readBits(8);break;case rK.ECI:var p=t.parseECIValue(i);if(l=ta.getCharacterSetECIByValue(p),null===l)throw new to;break;case rK.HANZI:var g=i.readBits(4),y=i.readBits(d.getCharacterCountBits(r));g===t.GB2312_SUBSET&&t.decodeHanziSegment(i,a,y);break;default:var m=i.readBits(d.getCharacterCountBits(r));switch(d){case rK.NUMERIC:t.decodeNumericSegment(i,a,m);break;case rK.ALPHANUMERIC:t.decodeAlphanumericSegment(i,a,m,h);break;case rK.BYTE:t.decodeByteSegment(i,a,m,l,s,o);break;case rK.KANJI:t.decodeKanjiSegment(i,a,m);break;default:throw new to}}}while(d!==rK.TERMINATOR)}catch(t){throw new to}return new tD(e,a.toString(),0===s.length?null:s,null===n?null:n.toString(),u,c)},t.decodeHanziSegment=function(t,e,r){if(13*r>t.available())throw new to;for(var n=new Uint8Array(2*r),o=0;r>0;){var i=t.readBits(13),a=i/96<<8&4294967295|i%96;a<959?a+=41377:a+=42657,n[o]=a>>8&255,n[o+1]=255&a,o+=2,r--}try{e.append(tc.decode(n,tl.GB2312))}catch(t){throw new to(t)}},t.decodeKanjiSegment=function(t,e,r){if(13*r>t.available())throw new to;for(var n=new Uint8Array(2*r),o=0;r>0;){var i=t.readBits(13),a=i/192<<8&4294967295|i%192;a<7936?a+=33088:a+=49472,n[o]=a>>8,n[o+1]=a,o+=2,r--}try{e.append(tc.decode(n,tl.SHIFT_JIS))}catch(t){throw new to(t)}},t.decodeByteSegment=function(t,e,r,n,o,i){if(8*r>t.available())throw new to;for(var a,s=new Uint8Array(r),u=0;u<r;u++)s[u]=t.readBits(8);a=null===n?tl.guessEncoding(s,i):n.getName();try{e.append(tc.decode(s,a))}catch(t){throw new to(t)}o.push(s)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new to;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,o){for(var i=r.length();n>1;){if(11>e.available())throw new to;var a=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(a/45))),r.append(t.toAlphaNumericChar(a%45)),n-=2}if(1===n){if(6>e.available())throw new to;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(o)for(var s=i;s<r.length();s++)"%"===r.charAt(s)&&(s<r.length()-1&&"%"===r.charAt(s+1)?r.deleteCharAt(s+1):r.setCharAt(s,"\x1d"))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(10>e.available())throw new to;var o=e.readBits(10);if(o>=1e3)throw new to;r.append(t.toAlphaNumericChar(Math.floor(o/100))),r.append(t.toAlphaNumericChar(Math.floor(o/10)%10)),r.append(t.toAlphaNumericChar(o%10)),n-=3}if(2===n){if(7>e.available())throw new to;var i=e.readBits(7);if(i>=100)throw new to;r.append(t.toAlphaNumericChar(Math.floor(i/10))),r.append(t.toAlphaNumericChar(i%10))}else if(1===n){if(4>e.available())throw new to;var a=e.readBits(4);if(a>=10)throw new to;r.append(t.toAlphaNumericChar(a))}},t.parseECIValue=function(t){var e=t.readBits(8);if((128&e)==0)return 127&e;if((192&e)==128)return(63&e)<<8&4294967295|t.readBits(8);if((224&e)==192)return(31&e)<<16&4294967295|t.readBits(16);throw new to},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),rq=function(){function t(t){this.mirrored=t}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(t){if(this.mirrored&&null!==t&&!(t.length<3)){var e=t[0];t[0]=t[2],t[2]=e}},t}(),rJ=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rQ=function(){function t(){this.rsDecoder=new tX(tF.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(t,e){return this.decodeBitMatrix(td.parseFromBooleanArray(t),e)},t.prototype.decodeBitMatrix=function(t,e){var r=new rz(t),n=null;try{return this.decodeBitMatrixParser(r,e)}catch(t){n=t}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,e);return o.setOther(new rq(!0)),o}catch(t){if(null!==n)throw n;throw t}},t.prototype.decodeBitMatrixParser=function(t,e){var r,n,o,i,a=t.readVersion(),s=t.readFormatInformation().getErrorCorrectionLevel(),u=t.readCodewords(),c=rY.getDataBlocks(u,a,s),l=0;try{for(var h=rJ(c),d=h.next();!d.done;d=h.next()){var f=d.value;l+=f.getNumDataCodewords()}}catch(t){r={error:t}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}var p=new Uint8Array(l),g=0;try{for(var y=rJ(c),m=y.next();!m.done;m=y.next()){var f=m.value,v=f.getCodewords(),w=f.getNumDataCodewords();this.correctErrors(v,w);for(var _=0;_<w;_++)p[g++]=v[_]}}catch(t){o={error:t}}finally{try{m&&!m.done&&(i=y.return)&&i.call(y)}finally{if(o)throw o.error}}return r$.decode(p,a,s,e)},t.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch(t){throw new G}for(var n=0;n<e;n++)t[n]=r[n]},t}(),r1=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),r0=function(t){function e(e,r,n){var o=t.call(this,e,r)||this;return o.estimatedModuleSize=n,o}return r1(e,t),e.prototype.aboutEquals=function(t,e,r){if(Math.abs(e-this.getY())<=t&&Math.abs(r-this.getX())<=t){var n=Math.abs(t-this.estimatedModuleSize);return n<=1||n<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,n){return new e((this.getX()+r)/2,(this.getY()+t)/2,(this.estimatedModuleSize+n)/2)},e}(tZ),r2=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r4=function(){function t(t,e,r,n,o,i,a){this.image=t,this.startX=e,this.startY=r,this.width=n,this.height=o,this.moduleSize=i,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var t=this.startX,e=this.height,r=t+this.width,n=this.startY+e/2,o=new Int32Array(3),i=this.image,a=0;a<e;a++){var s=n+((1&a)==0?Math.floor((a+1)/2):-Math.floor((a+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var u=t;u<r&&!i.get(u,s);)u++;for(var c=0;u<r;){if(i.get(u,s)){if(1===c)o[1]++;else if(2===c){if(this.foundPatternCross(o)){var l=this.handlePossibleCenter(o,s,u);if(null!==l)return l}o[0]=o[2],o[1]=1,o[2]=0,c=1}else o[++c]++}else 1===c&&c++,o[c]++;u++}if(this.foundPatternCross(o)){var l=this.handlePossibleCenter(o,s,r);if(null!==l)return l}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new tp},t.centerFromEnd=function(t,e){return e-t[2]-t[1]/2},t.prototype.foundPatternCross=function(t){for(var e=this.moduleSize,r=e/2,n=0;n<3;n++)if(Math.abs(e-t[n])>=r)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,o){var i=this.image,a=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var u=e;u>=0&&i.get(r,u)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&!i.get(r,u)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<a&&i.get(r,u)&&s[1]<=n;)s[1]++,u++;if(u===a||s[1]>n)return NaN;for(;u<a&&!i.get(r,u)&&s[2]<=n;)s[2]++,u++;return s[2]>n||5*Math.abs(s[0]+s[1]+s[2]-o)>=2*o?NaN:this.foundPatternCross(s)?t.centerFromEnd(s,u):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var o,i,a=e[0]+e[1]+e[2],s=t.centerFromEnd(e,n),u=this.crossCheckVertical(r,s,2*e[1],a);if(!isNaN(u)){var c=(e[0]+e[1]+e[2])/3;try{for(var l=r2(this.possibleCenters),h=l.next();!h.done;h=l.next()){var d=h.value;if(d.aboutEquals(c,u,s))return d.combineEstimate(u,s,c)}}catch(t){o={error:t}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}var f=new r0(s,u,c);this.possibleCenters.push(f),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(f)}return null},t}(),r3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),r6=function(t){function e(e,r,n,o){var i=t.call(this,e,r)||this;return i.estimatedModuleSize=n,i.count=o,void 0===o&&(i.count=1),i}return r3(e,t),e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,e,r){if(Math.abs(e-this.getY())<=t&&Math.abs(r-this.getX())<=t){var n=Math.abs(t-this.estimatedModuleSize);return n<=1||n<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,n){var o=this.count+1;return new e((this.count*this.getX()+r)/o,(this.count*this.getY()+t)/o,(this.count*this.estimatedModuleSize+n)/o,o)},e}(tZ),r8=function(){function t(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),r5=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r9=function(){function t(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=null!=e&&void 0!==e.get(tr.TRY_HARDER),n=null!=e&&void 0!==e.get(tr.PURE_BARCODE),o=this.image,i=o.getHeight(),a=o.getWidth(),s=Math.floor(3*i/(4*t.MAX_MODULES));(s<t.MIN_SKIP||r)&&(s=t.MIN_SKIP);for(var u=!1,c=new Int32Array(5),l=s-1;l<i&&!u;l+=s){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;for(var h=0,d=0;d<a;d++)if(o.get(d,l))(1&h)==1&&h++,c[h]++;else if((1&h)==0){if(4===h){if(t.foundPatternCross(c)){var f=this.handlePossibleCenter(c,l,d,n);if(!0===f){if(s=2,!0===this.hasSkipped)u=this.haveMultiplyConfirmedCenters();else{var p=this.findRowSkip();p>c[2]&&(l+=p-c[2]-s,d=a-1)}}else{c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,h=3;continue}h=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,h=3}else c[++h]++}else c[h]++;if(t.foundPatternCross(c)){var f=this.handlePossibleCenter(c,l,a,n);!0===f&&(s=c[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}}var g=this.selectBestPatterns();return tZ.orderBestPatterns(g),new r8(g)},t.centerFromEnd=function(t,e){return e-t[4]-t[3]-t[2]/2},t.foundPatternCross=function(t){for(var e=0,r=0;r<5;r++){var n=t[r];if(0===n)return!1;e+=n}if(e<7)return!1;var o=e/7,i=o/2;return Math.abs(o-t[0])<i&&Math.abs(o-t[1])<i&&Math.abs(3*o-t[2])<3*i&&Math.abs(o-t[3])<i&&Math.abs(o-t[4])<i},t.prototype.getCrossCheckStateCount=function(){var t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},t.prototype.crossCheckDiagonal=function(e,r,n,o){for(var i=this.getCrossCheckStateCount(),a=0,s=this.image;e>=a&&r>=a&&s.get(r-a,e-a);)i[2]++,a++;if(e<a||r<a)return!1;for(;e>=a&&r>=a&&!s.get(r-a,e-a)&&i[1]<=n;)i[1]++,a++;if(e<a||r<a||i[1]>n)return!1;for(;e>=a&&r>=a&&s.get(r-a,e-a)&&i[0]<=n;)i[0]++,a++;if(i[0]>n)return!1;var u=s.getHeight(),c=s.getWidth();for(a=1;e+a<u&&r+a<c&&s.get(r+a,e+a);)i[2]++,a++;if(e+a>=u||r+a>=c)return!1;for(;e+a<u&&r+a<c&&!s.get(r+a,e+a)&&i[3]<n;)i[3]++,a++;if(e+a>=u||r+a>=c||i[3]>=n)return!1;for(;e+a<u&&r+a<c&&s.get(r+a,e+a)&&i[4]<n;)i[4]++,a++;return!(i[4]>=n)&&Math.abs(i[0]+i[1]+i[2]+i[3]+i[4]-o)<2*o&&t.foundPatternCross(i)},t.prototype.crossCheckVertical=function(e,r,n,o){for(var i=this.image,a=i.getHeight(),s=this.getCrossCheckStateCount(),u=e;u>=0&&i.get(r,u);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(r,u)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&i.get(r,u)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<a&&i.get(r,u);)s[2]++,u++;if(u===a)return NaN;for(;u<a&&!i.get(r,u)&&s[3]<n;)s[3]++,u++;if(u===a||s[3]>=n)return NaN;for(;u<a&&i.get(r,u)&&s[4]<n;)s[4]++,u++;return s[4]>=n||5*Math.abs(s[0]+s[1]+s[2]+s[3]+s[4]-o)>=2*o?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,u):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,o){for(var i=this.image,a=i.getWidth(),s=this.getCrossCheckStateCount(),u=e;u>=0&&i.get(u,r);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(u,r)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&i.get(u,r)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<a&&i.get(u,r);)s[2]++,u++;if(u===a)return NaN;for(;u<a&&!i.get(u,r)&&s[3]<n;)s[3]++,u++;if(u===a||s[3]>=n)return NaN;for(;u<a&&i.get(u,r)&&s[4]<n;)s[4]++,u++;return s[4]>=n||5*Math.abs(s[0]+s[1]+s[2]+s[3]+s[4]-o)>=o?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,u):NaN},t.prototype.handlePossibleCenter=function(e,r,n,o){var i=e[0]+e[1]+e[2]+e[3]+e[4],a=t.centerFromEnd(e,n),s=this.crossCheckVertical(r,Math.floor(a),e[2],i);if(!isNaN(s)&&!isNaN(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(s),e[2],i))&&(!o||this.crossCheckDiagonal(Math.floor(s),Math.floor(a),e[2],i))){for(var u=i/7,c=!1,l=this.possibleCenters,h=0,d=l.length;h<d;h++){var f=l[h];if(f.aboutEquals(u,s,a)){l[h]=f.combineEstimate(s,a,u),c=!0;break}}if(!c){var p=new r6(a,s,u);l.push(p),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1},t.prototype.findRowSkip=function(){if(this.possibleCenters.length<=1)return 0;var e,r,n=null;try{for(var o=r5(this.possibleCenters),i=o.next();!i.done;i=o.next()){var a=i.value;if(a.getCount()>=t.CENTER_QUORUM){if(null!=n)return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-a.getX())-Math.abs(n.getY()-a.getY()))/2);n=a}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,o,i=0,a=0,s=this.possibleCenters.length;try{for(var u=r5(this.possibleCenters),c=u.next();!c.done;c=u.next()){var l=c.value;l.getCount()>=t.CENTER_QUORUM&&(i++,a+=l.getEstimatedModuleSize())}}catch(t){e={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}if(i<3)return!1;var h=a/s,d=0;try{for(var f=r5(this.possibleCenters),p=f.next();!p.done;p=f.next()){var l=p.value;d+=Math.abs(l.getEstimatedModuleSize()-h)}}catch(t){n={error:t}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}return d<=.05*a},t.prototype.selectBestPatterns=function(){var t,e,r,n,o,i=this.possibleCenters.length;if(i<3)throw new tp;var a=this.possibleCenters;if(i>3){var s=0,u=0;try{for(var c=r5(this.possibleCenters),l=c.next();!l.done;l=c.next()){var h=l.value.getEstimatedModuleSize();s+=h,u+=h*h}}catch(e){t={error:e}}finally{try{l&&!l.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}o=s/i;var d=Math.sqrt(u/i-o*o);a.sort(function(t,e){var r=Math.abs(e.getEstimatedModuleSize()-o),n=Math.abs(t.getEstimatedModuleSize()-o);return r<n?-1:r>n?1:0});for(var f=Math.max(.2*o,d),p=0;p<a.length&&a.length>3;p++)Math.abs(a[p].getEstimatedModuleSize()-o)>f&&(a.splice(p,1),p--)}if(a.length>3){var s=0;try{for(var g=r5(a),y=g.next();!y.done;y=g.next()){var m=y.value;s+=m.getEstimatedModuleSize()}}catch(t){r={error:t}}finally{try{y&&!y.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}o=s/a.length,a.sort(function(t,e){if(e.getCount()!==t.getCount())return e.getCount()-t.getCount();var r=Math.abs(e.getEstimatedModuleSize()-o),n=Math.abs(t.getEstimatedModuleSize()-o);return r<n?1:r>n?-1:0}),a.splice(3)}return[a[0],a[1],a[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),r7=function(){function t(t){this.image=t}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(t){this.resultPointCallback=null==t?null:t.get(tr.NEED_RESULT_POINT_CALLBACK);var e=new r9(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(e)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),o=e.getBottomLeft(),i=this.calculateModuleSize(r,n,o);if(i<1)throw new tp("No pattern found in proccess finder.");var a=t.computeDimension(r,n,o,i),s=rW.getProvisionalVersionForDimension(a),u=s.getDimensionForVersion()-7,c=null;if(s.getAlignmentPatternCenters().length>0)for(var l=n.getX()-r.getX()+o.getX(),h=n.getY()-r.getY()+o.getY(),d=1-3/u,f=Math.floor(r.getX()+d*(l-r.getX())),p=Math.floor(r.getY()+d*(h-r.getY())),g=4;g<=16;g<<=1)try{c=this.findAlignmentInRegion(i,f,p,g);break}catch(t){if(!(t instanceof tp))throw t}var y=t.createTransform(r,n,o,c,a);return new tY(t.sampleGrid(this.image,y,a),null===c?[o,r,n]:[o,r,n,c])},t.createTransform=function(t,e,r,n,o){var i,a,s,u,c=o-3.5;return null!==n?(i=n.getX(),a=n.getY(),u=s=c-3):(i=e.getX()-t.getX()+r.getX(),a=e.getY()-t.getY()+r.getY(),s=c,u=c),tQ.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,s,u,3.5,c,t.getX(),t.getY(),e.getX(),e.getY(),i,a,r.getX(),r.getY())},t.sampleGrid=function(t,e,r){return t2.getInstance().sampleGridWithTransform(t,r,r,e)},t.computeDimension=function(t,e,r,n){var o=Math.floor((tG.round(tZ.distance(t,e)/n)+tG.round(tZ.distance(t,r)/n))/2)+7;switch(3&o){case 0:o++;break;case 2:o--;break;case 3:throw new tp("Dimensions could be not found.")}return o},t.prototype.calculateModuleSize=function(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2},t.prototype.calculateModuleSizeOneWay=function(t,e){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?n/7:isNaN(n)?r/7:(r+n)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,e,r,n){var o=this.sizeOfBlackWhiteBlackRun(t,e,r,n),i=1,a=t-(r-t);a<0?(i=t/(t-a),a=0):a>=this.image.getWidth()&&(i=(this.image.getWidth()-1-t)/(a-t),a=this.image.getWidth()-1);var s=Math.floor(e-(n-e)*i);return i=1,s<0?(i=e/(e-s),s=0):s>=this.image.getHeight()&&(i=(this.image.getHeight()-1-e)/(s-e),s=this.image.getHeight()-1),a=Math.floor(t+(a-t)*i),(o+=this.sizeOfBlackWhiteBlackRun(t,e,a,s))-1},t.prototype.sizeOfBlackWhiteBlackRun=function(t,e,r,n){var o=Math.abs(n-e)>Math.abs(r-t);if(o){var i=t;t=e,e=i,i=r,r=n,n=i}for(var a=Math.abs(r-t),s=Math.abs(n-e),u=-a/2,c=t<r?1:-1,l=e<n?1:-1,h=0,d=r+c,f=t,p=e;f!==d;f+=c){var g=o?p:f,y=o?f:p;if(1===h===this.image.get(g,y)){if(2===h)return tG.distance(f,p,t,e);h++}if((u+=s)>0){if(p===n)break;p+=l,u-=a}}return 2===h?tG.distance(r+c,n,t,e):NaN},t.prototype.findAlignmentInRegion=function(t,e,r,n){var o=Math.floor(n*t),i=Math.max(0,e-o),a=Math.min(this.image.getWidth()-1,e+o);if(a-i<3*t)throw new tp("Alignment top exceeds estimated module size.");var s=Math.max(0,r-o),u=Math.min(this.image.getHeight()-1,r+o);if(u-s<3*t)throw new tp("Alignment bottom exceeds estimated module size.");return new r4(this.image,i,s,a-i,u-s,t,this.resultPointCallback).find()},t}(),nt=function(){function t(){this.decoder=new rQ}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){if(null!=r&&void 0!==r.get(tr.PURE_BARCODE)){var n,o,i=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,r),o=t.NO_POINTS}else{var a=new r7(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(a.getBits(),r),o=a.getPoints()}n.getOther() instanceof rq&&n.getOther().applyMirroredCorrection(o);var s=new tx(n.getText(),n.getRawBytes(),void 0,o,tO.QR_CODE,void 0),u=n.getByteSegments();null!==u&&s.putMetadata(tR.BYTE_SEGMENTS,u);var c=n.getECLevel();return null!==c&&s.putMetadata(tR.ERROR_CORRECTION_LEVEL,c),n.hasStructuredAppend()&&(s.putMetadata(tR.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(tR.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},t.prototype.reset=function(){},t.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(null===e||null===r)throw new tp;var n=this.moduleSize(e,t),o=e[1],i=r[1],a=e[0],s=r[0];if(a>=s||o>=i||i-o!=s-a&&(s=a+(i-o))>=t.getWidth())throw new tp;var u=Math.round((s-a+1)/n),c=Math.round((i-o+1)/n);if(u<=0||c<=0||c!==u)throw new tp;var l=Math.floor(n/2);o+=l;var h=(a+=l)+Math.floor((u-1)*n)-s;if(h>0){if(h>l)throw new tp;a-=h}var d=o+Math.floor((c-1)*n)-i;if(d>0){if(d>l)throw new tp;o-=d}for(var f=new td(u,c),p=0;p<c;p++)for(var g=o+Math.floor(p*n),y=0;y<u;y++)t.get(a+Math.floor(y*n),g)&&f.set(y,p);return f},t.moduleSize=function(t,e){for(var r=e.getHeight(),n=e.getWidth(),o=t[0],i=t[1],a=!0,s=0;o<n&&i<r;){if(a!==e.get(o,i)){if(5==++s)break;a=!a}o++,i++}if(o===n||i===r)throw new tp;return(o-t[0])/7},t.NO_POINTS=[],t}(),ne=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nr=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(t){return tG.sum(t)},t.toIntArray=function(e){if(null==e||!e.length)return t.EMPTY_INT_ARRAY;var r,n,o=new Int32Array(e.length),i=0;try{for(var a=ne(e),s=a.next();!s.done;s=a.next()){var u=s.value;o[i++]=u}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t.getCodeword=function(e){var r=Q.binarySearch(t.SYMBOL_TABLE,262143&e);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),nn=function(){function t(t,e){this.bits=t,this.points=e}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),no=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ni=function(){function t(){}return t.detectMultiple=function(e,r,n){var o=e.getBlackMatrix(),i=t.detect(n,o);return i.length||((o=o.clone()).rotate180(),i=t.detect(n,o)),new nn(o,i)},t.detect=function(e,r){for(var n,o,i=[],a=0,s=0,u=!1;a<r.getHeight();){var c=t.findVertices(r,a,s);if(null==c[0]&&null==c[3]){if(!u)break;u=!1,s=0;try{for(var l=(n=void 0,no(i)),h=l.next();!h.done;h=l.next()){var d=h.value;null!=d[1]&&(a=Math.trunc(Math.max(a,d[1].getY()))),null!=d[3]&&(a=Math.max(a,Math.trunc(d[3].getY())))}}catch(t){n={error:t}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}a+=t.ROW_STEP;continue}if(u=!0,i.push(c),!e)break;null!=c[2]?(s=Math.trunc(c[2].getX()),a=Math.trunc(c[2].getY())):(s=Math.trunc(c[4].getX()),a=Math.trunc(c[4].getY()))}return i},t.findVertices=function(e,r,n){var o=e.getHeight(),i=e.getWidth(),a=Array(8);return t.copyToResult(a,t.findRowsWithPattern(e,o,i,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),null!=a[4]&&(n=Math.trunc(a[4].getX()),r=Math.trunc(a[4].getY())),t.copyToResult(a,t.findRowsWithPattern(e,o,i,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),a},t.copyToResult=function(t,e,r){for(var n=0;n<r.length;n++)t[r[n]]=e[n]},t.findRowsWithPattern=function(e,r,n,o,i,a){for(var s=[,,,,],u=!1,c=new Int32Array(a.length);o<r;o+=t.ROW_STEP){var l=t.findGuardPattern(e,i,o,n,!1,a,c);if(null!=l){for(;o>0;){var h=t.findGuardPattern(e,i,--o,n,!1,a,c);if(null!=h)l=h;else{o++;break}}s[0]=new tZ(l[0],o),s[1]=new tZ(l[1],o),u=!0;break}}var d=o+1;if(u){for(var f=0,h=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);d<r;d++){var l=t.findGuardPattern(e,h[0],d,n,!1,a,c);if(null!=l&&Math.abs(h[0]-l[0])<t.MAX_PATTERN_DRIFT&&Math.abs(h[1]-l[1])<t.MAX_PATTERN_DRIFT)h=l,f=0;else{if(f>t.SKIPPED_ROW_COUNT_MAX)break;f++}}d-=f+1,s[2]=new tZ(h[0],d),s[3]=new tZ(h[1],d)}return d-o<t.BARCODE_MIN_HEIGHT&&Q.fill(s,null),s},t.findGuardPattern=function(e,r,n,o,i,a,s){Q.fillWithin(s,0,s.length,0);for(var u=r,c=0;e.get(u,n)&&u>0&&c++<t.MAX_PIXEL_DRIFT;)u--;for(var l=u,h=0,d=a.length,f=i;l<o;l++)if(e.get(l,n)!==f)s[h]++;else{if(h===d-1){if(t.patternMatchVariance(s,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([u,l]);u+=s[0]+s[1],Z.arraycopy(s,2,s,0,h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,f=!f}return h===d-1&&t.patternMatchVariance(s,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([u,l-1]):null},t.patternMatchVariance=function(t,e,r){for(var n=t.length,o=0,i=0,a=0;a<n;a++)o+=t[a],i+=e[a];if(o<i)return 1/0;var s=o/i;r*=s;for(var u=0,c=0;c<n;c++){var l=t[c],h=e[c]*s,d=l>h?l-h:h-l;if(d>r)return 1/0;u+=d}return u/o},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),na=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ns=function(){function t(t,e){if(0===e.length)throw new H;this.field=t;var r=e.length;if(r>1&&0===e[0]){for(var n=1;n<r&&0===e[n];)n++;n===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-n),Z.arraycopy(e,n,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return 0===this.coefficients[0]},t.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},t.prototype.evaluateAt=function(t){if(0===t)return this.getCoefficient(0);if(1===t){var e,r,n=0;try{for(var o=na(this.coefficients),i=o.next();!i.done;i=o.next()){var a=i.value;n=this.field.add(n,a)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n}for(var s=this.coefficients[0],u=this.coefficients.length,c=1;c<u;c++)s=this.field.add(this.field.multiply(t,s),this.coefficients[c]);return s},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new H("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var o=r;r=n,n=o}var i=new Int32Array(n.length),a=n.length-r.length;Z.arraycopy(n,0,i,0,a);for(var s=a;s<n.length;s++)i[s]=this.field.add(r[s-a],n[s]);return new t(this.field,i)},t.prototype.subtract=function(t){if(!this.field.equals(t.field))throw new H("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new H("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,o=e.coefficients,i=o.length,a=new Int32Array(n+i-1),s=0;s<n;s++)for(var u=r[s],c=0;c<i;c++)a[s+c]=this.field.add(a[s+c],this.field.multiply(u,o[c]));return new t(this.field,a)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(0===e)return new t(this.field,new Int32Array([0]));if(1===e)return this;for(var r=this.coefficients.length,n=new Int32Array(r),o=0;o<r;o++)n[o]=this.field.multiply(this.coefficients[o],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new H;if(0===r)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,o=new Int32Array(n+e),i=0;i<n;i++)o[i]=this.field.multiply(this.coefficients[i],r);return new t(this.field,o)},t.prototype.toString=function(){for(var t=new th,e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);0!==r&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),(0===e||1!==r)&&t.append(r),0!==e&&(1===e?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()},t}(),nu=function(){function t(){}return t.prototype.add=function(t,e){return(t+e)%this.modulus},t.prototype.subtract=function(t,e){return(this.modulus+t-e)%this.modulus},t.prototype.exp=function(t){return this.expTable[t]},t.prototype.log=function(t){if(0===t)throw new H;return this.logTable[t]},t.prototype.inverse=function(t){if(0===t)throw new tk;return this.expTable[this.modulus-this.logTable[t]-1]},t.prototype.multiply=function(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(t){return t===this},t}(),nc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nl=function(t){function e(e,r){var n=t.call(this)||this;n.modulus=e,n.expTable=new Int32Array(e),n.logTable=new Int32Array(e);for(var o=1,i=0;i<e;i++)n.expTable[i]=o,o=o*r%e;for(var i=0;i<e-1;i++)n.logTable[n.expTable[i]]=i;return n.zero=new ns(n,new Int32Array([0])),n.one=new ns(n,new Int32Array([1])),n}return nc(e,t),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,e){if(t<0)throw new H;if(0===e)return this.zero;var r=new Int32Array(t+1);return r[0]=e,new ns(this,r)},e.PDF417_GF=new e(nr.NUMBER_OF_CODEWORDS,3),e}(nu),nh=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nd=function(){function t(){this.field=nl.PDF417_GF}return t.prototype.decode=function(t,e,r){for(var n,o,i=new ns(this.field,t),a=new Int32Array(e),s=!1,u=e;u>0;u--){var c=i.evaluateAt(this.field.exp(u));a[e-u]=c,0!==c&&(s=!0)}if(!s)return 0;var l=this.field.getOne();if(null!=r)try{for(var h=nh(r),d=h.next();!d.done;d=h.next()){var f=d.value,p=this.field.exp(t.length-1-f),g=new ns(this.field,new Int32Array([this.field.subtract(0,p),1]));l=l.multiply(g)}}catch(t){n={error:t}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}for(var y=new ns(this.field,a),m=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),y,e),v=m[0],w=m[1],_=this.findErrorLocations(v),C=this.findErrorMagnitudes(w,v,_),u=0;u<_.length;u++){var A=t.length-1-this.field.log(_[u]);if(A<0)throw G.getChecksumInstance();t[A]=this.field.subtract(t[A],C[u])}return _.length},t.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var n=t;t=e,e=n}for(var o=t,i=e,a=this.field.getZero(),s=this.field.getOne();i.getDegree()>=Math.round(r/2);){var u=o,c=a;if(o=i,a=s,o.isZero())throw G.getChecksumInstance();i=u;for(var l=this.field.getZero(),h=o.getCoefficient(o.getDegree()),d=this.field.inverse(h);i.getDegree()>=o.getDegree()&&!i.isZero();){var f=i.getDegree()-o.getDegree(),p=this.field.multiply(i.getCoefficient(i.getDegree()),d);l=l.add(this.field.buildMonomial(f,p)),i=i.subtract(o.multiplyByMonomial(f,p))}s=l.multiply(a).subtract(c).negative()}var g=s.getCoefficient(0);if(0===g)throw G.getChecksumInstance();var y=this.field.inverse(g);return[s.multiply(y),i.multiply(y)]},t.prototype.findErrorLocations=function(t){for(var e=t.getDegree(),r=new Int32Array(e),n=0,o=1;o<this.field.getSize()&&n<e;o++)0===t.evaluateAt(o)&&(r[n]=this.field.inverse(o),n++);if(n!==e)throw G.getChecksumInstance();return r},t.prototype.findErrorMagnitudes=function(t,e,r){for(var n=e.getDegree(),o=new Int32Array(n),i=1;i<=n;i++)o[n-i]=this.field.multiply(i,e.getCoefficient(i));for(var a=new ns(this.field,o),s=r.length,u=new Int32Array(s),i=0;i<s;i++){var c=this.field.inverse(r[i]),l=this.field.subtract(0,t.evaluateAt(c)),h=this.field.inverse(a.evaluateAt(c));u[i]=this.field.multiply(l,h)}return u},t}(),nf=function(){function t(e,r,n,o,i){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,o,i)}return t.prototype.constructor_1=function(t,e,r,n,o){var i=null==e||null==r,a=null==n||null==o;if(i&&a)throw new tp;i?(e=new tZ(0,n.getY()),r=new tZ(0,o.getY())):a&&(n=new tZ(t.getWidth()-1,e.getY()),o=new tZ(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=e,this.bottomLeft=r,this.topRight=n,this.bottomRight=o,this.minX=Math.trunc(Math.min(e.getX(),r.getX())),this.maxX=Math.trunc(Math.max(n.getX(),o.getX())),this.minY=Math.trunc(Math.min(e.getY(),n.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},t.prototype.constructor_2=function(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()},t.merge=function(e,r){return null==e?r:null==r?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var o=this.topLeft,i=this.bottomLeft,a=this.topRight,s=this.bottomRight;if(e>0){var u=n?this.topLeft:this.topRight,c=Math.trunc(u.getY()-e);c<0&&(c=0);var l=new tZ(u.getX(),c);n?o=l:a=l}if(r>0){var h=n?this.bottomLeft:this.bottomRight,d=Math.trunc(h.getY()+r);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var f=new tZ(h.getX(),d);n?i=f:s=f}return new t(this.image,o,i,a,s)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),np=function(){function t(t,e,r,n){this.columnCount=t,this.errorCorrectionLevel=n,this.rowCountUpperPart=e,this.rowCountLowerPart=r,this.rowCount=e+r}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),ng=function(){function t(){this.buffer=""}return t.form=function(t,e){var r=-1;return t.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(t,n,o,i,a,s){if("%%"===t)return"%";if(void 0!==e[++r]){t=i?parseInt(i.substr(1)):void 0;var u,c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":u=e[r];break;case"c":u=e[r][0];break;case"f":u=parseFloat(e[r]).toFixed(t);break;case"p":u=parseFloat(e[r]).toPrecision(t);break;case"e":u=parseFloat(e[r]).toExponential(t);break;case"x":u=parseInt(e[r]).toString(c||16);break;case"d":u=parseFloat(parseInt(e[r],c||10).toPrecision(t)).toFixed(0)}u="object"==typeof u?JSON.stringify(u):(+u).toString(c);for(var l=parseInt(o),h=o&&o[0]+""=="0"?"0":" ";u.length<l;)u=void 0!==n?u+h:h+u;return u}})},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),ny=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nm=function(){function t(t){this.boundingBox=new nf(t),this.codewords=Array(t.getMaxY()-t.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(null!=r)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var o=this.imageRowToCodewordIndex(e)-n;if(o>=0&&null!=(r=this.codewords[o])||(o=this.imageRowToCodewordIndex(e)+n)<this.codewords.length&&null!=(r=this.codewords[o]))return r}return null},t.prototype.imageRowToCodewordIndex=function(t){return t-this.boundingBox.getMinY()},t.prototype.setCodeword=function(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e},t.prototype.getCodeword=function(t){return this.codewords[this.imageRowToCodewordIndex(t)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var t,e,r=new ng,n=0;try{for(var o=ny(this.codewords),i=o.next();!i.done;i=o.next()){var a=i.value;if(null==a){r.format("%3d:    |   %n",n++);continue}r.format("%3d: %3d|%3d%n",n++,a.getRowNumber(),a.getValue())}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),nv=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nw=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},n_=function(){function t(){this.values=new Map}return t.prototype.setValue=function(t){t=Math.trunc(t);var e=this.values.get(t);null==e&&(e=0),e++,this.values.set(t,e)},t.prototype.getValue=function(){var t,e,r=-1,n=[],o=function(t,e){var o={getKey:function(){return t},getValue:function(){return e}};o.getValue()>r?(r=o.getValue(),(n=[]).push(o.getKey())):o.getValue()===r&&n.push(o.getKey())};try{for(var i=nv(this.values.entries()),a=i.next();!a.done;a=i.next()){var s=nw(a.value,2),u=s[0],c=s[1];o(u,c)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return nr.toIntArray(n)},t.prototype.getConfidence=function(t){return this.values.get(t)},t}(),nC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nA=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nE=function(t){function e(e,r){var n=t.call(this,e)||this;return n._isLeft=r,n}return nC(e,t),e.prototype.setRowNumbers=function(){var t,e;try{for(var r=nA(this.getCodewords()),n=r.next();!n.done;n=r.next()){var o=n.value;null!=o&&o.setRowNumberAsRowIndicatorColumn()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var e=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(e,t);for(var r=this.getBoundingBox(),n=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),s=-1,u=1,c=0,l=i;l<a;l++)if(null!=e[l]){var h=e[l],d=h.getRowNumber()-s;if(0===d)c++;else if(1===d)u=Math.max(u,c),c=1,s=h.getRowNumber();else if(d<0||h.getRowNumber()>=t.getRowCount()||d>l)e[l]=null;else{for(var f=void 0,p=(f=u>2?(u-2)*d:d)>=l,g=1;g<=f&&!p;g++)p=null!=e[l-g];p?e[l]=null:(s=h.getRowNumber(),c=1)}}},e.prototype.getRowHeights=function(){var t,e,r=this.getBarcodeMetadata();if(null==r)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);var n=new Int32Array(r.getRowCount());try{for(var o=nA(this.getCodewords()),i=o.next();!i.done;i=o.next()){var a=i.value;if(null!=a){var s=a.getRowNumber();if(s>=n.length)continue;n[s]++}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return n},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var e=this.getBoundingBox(),r=this._isLeft?e.getTopLeft():e.getTopRight(),n=this._isLeft?e.getBottomLeft():e.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.getCodewords(),s=-1,u=1,c=0,l=o;l<i;l++)if(null!=a[l]){var h=a[l];h.setRowNumberAsRowIndicatorColumn();var d=h.getRowNumber()-s;0===d?c++:1===d?(u=Math.max(u,c),c=1,s=h.getRowNumber()):h.getRowNumber()>=t.getRowCount()?a[l]=null:(s=h.getRowNumber(),c=1)}},e.prototype.getBarcodeMetadata=function(){var t,e,r=this.getCodewords(),n=new n_,o=new n_,i=new n_,a=new n_;try{for(var s=nA(r),u=s.next();!u.done;u=s.next()){var c=u.value;if(null!=c){c.setRowNumberAsRowIndicatorColumn();var l=c.getValue()%30,h=c.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:o.setValue(3*l+1);break;case 1:a.setValue(l/3),i.setValue(l%3);break;case 2:n.setValue(l+1)}}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}if(0===n.getValue().length||0===o.getValue().length||0===i.getValue().length||0===a.getValue().length||n.getValue()[0]<1||o.getValue()[0]+i.getValue()[0]<nr.MIN_ROWS_IN_BARCODE||o.getValue()[0]+i.getValue()[0]>nr.MAX_ROWS_IN_BARCODE)return null;var d=new np(n.getValue()[0],o.getValue()[0],i.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(r,d),d},e.prototype.removeIncorrectCodewords=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(null!=t[r]){var o=n.getValue()%30,i=n.getRowNumber();if(i>e.getRowCount()){t[r]=null;continue}switch(this._isLeft||(i+=2),i%3){case 0:3*o+1!==e.getRowCountUpperPart()&&(t[r]=null);break;case 1:(Math.trunc(o/3)!==e.getErrorCorrectionLevel()||o%3!==e.getRowCountLowerPart())&&(t[r]=null);break;case 2:o+1!==e.getColumnCount()&&(t[r]=null)}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+t.prototype.toString.call(this)},e}(nm),nI=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nb=function(){function t(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var t,e=nr.MAX_CODEWORDS_IN_BARCODE;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(t){null!=t&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var t=this.adjustRowNumbersByRow();if(0===t)return 0;for(var e=1;e<this.barcodeColumnCount+1;e++)for(var r=this.detectionResultColumns[e].getCodewords(),n=0;n<r.length;n++)null!=r[n]&&(r[n].hasValidRowNumber()||this.adjustRowNumbers(e,n,r));return t},t.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1]){for(var t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(null!=t[r]&&null!=e[r]&&t[r].getRowNumber()===e[r].getRowNumber())for(var n=1;n<=this.barcodeColumnCount;n++){var o=this.detectionResultColumns[n].getCodewords()[r];null!=o&&(o.setRowNumber(t[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[n].getCodewords()[r]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(null!=r[n])for(var o=r[n].getRowNumber(),i=0,a=this.barcodeColumnCount+1;a>0&&i<this.ADJUST_ROW_NUMBER_SKIP;a--){var s=this.detectionResultColumns[a].getCodewords()[n];null!=s&&(i=t.adjustRowNumberIfValid(o,i,s),!s.hasValidRowNumber()&&e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(null!=r[n])for(var o=r[n].getRowNumber(),i=0,a=1;a<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;a++){var s=this.detectionResultColumns[a].getCodewords()[n];null!=s&&(i=t.adjustRowNumberIfValid(o,i,s),!s.hasValidRowNumber()&&e++)}return e},t.adjustRowNumberIfValid=function(t,e,r){return null==r||!r.hasValidRowNumber()&&(r.isValidRowNumber(t)?(r.setRowNumber(t),e=0):++e),e},t.prototype.adjustRowNumbers=function(e,r,n){if(null!=this.detectionResultColumns[e-1]){var o,i,a=n[r],s=this.detectionResultColumns[e-1].getCodewords(),u=s;null!=this.detectionResultColumns[e+1]&&(u=this.detectionResultColumns[e+1].getCodewords());var c=Array(14);c[2]=s[r],c[3]=u[r],r>0&&(c[0]=n[r-1],c[4]=s[r-1],c[5]=u[r-1]),r>1&&(c[8]=n[r-2],c[10]=s[r-2],c[11]=u[r-2]),r<n.length-1&&(c[1]=n[r+1],c[6]=s[r+1],c[7]=u[r+1]),r<n.length-2&&(c[9]=n[r+2],c[12]=s[r+2],c[13]=u[r+2]);try{for(var l=nI(c),h=l.next();!h.done;h=l.next()){var d=h.value;if(t.adjustRowNumber(a,d))return}}catch(t){o={error:t}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}}},t.adjustRowNumber=function(t,e){return null!=e&&!!e.hasValidRowNumber()&&e.getBucket()===t.getBucket()&&(t.setRowNumber(e.getRowNumber()),!0)},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(t){this.boundingBox=t},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(t,e){this.detectionResultColumns[t]=e},t.prototype.getDetectionResultColumn=function(t){return this.detectionResultColumns[t]},t.prototype.toString=function(){var t=this.detectionResultColumns[0];null==t&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var e=new ng,r=0;r<t.getCodewords().length;r++){e.format("CW %3d:",r);for(var n=0;n<this.barcodeColumnCount+2;n++){if(null==this.detectionResultColumns[n]){e.format("    |   ");continue}var o=this.detectionResultColumns[n].getCodewords()[r];if(null==o){e.format("    |   ");continue}e.format(" %3d|%3d",o.getRowNumber(),o.getValue())}e.format("%n")}return e.toString()},t}(),nS=function(){function t(e,r,n,o){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(o)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(t){this.rowNumber=t},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),nN=function(){function t(){}return t.initialize=function(){for(var e=0;e<nr.SYMBOL_TABLE.length;e++)for(var r=nr.SYMBOL_TABLE[e],n=1&r,o=0;o<nr.BARS_IN_MODULE;o++){for(var i=0;(1&r)===n;)i+=1,r>>=1;n=1&r,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=Array(nr.BARS_IN_MODULE)),t.RATIOS_TABLE[e][nr.BARS_IN_MODULE-o-1]=Math.fround(i/nr.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return -1!==r?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(t){for(var e=tG.sum(t),r=new Int32Array(nr.BARS_IN_MODULE),n=0,o=0,i=0;i<nr.MODULES_IN_CODEWORD;i++){var a=e/(2*nr.MODULES_IN_CODEWORD)+i*e/nr.MODULES_IN_CODEWORD;o+t[n]<=a&&(o+=t[n],n++),r[n]++}return r},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return -1===nr.getCodeword(r)?-1:r},t.getBitValue=function(t){for(var e=0,r=0;r<t.length;r++)for(var n=0;n<t[r];n++)e=e<<1|(r%2==0?1:0);return Math.trunc(e)},t.getClosestDecodedValue=function(e){var r=tG.sum(e),n=Array(nr.BARS_IN_MODULE);if(r>1)for(var o=0;o<n.length;o++)n[o]=Math.fround(e[o]/r);var i=tz.MAX_VALUE,a=-1;this.bSymbolTableReady||t.initialize();for(var s=0;s<t.RATIOS_TABLE.length;s++){for(var u=0,c=t.RATIOS_TABLE[s],l=0;l<nr.BARS_IN_MODULE;l++){var h=Math.fround(c[l]-n[l]);if((u+=Math.fround(h*h))>=i)break}u<i&&(i=u,a=nr.SYMBOL_TABLE[s])}return a},t.bSymbolTableReady=!1,t.RATIOS_TABLE=Array(nr.SYMBOL_TABLE.length).map(function(t){return Array(nr.BARS_IN_MODULE)}),t}(),nT=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(t){this.segmentIndex=t},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(t){this.fileId=t},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(t){this.optionalData=t},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(t){this.lastSegment=t},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(t){this.segmentCount=t},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(t){this.sender=t},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(t){this.addressee=t},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(t){this.fileName=t},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(t){this.fileSize=t},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(t){this.checksum=t},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(t){this.timestamp=t},t}(),nx=function(){function t(){}return t.parseLong=function(t,e){return void 0===e&&(e=void 0),parseInt(t,e)},t}(),nO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nO(e,t),e.kind="NullPointerException",e}(F),nD=function(){function t(){}return t.prototype.writeBytes=function(t){this.writeBytesOffset(t,0,t.length)},t.prototype.writeBytesOffset=function(t,e,r){if(null==t)throw new nR;if(e<0||e>t.length||r<0||e+r>t.length||e+r<0)throw new K;if(0!==r)for(var n=0;n<r;n++)this.write(t[e+n])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),nM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nM(e,t),e}(F),nB=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nk=function(t){function e(e){void 0===e&&(e=32);var r=t.call(this)||this;if(r.count=0,e<0)throw new H("Negative initial size: "+e);return r.buf=new Uint8Array(e),r}return nB(e,t),e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var e=this.buf.length<<1;if(e-t<0&&(e=t),e<0){if(t<0)throw new nP;e=tt.MAX_VALUE}this.buf=Q.copyOfUint8Array(this.buf,e)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,e,r){if(e<0||e>t.length||r<0||e+r-t.length>0)throw new K;this.ensureCapacity(this.count+r),Z.arraycopy(t,e,this.buf,this.count,r),this.count+=r},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Q.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?"string"==typeof t?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(nD);function nL(){if("undefined"!=typeof global)return global.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw Error("Can't search globals for BigInt!")}function nF(t){if(void 0===p&&(p=nL()),null===p)throw Error("BigInt is not supported!");return p(t)}!function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(f||(f={}));var nj=function(){function t(){}return t.decode=function(e,r){var n=new th(""),o=ta.ISO8859_1;n.enableDecoding(o);for(var i=1,a=e[i++],s=new nT;i<e[0];){switch(a){case t.TEXT_COMPACTION_MODE_LATCH:i=t.textCompaction(e,i,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:i=t.byteCompaction(a,e,o,i,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:i=t.numericCompaction(e,i,n);break;case t.ECI_CHARSET:ta.getCharacterSetECIByValue(e[i++]);break;case t.ECI_GENERAL_PURPOSE:i+=2;break;case t.ECI_USER_DEFINED:i++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=t.decodeMacroBlock(e,i,s);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new to;default:i--,i=t.textCompaction(e,i,n)}if(i<e.length)a=e[i++];else throw to.getFormatInstance()}if(0===n.length())throw to.getFormatInstance();var u=new tD(null,n.toString(),null,r);return u.setOther(s),u},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw to.getFormatInstance();for(var o=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<t.NUMBER_OF_SEQUENCE_CODEWORDS;i++,r++)o[i]=e[r];n.setSegmentIndex(tt.parseInt(t.decodeBase900toBase10(o,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new th;r=t.textCompaction(e,r,a),n.setFileId(a.toString());var s=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new th;r=t.textCompaction(e,r+1,u),n.setFileName(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var c=new th;r=t.textCompaction(e,r+1,c),n.setSender(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var l=new th;r=t.textCompaction(e,r+1,l),n.setAddressee(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var h=new th;r=t.numericCompaction(e,r+1,h),n.setSegmentCount(tt.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new th;r=t.numericCompaction(e,r+1,d),n.setTimestamp(nx.parseLong(d.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var f=new th;r=t.numericCompaction(e,r+1,f),n.setChecksum(tt.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var p=new th;r=t.numericCompaction(e,r+1,p),n.setFileSize(nx.parseLong(p.toString()));break;default:throw to.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw to.getFormatInstance()}if(-1!==s){var g=r-s;n.isLastSegment()&&g--,n.setOptionalData(Q.copyOfRange(e,s,s+g))}return r},t.textCompaction=function(e,r,n){for(var o=new Int32Array((e[0]-r)*2),i=new Int32Array((e[0]-r)*2),a=0,s=!1;r<e[0]&&!s;){var u=e[r++];if(u<t.TEXT_COMPACTION_MODE_LATCH)o[a]=u/30,o[a+1]=u%30,a+=2;else switch(u){case t.TEXT_COMPACTION_MODE_LATCH:o[a++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[a]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[r++],i[a]=u,a++}}return t.decodeTextCompaction(o,i,a,n),r},t.decodeTextCompaction=function(e,r,n,o){for(var i=f.ALPHA,a=f.ALPHA,s=0;s<n;){var u=e[s],c="";switch(i){case f.ALPHA:if(u<26)c=String.fromCharCode(65+u);else switch(u){case 26:c=" ";break;case t.LL:i=f.LOWER;break;case t.ML:i=f.MIXED;break;case t.PS:a=i,i=f.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=f.ALPHA}break;case f.LOWER:if(u<26)c=String.fromCharCode(97+u);else switch(u){case 26:c=" ";break;case t.AS:a=i,i=f.ALPHA_SHIFT;break;case t.ML:i=f.MIXED;break;case t.PS:a=i,i=f.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=f.ALPHA}break;case f.MIXED:if(u<t.PL)c=t.MIXED_CHARS[u];else switch(u){case t.PL:i=f.PUNCT;break;case 26:c=" ";break;case t.LL:i=f.LOWER;break;case t.AL:i=f.ALPHA;break;case t.PS:a=i,i=f.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=f.ALPHA}break;case f.PUNCT:if(u<t.PAL)c=t.PUNCT_CHARS[u];else switch(u){case t.PAL:i=f.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=f.ALPHA}break;case f.ALPHA_SHIFT:if(i=a,u<26)c=String.fromCharCode(65+u);else switch(u){case 26:c=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:i=f.ALPHA}break;case f.PUNCT_SHIFT:if(i=a,u<t.PAL)c=t.PUNCT_CHARS[u];else switch(u){case t.PAL:i=f.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=f.ALPHA}}""!==c&&o.append(c),s++}},t.byteCompaction=function(e,r,n,o,i){var a=new nk,s=0,u=0,c=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var l=new Int32Array(6),h=r[o++];o<r[0]&&!c;)switch(l[s++]=h,u=900*u+h,h=r[o++]){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:o--,c=!0;break;default:if(s%5==0&&s>0){for(var d=0;d<6;++d)a.write(Number(nF(u)>>nF(8*(5-d))));u=0,s=0}}o===r[0]&&h<t.TEXT_COMPACTION_MODE_LATCH&&(l[s++]=h);for(var f=0;f<s;f++)a.write(l[f]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;o<r[0]&&!c;){var p=r[o++];if(p<t.TEXT_COMPACTION_MODE_LATCH)s++,u=900*u+p;else switch(p){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:o--,c=!0}if(s%5==0&&s>0){for(var d=0;d<6;++d)a.write(Number(nF(u)>>nF(8*(5-d))));u=0,s=0}}}return i.append(tc.decode(a.toByteArray(),n)),o},t.numericCompaction=function(e,r,n){for(var o=0,i=!1,a=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!i;){var s=e[r++];if(r===e[0]&&(i=!0),s<t.TEXT_COMPACTION_MODE_LATCH)a[o]=s,o++;else switch(s){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,i=!0}(o%t.MAX_NUMERIC_CODEWORDS==0||s===t.NUMERIC_COMPACTION_MODE_LATCH||i)&&o>0&&(n.append(t.decodeBase900toBase10(a,o)),o=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=nF(0),o=0;o<r;o++)n+=t.EXP900[r-o-1]*nF(e[o]);var i=n.toString();if("1"!==i.charAt(0))throw new to;return i.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=";<>@[\\]_`~!\r	,:\n-.$/\"|*()?{}'",t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=nL()?function(){var t=[];t[0]=nF(1);var e=nF(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),nV=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nU=function(){function t(){}return t.decode=function(e,r,n,o,i,a,s){for(var u,c=new nf(e,r,n,o,i),l=null,h=null,d=!0;;d=!1){if(null!=r&&(l=t.getRowIndicatorColumn(e,c,r,!0,a,s)),null!=o&&(h=t.getRowIndicatorColumn(e,c,o,!1,a,s)),null==(u=t.merge(l,h)))throw tp.getNotFoundInstance();var f=u.getBoundingBox();if(d&&null!=f&&(f.getMinY()<c.getMinY()||f.getMaxY()>c.getMaxY()))c=f;else break}u.setBoundingBox(c);var p=u.getBarcodeColumnCount()+1;u.setDetectionResultColumn(0,l),u.setDetectionResultColumn(p,h);for(var g=null!=l,y=1;y<=p;y++){var m=g?y:p-y;if(void 0===u.getDetectionResultColumn(m)){var v=void 0;v=0===m||m===p?new nE(c,0===m):new nm(c),u.setDetectionResultColumn(m,v);for(var w=-1,_=-1,C=c.getMinY();C<=c.getMaxY();C++){if((w=t.getStartColumn(u,m,C,g))<0||w>c.getMaxX()){if(-1===_)continue;w=_}var A=t.detectCodeword(e,c.getMinX(),c.getMaxX(),g,w,C,a,s);null!=A&&(v.setCodeword(C,A),_=w,a=Math.min(a,A.getWidth()),s=Math.max(s,A.getWidth()))}}}return t.createDecoderResult(u)},t.merge=function(e,r){if(null==e&&null==r)return null;var n=t.getBarcodeMetadata(e,r);return null==n?null:new nb(n,nf.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r)))},t.adjustBoundingBox=function(e){if(null==e)return null;var r,n,o=e.getRowHeights();if(null==o)return null;var i=t.getMax(o),a=0;try{for(var s=nV(o),u=s.next();!u.done;u=s.next()){var c=u.value;if(a+=i-c,c>0)break}}catch(t){r={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(var l=e.getCodewords(),h=0;a>0&&null==l[h];h++)a--;for(var d=0,h=o.length-1;h>=0&&(d+=i-o[h],!(o[h]>0));h--);for(var h=l.length-1;d>0&&null==l[h];h--)d--;return e.getBoundingBox().addMissingRows(a,d,e.isLeft())},t.getMax=function(t){var e,r,n=-1;try{for(var o=nV(t),i=o.next();!i.done;i=o.next()){var a=i.value;n=Math.max(n,a)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},t.getBarcodeMetadata=function(t,e){var r,n;return null==t||null==(r=t.getBarcodeMetadata())?null==e?null:e.getBarcodeMetadata():null==e||null==(n=e.getBarcodeMetadata())?r:r.getColumnCount()!==n.getColumnCount()&&r.getErrorCorrectionLevel()!==n.getErrorCorrectionLevel()&&r.getRowCount()!==n.getRowCount()?null:r},t.getRowIndicatorColumn=function(e,r,n,o,i,a){for(var s=new nE(r,o),u=0;u<2;u++)for(var c=0===u?1:-1,l=Math.trunc(Math.trunc(n.getX())),h=Math.trunc(Math.trunc(n.getY()));h<=r.getMaxY()&&h>=r.getMinY();h+=c){var d=t.detectCodeword(e,0,e.getWidth(),o,l,h,i,a);null!=d&&(s.setCodeword(h,d),l=o?d.getStartX():d.getEndX())}return s},t.adjustCodewordCount=function(e,r){var n=r[0][1],o=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===o.length){if(i<1||i>nr.MAX_CODEWORDS_IN_BARCODE)throw tp.getNotFoundInstance();n.setValue(i)}else o[0]!==i&&n.setValue(i)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=[],o=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],a=[],s=0;s<e.getBarcodeRowCount();s++)for(var u=0;u<e.getBarcodeColumnCount();u++){var c=r[s][u+1].getValue(),l=s*e.getBarcodeColumnCount()+u;0===c.length?n.push(l):1===c.length?o[l]=c[0]:(a.push(l),i.push(c))}for(var h=Array(i.length),d=0;d<h.length;d++)h[d]=i[d];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),o,nr.toIntArray(n),nr.toIntArray(a),h)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,o,i){for(var a=new Int32Array(o.length),s=100;s-- >0;){for(var u=0;u<a.length;u++)r[o[u]]=i[u][a[u]];try{return t.decodeCodewords(r,e,n)}catch(t){if(!(t instanceof G))throw t}if(0===a.length)break;for(var u=0;u<a.length;u++){if(a[u]<i[u].length-1){a[u]++;break}if(a[u]=0,u===a.length-1)throw G.getChecksumInstance()}}throw G.getChecksumInstance()},t.createBarcodeMatrix=function(t){for(var e,r,n,o,i=Array.from({length:t.getBarcodeRowCount()},function(){return Array(t.getBarcodeColumnCount()+2)}),a=0;a<i.length;a++)for(var s=0;s<i[a].length;s++)i[a][s]=new n_;var u=0;try{for(var c=nV(t.getDetectionResultColumns()),l=c.next();!l.done;l=c.next()){var h=l.value;if(null!=h)try{for(var d=(n=void 0,nV(h.getCodewords())),f=d.next();!f.done;f=d.next()){var p=f.value;if(null!=p){var g=p.getRowNumber();if(g>=0){if(g>=i.length)continue;i[g][u].setValue(p.getValue())}}}}catch(t){n={error:t}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}u++}}catch(t){e={error:t}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}return i},t.isValidBarcodeColumn=function(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,o){var i,a,s=o?1:-1,u=null;if(t.isValidBarcodeColumn(e,r-s)&&(u=e.getDetectionResultColumn(r-s).getCodeword(n)),null!=u)return o?u.getEndX():u.getStartX();if(null!=(u=e.getDetectionResultColumn(r).getCodewordNearby(n)))return o?u.getStartX():u.getEndX();if(t.isValidBarcodeColumn(e,r-s)&&(u=e.getDetectionResultColumn(r-s).getCodewordNearby(n)),null!=u)return o?u.getEndX():u.getStartX();for(var c=0;t.isValidBarcodeColumn(e,r-s);){r-=s;try{for(var l=(i=void 0,nV(e.getDetectionResultColumn(r).getCodewords())),h=l.next();!h.done;h=l.next()){var d=h.value;if(null!=d)return(o?d.getEndX():d.getStartX())+s*c*(d.getEndX()-d.getStartX())}}catch(t){i={error:t}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}c++}return o?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,o,i,a,s,u){i=t.adjustCodewordStartColumn(e,r,n,o,i,a);var c,l=t.getModuleBitCount(e,r,n,o,i,a);if(null==l)return null;var h=tG.sum(l);if(o)c=i+h;else{for(var d=0;d<l.length/2;d++){var f=l[d];l[d]=l[l.length-1-d],l[l.length-1-d]=f}i=(c=i)-h}if(!t.checkCodewordSkew(h,s,u))return null;var p=nN.getDecodedValue(l),g=nr.getCodeword(p);return -1===g?null:new nS(i,c,t.getCodewordBucketNumber(p),g)},t.getModuleBitCount=function(t,e,r,n,o,i){for(var a=o,s=new Int32Array(8),u=0,c=n?1:-1,l=n;(n?a<r:a>=e)&&u<s.length;)t.get(a,i)===l?(s[u]++,a+=c):(u++,l=!l);return u===s.length||a===(n?r:e)&&u===s.length-1?s:null},t.getNumberOfECCodeWords=function(t){return 2<<t},t.adjustCodewordStartColumn=function(e,r,n,o,i,a){for(var s=i,u=o?-1:1,c=0;c<2;c++){for(;(o?s>=r:s<n)&&o===e.get(s,a);){if(Math.abs(i-s)>t.CODEWORD_SKEW_SIZE)return i;s+=u}u=-u,o=!o}return s},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(0===e.length)throw to.getFormatInstance();var o=1<<r+1,i=t.correctErrors(e,n,o);t.verifyCodewordCount(e,o);var a=nj.decode(e,""+r);return a.setErrorsCorrected(i),a.setErasures(n.length),a},t.correctErrors=function(e,r,n){if(null!=r&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw G.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(t,e){if(t.length<4)throw to.getFormatInstance();var r=t[0];if(r>t.length)throw to.getFormatInstance();if(0===r){if(e<t.length)t[0]=t.length-e;else throw to.getFormatInstance()}},t.getBitCountForCodeword=function(t){for(var e=new Int32Array(8),r=0,n=e.length-1;!((1&t)!==r&&(r=1&t,--n<0));)e[n]++,t>>=1;return e},t.getCodewordBucketNumber=function(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(t){return(t[0]-t[2]+t[4]-t[6]+9)%9},t.toString=function(t){for(var e=new ng,r=0;r<t.length;r++){e.format("Row %2d: ",r);for(var n=0;n<t[r].length;n++){var o=t[r][n];0===o.getValue().length?e.format("        ",null):e.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}e.format("%n")}return e.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new nd,t}(),nH=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nX=function(){function t(){}return t.prototype.decode=function(e,r){void 0===r&&(r=null);var n=t.decode(e,r,!1);if(null==n||0===n.length||null==n[0])throw tp.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){void 0===r&&(r=null);try{return t.decode(e,r,!0)}catch(t){if(t instanceof to||t instanceof G)throw tp.getNotFoundInstance();throw t}},t.decode=function(e,r,n){var o,i,a=[],s=ni.detectMultiple(e,r,n);try{for(var u=nH(s.getPoints()),c=u.next();!c.done;c=u.next()){var l=c.value,h=nU.decode(s.getBits(),l[4],l[5],l[6],l[7],t.getMinCodewordWidth(l),t.getMaxCodewordWidth(l)),d=new tx(h.getText(),h.getRawBytes(),void 0,l,tO.PDF_417);d.putMetadata(tR.ERROR_CORRECTION_LEVEL,h.getECLevel());var f=h.getOther();null!=f&&d.putMetadata(tR.PDF417_EXTRA_METADATA,f),a.push(d)}}catch(t){o={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return a.map(function(t){return t})},t.getMaxWidth=function(t,e){return null==t||null==e?0:Math.trunc(Math.abs(t.getX()-e.getX()))},t.getMinWidth=function(t,e){return null==t||null==e?tt.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*nr.MODULES_IN_CODEWORD/nr.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*nr.MODULES_IN_CODEWORD/nr.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*nr.MODULES_IN_CODEWORD/nr.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*nr.MODULES_IN_CODEWORD/nr.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),nW=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nW(e,t),e.kind="ReaderException",e}(F),nz=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nZ=function(){function t(){}return t.prototype.decode=function(t,e){return this.setHints(e),this.decodeInternal(t)},t.prototype.decodeWithState=function(t){return(null===this.readers||void 0===this.readers)&&this.setHints(null),this.decodeInternal(t)},t.prototype.setHints=function(t){this.hints=t;var e=null!=t&&void 0!==t.get(tr.TRY_HARDER),r=null==t?null:t.get(tr.POSSIBLE_FORMATS),n=[];if(null!=r){var o=r.some(function(t){return t===tO.UPC_A||t===tO.UPC_E||t===tO.EAN_13||t===tO.EAN_8||t===tO.CODABAR||t===tO.CODE_39||t===tO.CODE_93||t===tO.CODE_128||t===tO.ITF||t===tO.RSS_14||t===tO.RSS_EXPANDED});o&&!e&&n.push(new rC(t)),r.includes(tO.QR_CODE)&&n.push(new nt),r.includes(tO.DATA_MATRIX)&&n.push(new rB),r.includes(tO.AZTEC)&&n.push(new t6),r.includes(tO.PDF_417)&&n.push(new nX),o&&e&&n.push(new rC(t))}0===n.length&&(e||n.push(new rC(t)),n.push(new nt),n.push(new rB),n.push(new t6),n.push(new nX),e&&n.push(new rC(t))),this.readers=n},t.prototype.reset=function(){var t,e;if(null!==this.readers)try{for(var r=nz(this.readers),n=r.next();!n.done;n=r.next())n.value.reset()}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.decodeInternal=function(t){var e,r;if(null===this.readers)throw new nG("No readers where selected, nothing can be read.");try{for(var n=nz(this.readers),o=n.next();!o.done;o=n.next()){var i=o.value;try{return i.decode(t,this.hints)}catch(t){if(t instanceof nG)continue}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}throw new tp("No MultiFormat Readers were able to detect the code.")},t}(),nY=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nK=function(t){function e(e,r){void 0===e&&(e=null),void 0===r&&(r=500);var n=new nZ;return n.setHints(e),t.call(this,n,r)||this}return nY(e,t),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(tT),n$=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){n$(function(e){return void 0===e&&(e=500),t.call(this,new nX,e)||this},t)})(tT);var nq=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){nq(function(e){return void 0===e&&(e=500),t.call(this,new nt,e)||this},t)})(tT),function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"}(g||(g={}));let nJ=g;var nQ=function(){function t(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new tP(t,Int32Array.from([1])))}return t.prototype.buildGenerator=function(t){var e=this.cachedGenerators;if(t>=e.length)for(var r=e[e.length-1],n=this.field,o=e.length;o<=t;o++){var i=r.multiply(new tP(n,Int32Array.from([1,n.exp(o-1+n.getGeneratorBase())])));e.push(i),r=i}return e[t]},t.prototype.encode=function(t,e){if(0===e)throw new H("No error correction bytes");var r=t.length-e;if(r<=0)throw new H("No data bytes provided");var n=this.buildGenerator(e),o=new Int32Array(r);Z.arraycopy(t,0,o,0,r);for(var i=new tP(this.field,o),a=(i=i.multiplyByMonomial(e,1)).divide(n)[1].getCoefficients(),s=e-a.length,u=0;u<s;u++)t[r+u]=0;Z.arraycopy(a,0,t,r+s,a.length)},t}(),n1=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),o=e.getWidth(),i=e.getHeight(),a=0;a<i-1;a++)for(var s=n[a],u=0;u<o-1;u++){var c=s[u];c===s[u+1]&&c===n[a+1][u]&&c===n[a+1][u+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),o=e.getWidth(),i=e.getHeight(),a=0;a<i;a++)for(var s=0;s<o;s++){var u=n[a];s+6<o&&1===u[s]&&0===u[s+1]&&1===u[s+2]&&1===u[s+3]&&1===u[s+4]&&0===u[s+5]&&1===u[s+6]&&(t.isWhiteHorizontal(u,s-4,s)||t.isWhiteHorizontal(u,s+7,s+11))&&r++,a+6<i&&1===n[a][s]&&0===n[a+1][s]&&1===n[a+2][s]&&1===n[a+3][s]&&1===n[a+4][s]&&0===n[a+5][s]&&1===n[a+6][s]&&(t.isWhiteVertical(n,s,a-4,a)||t.isWhiteVertical(n,s,a+7,a+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(t,e,r){e=Math.max(e,0),r=Math.min(r,t.length);for(var n=e;n<r;n++)if(1===t[n])return!1;return!0},t.isWhiteVertical=function(t,e,r,n){r=Math.max(r,0),n=Math.min(n,t.length);for(var o=r;o<n;o++)if(1===t[o][e])return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),o=e.getWidth(),i=e.getHeight(),a=0;a<i;a++)for(var s=n[a],u=0;u<o;u++)1===s[u]&&r++;var c=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*r-c)/c)*t.N4},t.getDataMaskBit=function(t,e,r){var n,o;switch(t){case 0:n=r+e&1;break;case 1:n=1&r;break;case 2:n=e%3;break;case 3:n=(r+e)%3;break;case 4:n=Math.floor(r/2)+Math.floor(e/3)&1;break;case 5:n=(1&(o=r*e))+o%3;break;case 6:n=(1&(o=r*e))+o%3&1;break;case 7:n=(o=r*e)%3+(r+e&1)&1;break;default:throw new H("Invalid mask pattern: "+t)}return 0===n},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,o=r?e.getHeight():e.getWidth(),i=r?e.getWidth():e.getHeight(),a=e.getArray(),s=0;s<o;s++){for(var u=0,c=-1,l=0;l<i;l++){var h=r?a[s][l]:a[l][s];h===c?u++:(u>=5&&(n+=t.N1+(u-5)),u=1,c=h)}u>=5&&(n+=t.N1+(u-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),n0=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n2=function(){function t(t,e){this.width=t,this.height=e;for(var r=Array(e),n=0;n!==e;n++)r[n]=new Uint8Array(t);this.bytes=r}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(t,e){return this.bytes[e][t]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(t,e,r){this.bytes[e][t]=r},t.prototype.setBoolean=function(t,e,r){this.bytes[e][t]=r?1:0},t.prototype.clear=function(t){var e,r;try{for(var n=n0(this.bytes),o=n.next();!o.done;o=n.next()){var i=o.value;Q.fill(i,t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.equals=function(e){if(!(e instanceof t)||this.width!==e.width||this.height!==e.height)return!1;for(var r=0,n=this.height;r<n;++r)for(var o=this.bytes[r],i=e.bytes[r],a=0,s=this.width;a<s;++a)if(o[a]!==i[a])return!1;return!0},t.prototype.toString=function(){for(var t=new th,e=0,r=this.height;e<r;++e){for(var n=this.bytes[e],o=0,i=this.width;o<i;++o)switch(n[o]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ")}t.append("\n")}return t.toString()},t}(),n4=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var t=new th;return t.append("<<\n"),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append("\n ecLevel: "),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append("\n version: "),t.append(this.version?this.version.toString():"null"),t.append("\n maskPattern: "),t.append(this.maskPattern.toString()),this.matrix?(t.append("\n matrix:\n"),t.append(this.matrix.toString())):t.append("\n matrix: null\n"),t.append(">>\n"),t.toString()},t.prototype.setMode=function(t){this.mode=t},t.prototype.setECLevel=function(t){this.ecLevel=t},t.prototype.setVersion=function(t){this.version=t},t.prototype.setMaskPattern=function(t){this.maskPattern=t},t.prototype.setMatrix=function(t){this.matrix=t},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),n3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n6=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n3(e,t),e.kind="WriterException",e}(F),n8=function(){function t(){}return t.clearMatrix=function(t){t.clear(255)},t.buildMatrix=function(e,r,n,o,i){t.clearMatrix(i),t.embedBasicPatterns(n,i),t.embedTypeInfo(r,o,i),t.maybeEmbedVersionInfo(n,i),t.embedDataBits(e,o,i)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var o=new te;t.makeTypeInfoBits(e,r,o);for(var i=0,a=o.getSize();i<a;++i){var s=o.get(o.getSize()-1-i),u=t.TYPE_INFO_COORDINATES[i],c=u[0],l=u[1];if(n.setBoolean(c,l,s),i<8){var h=n.getWidth()-i-1,d=8;n.setBoolean(h,d,s)}else{var h=8,d=n.getHeight()-7+(i-8);n.setBoolean(h,d,s)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(7>e.getVersionNumber())){var n=new te;t.makeVersionInfoBits(e,n);for(var o=17,i=0;i<6;++i)for(var a=0;a<3;++a){var s=n.get(o);o--,r.setBoolean(i,r.getHeight()-11+a,s),r.setBoolean(r.getHeight()-11+a,i,s)}}},t.embedDataBits=function(e,r,n){for(var o=0,i=-1,a=n.getWidth()-1,s=n.getHeight()-1;a>0;){for(6===a&&(a-=1);s>=0&&s<n.getHeight();){for(var u=0;u<2;++u){var c=a-u;if(t.isEmpty(n.get(c,s))){var l=void 0;o<e.getSize()?(l=e.get(o),++o):l=!1,255!==r&&n1.getDataMaskBit(r,c,s)&&(l=!l),n.setBoolean(c,s,l)}}s+=i}s+=i=-i,a-=2}if(o!==e.getSize())throw new n6("Not all bits consumed: "+o+"/"+e.getSize())},t.findMSBSet=function(t){return 32-tt.numberOfLeadingZeros(t)},t.calculateBCHCode=function(e,r){if(0===r)throw new H("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!n4.isValidMaskPattern(r))throw new n6("Invalid mask pattern");var o=e.getBits()<<3|r;n.appendBits(o,5);var i=t.calculateBCHCode(o,t.TYPE_INFO_POLY);n.appendBits(i,10);var a=new te;if(a.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(a),15!==n.getSize())throw new n6("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),18!==r.getSize())throw new n6("should not happen but we got: "+r.getSize())},t.isEmpty=function(t){return 255===t},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(t){if(0===t.get(8,t.getHeight()-8))throw new n6;t.setNumber(8,t.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var o=0;o<8;++o){if(!t.isEmpty(n.get(e+o,r)))throw new n6;n.setNumber(e+o,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var o=0;o<7;++o){if(!t.isEmpty(n.get(e,r+o)))throw new n6;n.setNumber(e,r+o,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var o=0;o<5;++o)for(var i=t.POSITION_ADJUSTMENT_PATTERN[o],a=0;a<5;++a)n.setNumber(e+a,r+o,i[a])},t.embedPositionDetectionPattern=function(e,r,n){for(var o=0;o<7;++o)for(var i=t.POSITION_DETECTION_PATTERN[o],a=0;a<7;++a)n.setNumber(e+a,r+o,i[a])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e),t.embedHorizontalSeparationPattern(0,7,e),t.embedHorizontalSeparationPattern(e.getWidth()-8,7,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-8,e),t.embedVerticalSeparationPattern(7,0,e),t.embedVerticalSeparationPattern(e.getHeight()-7-1,0,e),t.embedVerticalSeparationPattern(7,e.getHeight()-7,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(2>e.getVersionNumber()))for(var n=e.getVersionNumber()-1,o=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],i=0,a=o.length;i!==a;i++){var s=o[i];if(s>=0)for(var u=0;u!==a;u++){var c=o[u];c>=0&&t.isEmpty(r.get(c,s))&&t.embedPositionAdjustmentPattern(c-2,s-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),n5=function(){function t(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),n9=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n7=function(){function t(){}return t.calculateMaskPenalty=function(t){return n1.applyMaskPenaltyRule1(t)+n1.applyMaskPenaltyRule2(t)+n1.applyMaskPenaltyRule3(t)+n1.applyMaskPenaltyRule4(t)},t.encode=function(e,r,n){void 0===n&&(n=null);var o,i=t.DEFAULT_BYTE_MODE_ENCODING,a=null!==n&&void 0!==n.get(nJ.CHARACTER_SET);a&&(i=n.get(nJ.CHARACTER_SET).toString());var s=this.chooseMode(e,i),u=new te;if(s===rK.BYTE&&(a||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=ta.getCharacterSetECIByName(i);void 0!==c&&this.appendECI(c,u)}this.appendModeInfo(s,u);var l=new te;if(this.appendBytes(e,s,l,i),null!==n&&void 0!==n.get(nJ.QR_VERSION)){var h=Number.parseInt(n.get(nJ.QR_VERSION).toString(),10);o=rW.getVersionForNumber(h);var d=this.calculateBitsNeeded(s,u,l,o);if(!this.willFit(d,o,r))throw new n6("Data too big for requested version")}else o=this.recommendVersion(r,s,u,l);var f=new te;f.appendBitArray(u);var p=s===rK.BYTE?l.getSizeInBytes():e.length;this.appendLengthInfo(p,o,s,f),f.appendBitArray(l);var g=o.getECBlocksForLevel(r),y=o.getTotalCodewords()-g.getTotalECCodewords();this.terminateBits(y,f);var m=this.interleaveWithECBytes(f,o.getTotalCodewords(),y,g.getNumBlocks()),v=new n4;v.setECLevel(r),v.setMode(s),v.setVersion(o);var w=o.getDimensionForVersion(),_=new n2(w,w),C=this.chooseMaskPattern(m,r,o,_);return v.setMaskPattern(C),n8.buildMatrix(m,r,o,C,_),v.setMatrix(_),v},t.recommendVersion=function(t,e,r,n){var o=this.calculateBitsNeeded(e,r,n,rW.getVersionForNumber(1)),i=this.chooseVersion(o,t),a=this.calculateBitsNeeded(e,r,n,i);return this.chooseVersion(a,t)},t.calculateBitsNeeded=function(t,e,r,n){return e.getSize()+t.getCharacterCountBits(n)+r.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(void 0===r&&(r=null),ta.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return rK.KANJI;for(var n=!1,o=!1,i=0,a=e.length;i<a;++i){var s=e.charAt(i);if(t.isDigit(s))n=!0;else{if(-1===this.getAlphanumericCode(s.charCodeAt(0)))return rK.BYTE;o=!0}}return o?rK.ALPHANUMERIC:n?rK.NUMERIC:rK.BYTE},t.isOnlyDoubleByteKanji=function(t){try{e=tc.encode(t,ta.SJIS)}catch(t){return!1}var e,r=e.length;if(r%2!=0)return!1;for(var n=0;n<r;n+=2){var o=255&e[n];if((o<129||o>159)&&(o<224||o>235))return!1}return!0},t.chooseMaskPattern=function(t,e,r,n){for(var o=Number.MAX_SAFE_INTEGER,i=-1,a=0;a<n4.NUM_MASK_PATTERNS;a++){n8.buildMatrix(t,e,r,a,n);var s=this.calculateMaskPenalty(n);s<o&&(o=s,i=a)}return i},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var o=rW.getVersionForNumber(n);if(t.willFit(e,o,r))return o}throw new n6("Data too big")},t.willFit=function(t,e,r){return e.getTotalCodewords()-e.getECBlocksForLevel(r).getTotalECCodewords()>=(t+7)/8},t.terminateBits=function(t,e){var r=8*t;if(e.getSize()>r)throw new n6("data bits cannot fit in the QR Code"+e.getSize()+" > "+r);for(var n=0;n<4&&e.getSize()<r;++n)e.appendBit(!1);var o=7&e.getSize();if(o>0)for(var n=o;n<8;n++)e.appendBit(!1);for(var i=t-e.getSizeInBytes(),n=0;n<i;++n)e.appendBits((1&n)==0?236:17,8);if(e.getSize()!==r)throw new n6("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(t,e,r,n,o,i){if(n>=r)throw new n6("Block ID too large");var a=t%r,s=r-a,u=Math.floor(t/r),c=Math.floor(e/r),l=c+1,h=u-c,d=u+1-l;if(h!==d)throw new n6("EC bytes mismatch");if(r!==s+a)throw new n6("RS blocks mismatch");if(t!==(c+h)*s+(l+d)*a)throw new n6("Total bytes mismatch");n<s?(o[0]=c,i[0]=h):(o[0]=l,i[0]=d)},t.interleaveWithECBytes=function(e,r,n,o){if(e.getSizeInBytes()!==n)throw new n6("Number of bits and data bytes does not match");for(var i,a,s,u,c=0,l=0,h=0,d=[],f=0;f<o;++f){var p=new Int32Array(1),g=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,o,f,p,g);var y=p[0],m=new Uint8Array(y);e.toBytes(8*c,m,0,y);var v=t.generateECBytes(m,g[0]);d.push(new n5(m,v)),l=Math.max(l,y),h=Math.max(h,v.length),c+=p[0]}if(n!==c)throw new n6("Data bytes does not match offset");for(var w=new te,f=0;f<l;++f)try{for(var _=(i=void 0,n9(d)),C=_.next();!C.done;C=_.next()){var A=C.value,m=A.getDataBytes();f<m.length&&w.appendBits(m[f],8)}}catch(t){i={error:t}}finally{try{C&&!C.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}for(var f=0;f<h;++f)try{for(var E=(s=void 0,n9(d)),I=E.next();!I.done;I=E.next()){var A=I.value,v=A.getErrorCorrectionBytes();f<v.length&&w.appendBits(v[f],8)}}catch(t){s={error:t}}finally{try{I&&!I.done&&(u=E.return)&&u.call(E)}finally{if(s)throw s.error}}if(r!==w.getSizeInBytes())throw new n6("Interleaving error: "+r+" and "+w.getSizeInBytes()+" differ.");return w},t.generateECBytes=function(t,e){for(var r=t.length,n=new Int32Array(r+e),o=0;o<r;o++)n[o]=255&t[o];new nQ(tF.QR_CODE_FIELD_256).encode(n,e);for(var i=new Uint8Array(e),o=0;o<e;o++)i[o]=n[r+o];return i},t.appendModeInfo=function(t,e){e.appendBits(t.getBits(),4)},t.appendLengthInfo=function(t,e,r,n){var o=r.getCharacterCountBits(e);if(t>=1<<o)throw new n6(t+" is bigger than "+((1<<o)-1));n.appendBits(t,o)},t.appendBytes=function(e,r,n,o){switch(r){case rK.NUMERIC:t.appendNumericBytes(e,n);break;case rK.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case rK.BYTE:t.append8BitBytes(e,n,o);break;case rK.KANJI:t.appendKanjiBytes(e,n);break;default:throw new n6("Invalid mode: "+r)}},t.getDigit=function(t){return t.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,o=0;o<n;){var i=t.getDigit(e.charAt(o));if(o+2<n){var a=t.getDigit(e.charAt(o+1)),s=t.getDigit(e.charAt(o+2));r.appendBits(100*i+10*a+s,10),o+=3}else if(o+1<n){var a=t.getDigit(e.charAt(o+1));r.appendBits(10*i+a,7),o+=2}else r.appendBits(i,4),o++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,o=0;o<n;){var i=t.getAlphanumericCode(e.charCodeAt(o));if(-1===i)throw new n6;if(o+1<n){var a=t.getAlphanumericCode(e.charCodeAt(o+1));if(-1===a)throw new n6;r.appendBits(45*i+a,11),o+=2}else r.appendBits(i,6),o++}},t.append8BitBytes=function(t,e,r){var n;try{n=tc.encode(t,r)}catch(t){throw new n6(t)}for(var o=0,i=n.length;o!==i;o++){var a=n[o];e.appendBits(a,8)}},t.appendKanjiBytes=function(t,e){try{r=tc.encode(t,ta.SJIS)}catch(t){throw new n6(t)}for(var r,n=r.length,o=0;o<n;o+=2){var i=(255&r[o])<<8&4294967295|255&r[o+1],a=-1;if(i>=33088&&i<=40956?a=i-33088:i>=57408&&i<=60351&&(a=i-49472),-1===a)throw new n6("Invalid byte sequence");var s=(a>>8)*192+(255&a);e.appendBits(s,13)}},t.appendECI=function(t,e){e.appendBits(rK.ECI.getBits(),4),e.appendBits(t.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=ta.UTF8.getName(),t}();(function(){function t(){}t.prototype.write=function(e,r,n,o){if(void 0===o&&(o=null),0===e.length)throw new H("Found empty contents");if(r<0||n<0)throw new H("Requested dimensions are too small: "+r+"x"+n);var i=rL.L,a=t.QUIET_ZONE_SIZE;null!==o&&(void 0!==o.get(nJ.ERROR_CORRECTION)&&(i=rL.fromString(o.get(nJ.ERROR_CORRECTION).toString())),void 0!==o.get(nJ.MARGIN)&&(a=Number.parseInt(o.get(nJ.MARGIN).toString(),10)));var s=n7.encode(e,i,o);return this.renderResult(s,r,n,a)},t.prototype.writeToDom=function(t,e,r,n,o){void 0===o&&(o=null),"string"==typeof t&&(t=document.querySelector(t));var i=this.write(e,r,n,o);t&&t.appendChild(i)},t.prototype.renderResult=function(t,e,r,n){var o=t.getMatrix();if(null===o)throw new tH;for(var i=o.getWidth(),a=o.getHeight(),s=i+2*n,u=a+2*n,c=Math.max(e,s),l=Math.max(r,u),h=Math.min(Math.floor(c/s),Math.floor(l/u)),d=Math.floor((c-i*h)/2),f=Math.floor((l-a*h)/2),p=this.createSVGElement(c,l),g=0,y=f;g<a;g++,y+=h)for(var m=0,v=d;m<i;m++,v+=h)if(1===o.get(m,g)){var w=this.createSvgRectElement(v,y,h,h);p.appendChild(w)}return p},t.prototype.createSVGElement=function(e,r){var n=document.createElementNS(t.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",r.toString()),n},t.prototype.createSvgRectElement=function(e,r,n,o){var i=document.createElementNS(t.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",r.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",o.toString()),i.setAttributeNS(null,"fill","#000000"),i},t.QUIET_ZONE_SIZE=4,t.SVG_NS="http://www.w3.org/2000/svg"})();var ot=function(){function t(){}return t.prototype.encode=function(e,r,n,o,i){if(0===e.length)throw new H("Found empty contents");if(r!==tO.QR_CODE)throw new H("Can only encode QR_CODE, but got "+r);if(n<0||o<0)throw new H("Requested dimensions are too small: "+n+"x"+o);var a=rL.L,s=t.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(nJ.ERROR_CORRECTION)&&(a=rL.fromString(i.get(nJ.ERROR_CORRECTION).toString())),void 0!==i.get(nJ.MARGIN)&&(s=Number.parseInt(i.get(nJ.MARGIN).toString(),10)));var u=n7.encode(e,a,i);return t.renderResult(u,n,o,s)},t.renderResult=function(t,e,r,n){var o=t.getMatrix();if(null===o)throw new tH;for(var i=o.getWidth(),a=o.getHeight(),s=i+2*n,u=a+2*n,c=Math.max(e,s),l=Math.max(r,u),h=Math.min(Math.floor(c/s),Math.floor(l/u)),d=Math.floor((c-i*h)/2),f=Math.floor((l-a*h)/2),p=new td(c,l),g=0,y=f;g<a;g++,y+=h)for(var m=0,v=d;m<i;m++,v+=h)1===o.get(m,g)&&p.setRegion(v,y,h,h);return p},t.QUIET_ZONE_SIZE=4,t}();(function(){}).prototype.encode=function(t,e,r,n,o){var i;if(e===tO.QR_CODE)i=new ot;else throw new H("No encoder available for format "+e);return i.encode(t,e,r,n,o)};var oe=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){function e(e,r,n,o,i,a,s,u){var c=t.call(this,a,s)||this;if(c.yuvData=e,c.dataWidth=r,c.dataHeight=n,c.left=o,c.top=i,o+a>r||i+s>n)throw new H("Crop rectangle does not fit within image data.");return u&&c.reverseHorizontal(a,s),c}oe(e,t),e.prototype.getRow=function(t,e){if(t<0||t>=this.getHeight())throw new H("Requested row is outside the image: "+t);var r=this.getWidth();(null==e||e.length<r)&&(e=new Uint8ClampedArray(r));var n=(t+this.top)*this.dataWidth+this.left;return Z.arraycopy(this.yuvData,n,e,0,r),e},e.prototype.getMatrix=function(){var t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.yuvData;var r=t*e,n=new Uint8ClampedArray(r),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Z.arraycopy(this.yuvData,o,n,0,r),n;for(var i=0;i<e;i++){var a=i*t;Z.arraycopy(this.yuvData,o,n,a,t),o+=this.dataWidth}return n},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,n,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,n,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(t*r),o=this.yuvData,i=this.top*this.dataWidth+this.left,a=0;a<r;a++){for(var s=a*t,u=0;u<t;u++){var c=255&o[i+u*e.THUMBNAIL_SCALE_FACTOR];n[s+u]=4278190080|65793*c}i+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return n},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,e){for(var r=this.yuvData,n=0,o=this.top*this.dataWidth+this.left;n<e;n++,o+=this.dataWidth)for(var i=o+t/2,a=o,s=o+t-1;a<i;a++,s--){var u=r[a];r[a]=r[s],r[s]=u}},e.prototype.invert=function(){return new tC(this)},e.THUMBNAIL_SCALE_FACTOR=2})(tw);var or=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){function e(e,r,n,o,i,a,s){var u=t.call(this,r,n)||this;if(u.dataWidth=o,u.dataHeight=i,u.left=a,u.top=s,4===e.BYTES_PER_ELEMENT){for(var c=r*n,l=new Uint8ClampedArray(c),h=0;h<c;h++){var d=e[h],f=d>>16&255,p=d>>7&510,g=255&d;l[h]=(f+p+g)/4&255}u.luminances=l}else u.luminances=e;if(void 0===o&&(u.dataWidth=r),void 0===i&&(u.dataHeight=n),void 0===a&&(u.left=0),void 0===s&&(u.top=0),u.left+r>u.dataWidth||u.top+n>u.dataHeight)throw new H("Crop rectangle does not fit within image data.");return u}or(e,t),e.prototype.getRow=function(t,e){if(t<0||t>=this.getHeight())throw new H("Requested row is outside the image: "+t);var r=this.getWidth();(null==e||e.length<r)&&(e=new Uint8ClampedArray(r));var n=(t+this.top)*this.dataWidth+this.left;return Z.arraycopy(this.luminances,n,e,0,r),e},e.prototype.getMatrix=function(){var t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.luminances;var r=t*e,n=new Uint8ClampedArray(r),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Z.arraycopy(this.luminances,o,n,0,r),n;for(var i=0;i<e;i++){var a=i*t;Z.arraycopy(this.luminances,o,n,a,t),o+=this.dataWidth}return n},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,n,o){return new e(this.luminances,n,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new tC(this)}})(tw);var on=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return on(e,t),e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(ta),oi=function(){function t(){}return t.ISO_8859_1=ta.ISO8859_1,t}(),oa=function(){function t(t,e,r){this.codewords=t,this.numcols=e,this.numrows=r,this.bits=new Uint8Array(e*r),Q.fill(this.bits,2)}return t.prototype.getNumrows=function(){return this.numrows},t.prototype.getNumcols=function(){return this.numcols},t.prototype.getBits=function(){return this.bits},t.prototype.getBit=function(t,e){return 1===this.bits[e*this.numcols+t]},t.prototype.setBit=function(t,e,r){this.bits[e*this.numcols+t]=r?1:0},t.prototype.noBit=function(t,e){return 2===this.bits[e*this.numcols+t]},t.prototype.place=function(){var t=0,e=4,r=0;do{e===this.numrows&&0===r&&this.corner1(t++),e===this.numrows-2&&0===r&&this.numcols%4!=0&&this.corner2(t++),e===this.numrows-2&&0===r&&this.numcols%8==4&&this.corner3(t++),e===this.numrows+4&&2===r&&this.numcols%8==0&&this.corner4(t++);do e<this.numrows&&r>=0&&this.noBit(r,e)&&this.utah(e,r,t++),e-=2,r+=2;while(e>=0&&r<this.numcols);e++,r+=3;do e>=0&&r<this.numcols&&this.noBit(r,e)&&this.utah(e,r,t++),e+=2,r-=2;while(e<this.numrows&&r>=0);e+=3,r++}while(e<this.numrows||r<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},t.prototype.module=function(t,e,r,n){t<0&&(t+=this.numrows,e+=4-(this.numrows+4)%8),e<0&&(e+=this.numcols,t+=4-(this.numcols+4)%8);var o=this.codewords.charCodeAt(r);o&=1<<8-n,this.setBit(e,t,0!==o)},t.prototype.utah=function(t,e,r){this.module(t-2,e-2,r,1),this.module(t-2,e-1,r,2),this.module(t-1,e-2,r,3),this.module(t-1,e-1,r,4),this.module(t-1,e,r,5),this.module(t,e-2,r,6),this.module(t,e-1,r,7),this.module(t,e,r,8)},t.prototype.corner1=function(t){this.module(this.numrows-1,0,t,1),this.module(this.numrows-1,1,t,2),this.module(this.numrows-1,2,t,3),this.module(0,this.numcols-2,t,4),this.module(0,this.numcols-1,t,5),this.module(1,this.numcols-1,t,6),this.module(2,this.numcols-1,t,7),this.module(3,this.numcols-1,t,8)},t.prototype.corner2=function(t){this.module(this.numrows-3,0,t,1),this.module(this.numrows-2,0,t,2),this.module(this.numrows-1,0,t,3),this.module(0,this.numcols-4,t,4),this.module(0,this.numcols-3,t,5),this.module(0,this.numcols-2,t,6),this.module(0,this.numcols-1,t,7),this.module(1,this.numcols-1,t,8)},t.prototype.corner3=function(t){this.module(this.numrows-3,0,t,1),this.module(this.numrows-2,0,t,2),this.module(this.numrows-1,0,t,3),this.module(0,this.numcols-2,t,4),this.module(0,this.numcols-1,t,5),this.module(1,this.numcols-1,t,6),this.module(2,this.numcols-1,t,7),this.module(3,this.numcols-1,t,8)},t.prototype.corner4=function(t){this.module(this.numrows-1,0,t,1),this.module(this.numrows-1,this.numcols-1,t,2),this.module(0,this.numcols-3,t,3),this.module(0,this.numcols-2,t,4),this.module(0,this.numcols-1,t,5),this.module(1,this.numcols-3,t,6),this.module(1,this.numcols-2,t,7),this.module(1,this.numcols-1,t,8)},t}(),os=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],ou=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],oc=(y=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,(r*=2)>=256&&(r^=301);return{LOG:t,ALOG:e}}([],[])).LOG,ol=y.ALOG;!function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"}(m||(m={}));var oh="[)>\x1e05\x1d",od="[)>\x1e06\x1d",of=function(){function t(){}return t.encodeECC200=function(t,e){if(t.length!==e.getDataCapacity())throw Error("The number of codewords does not match the selected symbol");var r=new th;r.append(t);var n=e.getInterleavedBlockCount();if(1===n){var o=this.createECCBlock(t,e.getErrorCodewords());r.append(o)}else{for(var i=[],a=[],s=0;s<n;s++)i[s]=e.getDataLengthForInterleavedBlock(s+1),a[s]=e.getErrorLengthForInterleavedBlock(s+1);for(var u=0;u<n;u++){for(var c=new th,l=u;l<e.getDataCapacity();l+=n)c.append(t.charAt(l));for(var o=this.createECCBlock(c.toString(),a[u]),h=0,d=u;d<a[u]*n;d+=n)r.setCharAt(e.getDataCapacity()+d,o.charAt(h++))}}return r.toString()},t.createECCBlock=function(t,e){for(var r=-1,n=0;n<os.length;n++)if(os[n]===e){r=n;break}if(r<0)throw Error("Illegal number of error correction codewords specified: "+e);for(var o=ou[r],i=[],n=0;n<e;n++)i[n]=0;for(var n=0;n<t.length;n++){for(var a=i[e-1]^t.charAt(n).charCodeAt(0),s=e-1;s>0;s--)0!==a&&0!==o[s]?i[s]=i[s-1]^ol[(oc[a]+oc[o[s]])%255]:i[s]=i[s-1];0!==a&&0!==o[0]?i[0]=ol[(oc[a]+oc[o[0]])%255]:i[0]=0}for(var u=[],n=0;n<e;n++)u[n]=i[e-n-1];return u.map(function(t){return String.fromCharCode(t)}).join("")},t}(),op=function(){function t(){}return t.prototype.getEncodingMode=function(){return 0},t.prototype.encode=function(t){if(oT.determineConsecutiveDigitCount(t.getMessage(),t.pos)>=2)t.writeCodeword(this.encodeASCIIDigits(t.getMessage().charCodeAt(t.pos),t.getMessage().charCodeAt(t.pos+1))),t.pos+=2;else{var e=t.getCurrentChar(),r=oT.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(r!==this.getEncodingMode())switch(r){case 5:t.writeCodeword(231),t.signalEncoderChange(5);return;case 1:t.writeCodeword(230),t.signalEncoderChange(1);return;case 3:t.writeCodeword(238),t.signalEncoderChange(3);break;case 2:t.writeCodeword(239),t.signalEncoderChange(2);break;case 4:t.writeCodeword(240),t.signalEncoderChange(4);break;default:throw Error("Illegal mode: "+r)}else oT.isExtendedASCII(e)?(t.writeCodeword(235),t.writeCodeword(e-128+1)):t.writeCodeword(e+1),t.pos++}},t.prototype.encodeASCIIDigits=function(t,e){if(oT.isDigit(t)&&oT.isDigit(e))return(t-48)*10+(e-48)+130;throw Error("not digits: "+t+e)},t}(),og=function(){function t(){}return t.prototype.getEncodingMode=function(){return 5},t.prototype.encode=function(t){var e=new th;for(e.append(0);t.hasMoreCharacters();){var r=t.getCurrentChar();if(e.append(r),t.pos++,oT.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode())!==this.getEncodingMode()){t.signalEncoderChange(0);break}}var n=e.length()-1,o=t.getCodewordCount()+n+1;t.updateSymbolInfo(o);var i=t.getSymbolInfo().getDataCapacity()-o>0;if(t.hasMoreCharacters()||i){if(n<=249)e.setCharAt(0,tl.getCharAt(n));else if(n<=1555)e.setCharAt(0,tl.getCharAt(Math.floor(n/250)+249)),e.insert(1,tl.getCharAt(n%250));else throw Error("Message length not in valid ranges: "+n)}for(var a=0,r=e.length();a<r;a++)t.writeCodeword(this.randomize255State(e.charAt(a).charCodeAt(0),t.getCodewordCount()+1))},t.prototype.randomize255State=function(t,e){var r=t+(149*e%255+1);return r<=255?r:r-256},t}(),oy=function(){function t(){}return t.prototype.getEncodingMode=function(){return 1},t.prototype.encodeMaximal=function(t){for(var e=new th,r=0,n=t.pos,o=0;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,r=this.encodeChar(i,e),e.length()%3==0&&(n=t.pos,o=e.length())}if(o!==e.length()){var a=Math.floor(e.length()/3*2),s=Math.floor(t.getCodewordCount()+a+1);t.updateSymbolInfo(s);var u=t.getSymbolInfo().getDataCapacity()-s,c=Math.floor(e.length()%3);(2===c&&2!==u||1===c&&(r>3||1!==u))&&(t.pos=n)}e.length()>0&&t.writeCodeword(230),this.handleEOD(t,e)},t.prototype.encode=function(t){for(var e=new th;t.hasMoreCharacters();){var r=t.getCurrentChar();t.pos++;var n=this.encodeChar(r,e),o=2*Math.floor(e.length()/3),i=t.getCodewordCount()+o;t.updateSymbolInfo(i);var a=t.getSymbolInfo().getDataCapacity()-i;if(!t.hasMoreCharacters()){var s=new th;for(e.length()%3==2&&2!==a&&(n=this.backtrackOneCharacter(t,e,s,n));e.length()%3==1&&(n>3||1!==a);)n=this.backtrackOneCharacter(t,e,s,n);break}if(e.length()%3==0&&oT.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode())!==this.getEncodingMode()){t.signalEncoderChange(0);break}}this.handleEOD(t,e)},t.prototype.backtrackOneCharacter=function(t,e,r,n){var o=e.length(),i=e.toString().substring(0,o-n);e.setLengthToZero(),e.append(i),t.pos--;var a=t.getCurrentChar();return n=this.encodeChar(a,r),t.resetSymbolInfo(),n},t.prototype.writeNextTriplet=function(t,e){t.writeCodewords(this.encodeToCodewords(e.toString()));var r=e.toString().substring(3);e.setLengthToZero(),e.append(r)},t.prototype.handleEOD=function(t,e){var r=Math.floor(e.length()/3*2),n=e.length()%3,o=t.getCodewordCount()+r;t.updateSymbolInfo(o);var i=t.getSymbolInfo().getDataCapacity()-o;if(2===n){for(e.append("\x00");e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(254)}else if(1===i&&1===n){for(;e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(254),t.pos--}else if(0===n){for(;e.length()>=3;)this.writeNextTriplet(t,e);(i>0||t.hasMoreCharacters())&&t.writeCodeword(254)}else throw Error("Unexpected case. Please report!");t.signalEncoderChange(0)},t.prototype.encodeChar=function(t,e){return 32===t?(e.append(3),1):t>=48&&t<=57?(e.append(t-48+4),1):t>=65&&t<=90?(e.append(t-65+14),1):t<32?(e.append(0),e.append(t),2):t<=47?(e.append(1),e.append(t-33),2):t<=64?(e.append(1),e.append(t-58+15),2):t<=95?(e.append(1),e.append(t-91+22),2):t<=127?(e.append(2),e.append(t-96),2):(e.append("1\x1e"),2+this.encodeChar(t-128,e))},t.prototype.encodeToCodewords=function(t){var e=1600*t.charCodeAt(0)+40*t.charCodeAt(1)+t.charCodeAt(2)+1,r=new th;return r.append(e/256),r.append(e%256),r.toString()},t}(),om=function(){function t(){}return t.prototype.getEncodingMode=function(){return 4},t.prototype.encode=function(t){for(var e=new th;t.hasMoreCharacters();){var r=t.getCurrentChar();if(this.encodeChar(r,e),t.pos++,e.length()>=4){t.writeCodewords(this.encodeToCodewords(e.toString()));var n=e.toString().substring(4);if(e.setLengthToZero(),e.append(n),oT.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode())!==this.getEncodingMode()){t.signalEncoderChange(0);break}}}e.append(tl.getCharAt(31)),this.handleEOD(t,e)},t.prototype.handleEOD=function(t,e){try{var r=e.length();if(0===r)return;if(1===r){t.updateSymbolInfo();var n=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),o=t.getRemainingCharacters();if(o>n&&(t.updateSymbolInfo(t.getCodewordCount()+1),n=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount()),o<=n&&n<=2)return}if(r>4)throw Error("Count must not exceed 4");var i=r-1,a=this.encodeToCodewords(e.toString()),s=!t.hasMoreCharacters()&&i<=2;if(i<=2){t.updateSymbolInfo(t.getCodewordCount()+i);var n=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount();n>=3&&(s=!1,t.updateSymbolInfo(t.getCodewordCount()+a.length))}s?(t.resetSymbolInfo(),t.pos-=i):t.writeCodewords(a)}finally{t.signalEncoderChange(0)}},t.prototype.encodeChar=function(t,e){t>=32&&t<=63?e.append(t):t>=64&&t<=94?e.append(tl.getCharAt(t-64)):oT.illegalCharacter(tl.getCharAt(t))},t.prototype.encodeToCodewords=function(t){var e=t.length;if(0===e)throw Error("StringBuilder must not be empty");var r=(t.charAt(0).charCodeAt(0)<<18)+((e>=2?t.charAt(1).charCodeAt(0):0)<<12)+((e>=3?t.charAt(2).charCodeAt(0):0)<<6)+(e>=4?t.charAt(3).charCodeAt(0):0),n=new th;return n.append(r>>16&255),e>=2&&n.append(r>>8&255),e>=3&&n.append(255&r),n.toString()},t}(),ov=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ow=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o_=function(){function t(t,e,r,n,o,i,a,s){void 0===a&&(a=0),void 0===s&&(s=0),this.rectangular=t,this.dataCapacity=e,this.errorCodewords=r,this.matrixWidth=n,this.matrixHeight=o,this.dataRegions=i,this.rsBlockData=a,this.rsBlockError=s}return t.lookup=function(t,e,r,n,o){var i,a;void 0===e&&(e=0),void 0===r&&(r=null),void 0===n&&(n=null),void 0===o&&(o=!0);try{for(var s=ow(oA),u=s.next();!u.done;u=s.next()){var c=u.value;if(!(1===e&&c.rectangular||2===e&&!c.rectangular||null!=r&&(c.getSymbolWidth()<r.getWidth()||c.getSymbolHeight()<r.getHeight())||null!=n&&(c.getSymbolWidth()>n.getWidth()||c.getSymbolHeight()>n.getHeight()))&&t<=c.dataCapacity)return c}}catch(t){i={error:t}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}if(o)throw Error("Can't find a symbol arrangement that matches the message. Data codewords: "+t);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+2*this.getHorizontalDataRegions()},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+2*this.getVerticalDataRegions()},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(t){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(t){return this.rsBlockError},t}(),oC=function(t){function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return ov(e,t),e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(o_),oA=[new o_(!1,3,5,8,8,1),new o_(!1,5,7,10,10,1),new o_(!0,5,7,16,6,1),new o_(!1,8,10,12,12,1),new o_(!0,10,11,14,6,2),new o_(!1,12,12,14,14,1),new o_(!0,16,14,24,10,1),new o_(!1,18,14,16,16,1),new o_(!1,22,18,18,18,1),new o_(!0,22,18,16,10,2),new o_(!1,30,20,20,20,1),new o_(!0,32,24,16,14,2),new o_(!1,36,24,22,22,1),new o_(!1,44,28,24,24,1),new o_(!0,49,28,22,14,2),new o_(!1,62,36,14,14,4),new o_(!1,86,42,16,16,4),new o_(!1,114,48,18,18,4),new o_(!1,144,56,20,20,4),new o_(!1,174,68,22,22,4),new o_(!1,204,84,24,24,4,102,42),new o_(!1,280,112,14,14,16,140,56),new o_(!1,368,144,16,16,16,92,36),new o_(!1,456,192,18,18,16,114,48),new o_(!1,576,224,20,20,16,144,56),new o_(!1,696,272,22,22,16,174,68),new o_(!1,816,336,24,24,16,136,56),new o_(!1,1050,408,18,18,36,175,68),new o_(!1,1304,496,20,20,36,163,62),new oC],oE=function(){function t(t){this.msg=t,this.pos=0,this.skipAtEnd=0;for(var e=t.split("").map(function(t){return t.charCodeAt(0)}),r=new th,n=0,o=e.length;n<o;n++){var i=String.fromCharCode(255&e[n]);if("?"===i&&"?"!==t.charAt(n))throw Error("Message contains characters outside ISO-8859-1 encoding.");r.append(i)}this.msg=r.toString(),this.shape=0,this.codewords=new th,this.newEncoding=-1}return t.prototype.setSymbolShape=function(t){this.shape=t},t.prototype.setSizeConstraints=function(t,e){this.minSize=t,this.maxSize=e},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(t){this.skipAtEnd=t},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(t){this.codewords.append(t)},t.prototype.writeCodeword=function(t){this.codewords.append(t)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(t){this.newEncoding=t},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(t){void 0===t&&(t=this.getCodewordCount()),(null==this.symbolInfo||t>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=o_.lookup(t,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),oI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ob=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oI(e,t),e.prototype.getEncodingMode=function(){return 3},e.prototype.encode=function(t){for(var e=new th;t.hasMoreCharacters();){var r=t.getCurrentChar();if(t.pos++,this.encodeChar(r,e),e.length()%3==0&&(this.writeNextTriplet(t,e),oT.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode())!==this.getEncodingMode())){t.signalEncoderChange(0);break}}this.handleEOD(t,e)},e.prototype.encodeChar=function(t,e){switch(t){case 13:e.append(0);break;case 42:e.append(1);break;case 62:e.append(2);break;case 32:e.append(3);break;default:t>=48&&t<=57?e.append(t-48+4):t>=65&&t<=90?e.append(t-65+14):oT.illegalCharacter(tl.getCharAt(t))}return 1},e.prototype.handleEOD=function(t,e){t.updateSymbolInfo();var r=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),n=e.length();t.pos-=n,(t.getRemainingCharacters()>1||r>1||t.getRemainingCharacters()!==r)&&t.writeCodeword(254),0>t.getNewEncoding()&&t.signalEncoderChange(0)},e}(oy),oS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oS(e,t),e.prototype.getEncodingMode=function(){return 2},e.prototype.encodeChar=function(t,e){return 32===t?(e.append(3),1):t>=48&&t<=57?(e.append(t-48+4),1):t>=97&&t<=122?(e.append(t-97+14),1):t<32?(e.append(0),e.append(t),2):t<=47?(e.append(1),e.append(t-33),2):t<=64?(e.append(1),e.append(t-58+15),2):t>=91&&t<=95?(e.append(1),e.append(t-91+22),2):96===t?(e.append(2),e.append(0),2):t<=90?(e.append(2),e.append(t-65+1),2):t<=127?(e.append(2),e.append(t-123+27),2):(e.append("1\x1e"),2+this.encodeChar(t-128,e))},e}(oy);let oT=function(){function t(){}return t.randomize253State=function(t){var e=129+(149*t%253+1);return e<=254?e:e-254},t.encodeHighLevel=function(t,e,r,n,o){void 0===e&&(e=0),void 0===r&&(r=null),void 0===n&&(n=null),void 0===o&&(o=!1);var i=new oy,a=[new op,i,new oN,new ob,new om,new og],s=new oE(t);s.setSymbolShape(e),s.setSizeConstraints(r,n),t.startsWith(oh)&&t.endsWith("\x1e\x04")?(s.writeCodeword(236),s.setSkipAtEnd(2),s.pos+=oh.length):t.startsWith(od)&&t.endsWith("\x1e\x04")&&(s.writeCodeword(237),s.setSkipAtEnd(2),s.pos+=od.length);var u=0;for(o&&(i.encodeMaximal(s),u=s.getNewEncoding(),s.resetEncoderSignal());s.hasMoreCharacters();)a[u].encode(s),s.getNewEncoding()>=0&&(u=s.getNewEncoding(),s.resetEncoderSignal());var c=s.getCodewordCount();s.updateSymbolInfo();var l=s.getSymbolInfo().getDataCapacity();c<l&&0!==u&&5!==u&&4!==u&&s.writeCodeword("\xfe");var h=s.getCodewords();for(h.length()<l&&h.append(129);h.length()<l;)h.append(this.randomize253State(h.length()+1));return s.getCodewords().toString()},t.lookAheadTest=function(t,e,r){var n=this.lookAheadTestIntern(t,e,r);if(3===r&&3===n){for(var o=Math.min(e+3,t.length),i=e;i<o;i++)if(!this.isNativeX12(t.charCodeAt(i)))return 0}else if(4===r&&4===n){for(var o=Math.min(e+4,t.length),i=e;i<o;i++)if(!this.isNativeEDIFACT(t.charCodeAt(i)))return 0}return n},t.lookAheadTestIntern=function(t,e,r){if(e>=t.length)return r;0===r?n=[0,1,1,1,1,1.25]:(n=[1,2,2,2,2,2.25])[r]=0;for(var n,o=0,i=new Uint8Array(6),a=[];;){if(e+o===t.length){Q.fill(i,0),Q.fill(a,0);var s=this.findMinimums(n,a,tt.MAX_VALUE,i),u=this.getMinimumCount(i);if(a[0]===s)return 0;if(1===u){if(i[5]>0)return 5;if(i[4]>0)return 4;if(i[2]>0)return 2;if(i[3]>0)return 3}return 1}var c=t.charCodeAt(e+o);if(o++,this.isDigit(c)?n[0]+=.5:this.isExtendedASCII(c)?(n[0]=Math.ceil(n[0]),n[0]+=2):(n[0]=Math.ceil(n[0]),n[0]++),this.isNativeC40(c)?n[1]+=2/3:this.isExtendedASCII(c)?n[1]+=8/3:n[1]+=4/3,this.isNativeText(c)?n[2]+=2/3:this.isExtendedASCII(c)?n[2]+=8/3:n[2]+=4/3,this.isNativeX12(c)?n[3]+=2/3:this.isExtendedASCII(c)?n[3]+=13/3:n[3]+=10/3,this.isNativeEDIFACT(c)?n[4]+=.75:this.isExtendedASCII(c)?n[4]+=4.25:n[4]+=3.25,this.isSpecialB256(c)?n[5]+=4:n[5]++,o>=4){if(Q.fill(i,0),Q.fill(a,0),this.findMinimums(n,a,tt.MAX_VALUE,i),a[0]<this.min(a[5],a[1],a[2],a[3],a[4]))return 0;if(a[5]<a[0]||a[5]+1<this.min(a[1],a[2],a[3],a[4]))return 5;if(a[4]+1<this.min(a[5],a[1],a[2],a[3],a[0]))return 4;if(a[2]+1<this.min(a[5],a[1],a[4],a[3],a[0]))return 2;if(a[3]+1<this.min(a[5],a[1],a[4],a[2],a[0]))return 3;if(a[1]+1<this.min(a[0],a[5],a[4],a[2])){if(a[1]<a[3])return 1;if(a[1]===a[3]){for(var l=e+o+1;l<t.length;){var h=t.charCodeAt(l);if(this.isX12TermSep(h))return 3;if(!this.isNativeX12(h))break;l++}return 1}}}}},t.min=function(t,e,r,n,o){var i=Math.min(t,Math.min(e,Math.min(r,n)));return void 0===o?i:Math.min(i,o)},t.findMinimums=function(t,e,r,n){for(var o=0;o<6;o++){var i=e[o]=Math.ceil(t[o]);r>i&&(r=i,Q.fill(n,0)),r===i&&(n[o]=n[o]+1)}return r},t.getMinimumCount=function(t){for(var e=0,r=0;r<6;r++)e+=t[r];return e||0},t.isDigit=function(t){return t>=48&&t<=57},t.isExtendedASCII=function(t){return t>=128&&t<=255},t.isNativeC40=function(t){return 32===t||t>=48&&t<=57||t>=65&&t<=90},t.isNativeText=function(t){return 32===t||t>=48&&t<=57||t>=97&&t<=122},t.isNativeX12=function(t){return this.isX12TermSep(t)||32===t||t>=48&&t<=57||t>=65&&t<=90},t.isX12TermSep=function(t){return 13===t||42===t||62===t},t.isNativeEDIFACT=function(t){return t>=32&&t<=94},t.isSpecialB256=function(t){return!1},t.determineConsecutiveDigitCount=function(t,e){void 0===e&&(e=0);for(var r=t.length,n=e;n<r&&this.isDigit(t.charCodeAt(n));)n++;return n-e},t.illegalCharacter=function(t){var e=tt.toHexString(t.charCodeAt(0));throw Error("Illegal character: "+t+" (0x"+(e="0000".substring(0,4-e.length)+e)+")")},t}();var ox=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oO=function(){function t(t){this.charset=t,this.name=t.name}return t.prototype.canEncode=function(t){try{return null!=tc.encode(t,this.charset)}catch(t){return!1}},t}(),oR=function(){function t(t,e,r){this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(t){return new oO(oo.forName(t))}),this.encoders=[];var n,o,i,a,s,u,c=[];c.push(new oO(oi.ISO_8859_1));for(var l=null!=e&&e.name.startsWith("UTF"),h=0;h<t.length;h++){var d=!1;try{for(var f=(n=void 0,ox(c)),p=f.next();!p.done;p=f.next()){var g=p.value,y=t.charAt(h);if(y.charCodeAt(0)===r||g.canEncode(y)){d=!0;break}}}catch(t){n={error:t}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}if(!d)try{for(var m=(i=void 0,ox(this.ENCODERS)),v=m.next();!v.done;v=m.next()){var g=v.value;if(g.canEncode(t.charAt(h))){c.push(g),d=!0;break}}}catch(t){i={error:t}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}d||(l=!0)}if(1!==c.length||l){this.encoders=[];var w=0;try{for(var _=ox(c),C=_.next();!C.done;C=_.next()){var g=C.value;this.encoders[w++]=g}}catch(t){s={error:t}}finally{try{C&&!C.done&&(u=_.return)&&u.call(_)}finally{if(s)throw s.error}}}else this.encoders=[c[0]];var A=-1;if(null!=e){for(var h=0;h<this.encoders.length;h++)if(null!=this.encoders[h]&&e.name===this.encoders[h].name){A=h;break}}this.priorityEncoderIndex=A}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(t){if(!(t<this.length()))throw Error("index must be less than length");return this.encoders[t].name},t.prototype.getCharset=function(t){if(!(t<this.length()))throw Error("index must be less than length");return this.encoders[t].charset},t.prototype.getECIValue=function(t){return this.encoders[t].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(t,e){if(!(e<this.length()))throw Error("index must be less than length");return!0},t.prototype.encode=function(t,e){if(!(e<this.length()))throw Error("index must be less than length");return tc.encode(tl.getCharAt(t),this.encoders[e].name)},t}(),oD=function(){function t(t,e,r){this.fnc1=r;var n=new oR(t,e,r);if(1===n.length())for(var o=0;o<this.bytes.length;o++){var i=t.charAt(o).charCodeAt(0);this.bytes[o]=i===r?1e3:i}else this.bytes=this.encodeMinimally(t,n,r)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(t,e){if(t+e-1>=this.bytes.length)return!1;for(var r=0;r<e;r++)if(this.isECI(t+r))return!1;return!0},t.prototype.charAt=function(t){if(t<0||t>=this.length())throw Error(""+t);if(this.isECI(t))throw Error("value at "+t+" is not a character but an ECI");return this.isFNC1(t)?this.fnc1:this.bytes[t]},t.prototype.subSequence=function(t,e){if(t<0||t>e||e>this.length())throw Error(""+t);for(var r=new th,n=t;n<e;n++){if(this.isECI(n))throw Error("value at "+n+" is not a character but an ECI");r.append(this.charAt(n))}return r.toString()},t.prototype.isECI=function(t){if(t<0||t>=this.length())throw Error(""+t);return this.bytes[t]>255&&this.bytes[t]<=999},t.prototype.isFNC1=function(t){if(t<0||t>=this.length())throw Error(""+t);return 1e3===this.bytes[t]},t.prototype.getECIValue=function(t){if(t<0||t>=this.length())throw Error(""+t);if(!this.isECI(t))throw Error("value at "+t+" is not an ECI but a character");return this.bytes[t]-256},t.prototype.addEdge=function(t,e,r){(null==t[e][r.encoderIndex]||t[e][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(t[e][r.encoderIndex]=r)},t.prototype.addEdges=function(t,e,r,n,o,i){var a=t.charAt(n).charCodeAt(0),s=0,u=e.length();e.getPriorityEncoderIndex()>=0&&(a===i||e.canEncode(a,e.getPriorityEncoderIndex()))&&(u=(s=e.getPriorityEncoderIndex())+1);for(var c=s;c<u;c++)(a===i||e.canEncode(a,c))&&this.addEdge(r,n+1,new oM(a,e,c,o,i))},t.prototype.encodeMinimally=function(t,e,r){var n=t.length,o=new oM[n+1][e.length()];this.addEdges(t,e,o,0,null,r);for(var i=1;i<=n;i++){for(var a=0;a<e.length();a++)null!=o[i][a]&&i<n&&this.addEdges(t,e,o,i,o[i][a],r);for(var a=0;a<e.length();a++)o[i-1][a]=null}for(var s=-1,u=tt.MAX_VALUE,a=0;a<e.length();a++)if(null!=o[n][a]){var c=o[n][a];c.cachedTotalSize<u&&(u=c.cachedTotalSize,s=a)}if(s<0)throw Error('Failed to encode "'+t+'"');for(var l=[],h=o[n][s];null!=h;){if(h.isFNC1())l.unshift(1e3);else for(var d=e.encode(h.c,h.encoderIndex),i=d.length-1;i>=0;i--)l.unshift(255&d[i]);(null===h.previous?0:h.previous.encoderIndex)!==h.encoderIndex&&l.unshift(256+e.getECIValue(h.encoderIndex)),h=h.previous}for(var f=[],i=0;i<f.length;i++)f[i]=l[i];return f},t}(),oM=function(){function t(t,e,r,n,o){this.c=t,this.encoderSet=e,this.encoderIndex=r,this.previous=n,this.fnc1=o,this.c=t===o?1e3:t;var i=this.isFNC1()?1:e.encode(t,r).length;(null===n?0:n.encoderIndex)!==r&&(i+=3),null!=n&&(i+=n.cachedTotalSize),this.cachedTotalSize=i}return t.prototype.isFNC1=function(){return 1e3===this.c},t}(),oP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oB=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ok=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},oL=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ok(arguments[e]));return t};!function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"}(v||(v={}));var oF=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],oj=function(){function t(){}return t.isExtendedASCII=function(t,e){return t!==e&&t>=128&&t<=255},t.isInC40Shift1Set=function(t){return t<=31},t.isInC40Shift2Set=function(t,e){var r,n;try{for(var o=oB(oF),i=o.next();!i.done;i=o.next())if(i.value.charCodeAt(0)===t)return!0}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return t===e},t.isInTextShift1Set=function(t){return this.isInC40Shift1Set(t)},t.isInTextShift2Set=function(t,e){return this.isInC40Shift2Set(t,e)},t.encodeHighLevel=function(t,e,r,n){void 0===e&&(e=null),void 0===r&&(r=-1),void 0===n&&(n=0);var o=0;return t.startsWith(oh)&&t.endsWith("\x1e\x04")?(o=5,t=t.substring(oh.length,t.length-2)):t.startsWith(od)&&t.endsWith("\x1e\x04")&&(o=6,t=t.substring(od.length,t.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,oL(this.encode(t,e,r,n,o)))))},t.encode=function(t,e,r,n,o){return this.encodeMinimally(new oH(t,e,r,n,o)).getBytes()},t.addEdge=function(t,e){var r=e.fromPosition+e.characterLength;(null===t[r][e.getEndMode()]||t[r][e.getEndMode()].cachedTotalSize>e.cachedTotalSize)&&(t[r][e.getEndMode()]=e)},t.getNumberOfC40Words=function(e,r,n,o){for(var i=0,a=r;a<e.length()&&!e.isECI(a);a++){var s=e.charAt(a);if(n&&oT.isNativeC40(s)||!n&&oT.isNativeText(s))i++;else if(t.isExtendedASCII(s,e.getFNC1Character())){var u=255&s;u>=128&&(n&&oT.isNativeC40(u-128)||!n&&oT.isNativeText(u-128))?i+=3:i+=4}else i+=2;if(i%3==0||(i-2)%3==0&&a+1===e.length())return o[0]=a-r+1,Math.ceil(i/3)}return o[0]=0,0},t.addEdges=function(e,r,n,o){if(e.isECI(n)){this.addEdge(r,new oU(e,v.ASCII,n,1,o));return}var i,a,s,u=e.charAt(n);if(null===o||o.getEndMode()!==v.EDF){oT.isDigit(u)&&e.haveNCharacters(n,2)&&oT.isDigit(e.charAt(n+1))?this.addEdge(r,new oU(e,v.ASCII,n,2,o)):this.addEdge(r,new oU(e,v.ASCII,n,1,o));var c=[v.C40,v.TEXT];try{for(var l=oB(c),h=l.next();!h.done;h=l.next()){var d=h.value,f=[];t.getNumberOfC40Words(e,n,d===v.C40,f)>0&&this.addEdge(r,new oU(e,d,n,f[0],o))}}catch(t){i={error:t}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}e.haveNCharacters(n,3)&&oT.isNativeX12(e.charAt(n))&&oT.isNativeX12(e.charAt(n+1))&&oT.isNativeX12(e.charAt(n+2))&&this.addEdge(r,new oU(e,v.X12,n,3,o)),this.addEdge(r,new oU(e,v.B256,n,1,o))}for(s=0;s<3;s++){var p=n+s;if(e.haveNCharacters(p,1)&&oT.isNativeEDIFACT(e.charAt(p)))this.addEdge(r,new oU(e,v.EDF,n,s+1,o));else break}3===s&&e.haveNCharacters(n,4)&&oT.isNativeEDIFACT(e.charAt(n+3))&&this.addEdge(r,new oU(e,v.EDF,n,4,o))},t.encodeMinimally=function(t){var e=t.length(),r=Array(e+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(t,r,0,null);for(var n=1;n<=e;n++){for(var o=0;o<6;o++)null!==r[n][o]&&n<e&&this.addEdges(t,r,n,r[n][o]);for(var o=0;o<6;o++)r[n-1][o]=null}for(var i=-1,a=tt.MAX_VALUE,o=0;o<6;o++)if(null!==r[e][o]){var s=r[e][o],u=o>=1&&o<=3?s.cachedTotalSize+1:s.cachedTotalSize;u<a&&(a=u,i=o)}if(i<0)throw Error('Failed to encode "'+t+'"');return new oV(r[e][i])},t}(),oV=function(){function t(t){var e=t.input,r=0,n=[],o=[],i=[];(t.mode===v.C40||t.mode===v.TEXT||t.mode===v.X12)&&t.getEndMode()!==v.ASCII&&(r+=this.prepend(oU.getBytes(254),n));for(var a=t;null!==a;)r+=this.prepend(a.getDataBytes(),n),(null===a.previous||a.getPreviousStartMode()!==a.getMode())&&(a.getMode()===v.B256&&(r<=249?(n.unshift(r),r++):(n.unshift(r%250),n.unshift(r/250+249),r+=2),o.push(n.length),i.push(r)),this.prepend(a.getLatchBytes(),n),r=0),a=a.previous;5===e.getMacroId()?r+=this.prepend(oU.getBytes(236),n):6===e.getMacroId()&&(r+=this.prepend(oU.getBytes(237),n)),e.getFNC1Character()>0&&(r+=this.prepend(oU.getBytes(232),n));for(var s=0;s<o.length;s++)this.applyRandomPattern(n,n.length-o[s],i[s]);var u=t.getMinSymbolSize(n.length);for(n.length<u&&n.push(129);n.length<u;)n.push(this.randomize253State(n.length+1));this.bytes=new Uint8Array(n.length);for(var s=0;s<this.bytes.length;s++)this.bytes[s]=n[s]}return t.prototype.prepend=function(t,e){for(var r=t.length-1;r>=0;r--)e.unshift(t[r]);return t.length},t.prototype.randomize253State=function(t){var e=129+(149*t%253+1);return e<=254?e:e-254},t.prototype.applyRandomPattern=function(t,e,r){for(var n=0;n<r;n++){var o=e+n,i=(255&t[o])+(149*(o+1)%255+1);t[o]=i<=255?i:i-256}},t.prototype.getBytes=function(){return this.bytes},t}(),oU=function(){function t(t,e,r,n,o){if(this.input=t,this.mode=e,this.fromPosition=r,this.characterLength=n,this.previous=o,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(r+n<=t.length()))throw Error("Invalid edge");var i=null!==o?o.cachedTotalSize:0,a=this.getPreviousMode();switch(e){case v.ASCII:i++,(t.isECI(r)||oj.isExtendedASCII(t.charAt(r),t.getFNC1Character()))&&i++,(a===v.C40||a===v.TEXT||a===v.X12)&&i++;break;case v.B256:i++,a!==v.B256?i++:250===this.getB256Size()&&i++,a===v.ASCII?i++:(a===v.C40||a===v.TEXT||a===v.X12)&&(i+=2);break;case v.C40:case v.TEXT:case v.X12:e===v.X12?i+=2:i+=2*oj.getNumberOfC40Words(t,r,e===v.C40,[]),a===v.ASCII||a===v.B256?i++:a!==e&&(a===v.C40||a===v.TEXT||a===v.X12)&&(i+=2);break;case v.EDF:i+=3,a===v.ASCII||a===v.B256?i++:(a===v.C40||a===v.TEXT||a===v.X12)&&(i+=2)}this.cachedTotalSize=i}return t.prototype.getB256Size=function(){for(var t=0,e=this;null!==e&&e.mode===v.B256&&t<=250;)t++,e=e.previous;return t},t.prototype.getPreviousStartMode=function(){return null===this.previous?v.ASCII:this.previous.mode},t.prototype.getPreviousMode=function(){return null===this.previous?v.ASCII:this.previous.getEndMode()},t.prototype.getEndMode=function(){if(this.mode===v.EDF){if(this.characterLength<4)return v.ASCII;var t=this.getLastASCII();if(t>0&&this.getCodewordsRemaining(this.cachedTotalSize+t)<=2-t)return v.ASCII}if(this.mode===v.C40||this.mode===v.TEXT||this.mode===v.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&0===this.getCodewordsRemaining(this.cachedTotalSize))return v.ASCII;var t=this.getLastASCII();if(1===t&&0===this.getCodewordsRemaining(this.cachedTotalSize+1))return v.ASCII}return this.mode},t.prototype.getMode=function(){return this.mode},t.prototype.getLastASCII=function(){var t=this.input.length(),e=this.fromPosition+this.characterLength;return t-e>4||e>=t?0:t-e==1?oj.isExtendedASCII(this.input.charAt(e),this.input.getFNC1Character())?0:1:t-e==2?oj.isExtendedASCII(this.input.charAt(e),this.input.getFNC1Character())||oj.isExtendedASCII(this.input.charAt(e+1),this.input.getFNC1Character())?0:oT.isDigit(this.input.charAt(e))&&oT.isDigit(this.input.charAt(e+1))?1:2:t-e==3?oT.isDigit(this.input.charAt(e))&&oT.isDigit(this.input.charAt(e+1))&&!oj.isExtendedASCII(this.input.charAt(e+2),this.input.getFNC1Character())||oT.isDigit(this.input.charAt(e+1))&&oT.isDigit(this.input.charAt(e+2))&&!oj.isExtendedASCII(this.input.charAt(e),this.input.getFNC1Character())?2:0:oT.isDigit(this.input.charAt(e))&&oT.isDigit(this.input.charAt(e+1))&&oT.isDigit(this.input.charAt(e+2))&&oT.isDigit(this.input.charAt(e+3))?2:0},t.prototype.getMinSymbolSize=function(t){var e,r,n,o,i,a;switch(this.input.getShapeHint()){case 1:try{for(var s=oB(this.squareCodewordCapacities),u=s.next();!u.done;u=s.next()){var c=u.value;if(c>=t)return c}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}break;case 2:try{for(var l=oB(this.rectangularCodewordCapacities),h=l.next();!h.done;h=l.next()){var c=h.value;if(c>=t)return c}}catch(t){n={error:t}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}}try{for(var d=oB(this.allCodewordCapacities),f=d.next();!f.done;f=d.next()){var c=f.value;if(c>=t)return c}}catch(t){i={error:t}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},t.prototype.getCodewordsRemaining=function(t){return this.getMinSymbolSize(t)-t},t.getBytes=function(t,e){var r=new Uint8Array(e?2:1);return r[0]=t,e&&(r[1]=e),r},t.prototype.setC40Word=function(t,e,r,n,o){var i=1600*(255&r)+40*(255&n)+(255&o)+1;t[e]=i/256,t[e+1]=i%256},t.prototype.getX12Value=function(t){return 13===t?0:42===t?1:62===t?2:32===t?3:t>=48&&t<=57?t-44:t>=65&&t<=90?t-51:t},t.prototype.getX12Words=function(){if(this.characterLength%3!=0)throw Error("X12 words must be a multiple of 3");for(var t=new Uint8Array(this.characterLength/3*2),e=0;e<t.length;e+=2)this.setC40Word(t,e,this.getX12Value(this.input.charAt(this.fromPosition+e/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+e/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+e/2*3+2)));return t},t.prototype.getShiftValue=function(t,e,r){return e&&oj.isInC40Shift1Set(t)||!e&&oj.isInTextShift1Set(t)?0:e&&oj.isInC40Shift2Set(t,r)||!e&&oj.isInTextShift2Set(t,r)?1:2},t.prototype.getC40Value=function(t,e,r,n){if(r===n){if(2!==e)throw Error("FNC1 cannot be used in C40 shift 2");return 27}return t?r<=31?r:32===r?3:r<=47?r-33:r<=57?r-44:r<=64?r-43:r<=90?r-51:r<=95?r-69:r<=127?r-96:r:0===r?0:0===e&&r<=3?r-1:1===e&&r<=31?r:32===r?3:r>=33&&r<=47?r-33:r>=48&&r<=57?r-44:r>=58&&r<=64?r-43:r>=65&&r<=90?r-64:r>=91&&r<=95?r-69:96===r?0:r>=97&&r<=122?r-83:r>=123&&r<=127?r-96:r},t.prototype.getC40Words=function(t,e){for(var r=[],n=0;n<this.characterLength;n++){var o=this.input.charAt(this.fromPosition+n);if(t&&oT.isNativeC40(o)||!t&&oT.isNativeText(o))r.push(this.getC40Value(t,0,o,e));else if(oj.isExtendedASCII(o,e)){var i=(255&o)-128;if(t&&oT.isNativeC40(i)||!t&&oT.isNativeText(i))r.push(1),r.push(30),r.push(this.getC40Value(t,0,i,e));else{r.push(1),r.push(30);var a=this.getShiftValue(i,t,e);r.push(a),r.push(this.getC40Value(t,a,i,e))}}else{var a=this.getShiftValue(o,t,e);r.push(a),r.push(this.getC40Value(t,a,o,e))}}if(r.length%3!=0){if(!((r.length-2)%3==0&&this.fromPosition+this.characterLength===this.input.length()))throw Error("C40 words must be a multiple of 3");r.push(0)}for(var s=new Uint8Array(r.length/3*2),u=0,n=0;n<r.length;n+=3)this.setC40Word(s,u,255&r[n],255&r[n+1],255&r[n+2]),u+=2;return s},t.prototype.getEDFBytes=function(){for(var t=Math.ceil(this.characterLength/4),e=new Uint8Array(3*t),r=this.fromPosition,n=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),o=0;o<t;o+=3){for(var i=[],a=0;a<4;a++)r<=n?i[a]=63&this.input.charAt(r++):i[a]=r===n+1?31:0;var s=i[0]<<18;s|=i[1]<<12,s|=i[2]<<6,s|=i[3],e[o]=s>>16&255,e[o+1]=s>>8&255,e[o+2]=255&s}return e},t.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case v.ASCII:case v.B256:switch(this.mode){case v.B256:return t.getBytes(231);case v.C40:return t.getBytes(230);case v.TEXT:return t.getBytes(239);case v.X12:return t.getBytes(238);case v.EDF:return t.getBytes(240)}break;case v.C40:case v.TEXT:case v.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case v.ASCII:return t.getBytes(254);case v.B256:return t.getBytes(254,231);case v.C40:return t.getBytes(254,230);case v.TEXT:return t.getBytes(254,239);case v.X12:return t.getBytes(254,238);case v.EDF:return t.getBytes(254,240)}break;case v.EDF:if(this.mode!==v.EDF)throw Error("Cannot switch from EDF to "+this.mode)}return new Uint8Array(0)},t.prototype.getDataBytes=function(){switch(this.mode){case v.ASCII:if(this.input.isECI(this.fromPosition))return t.getBytes(241,this.input.getECIValue(this.fromPosition)+1);if(oj.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character()))return t.getBytes(235,this.input.charAt(this.fromPosition)-127);if(2===this.characterLength)return t.getBytes(10*this.input.charAt(this.fromPosition)+this.input.charAt(this.fromPosition+1)+130);if(this.input.isFNC1(this.fromPosition))return t.getBytes(232);else return t.getBytes(this.input.charAt(this.fromPosition)+1);case v.B256:return t.getBytes(this.input.charAt(this.fromPosition));case v.C40:return this.getC40Words(!0,this.input.getFNC1Character());case v.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case v.X12:return this.getX12Words();case v.EDF:return this.getEDFBytes()}},t}(),oH=function(t){function e(e,r,n,o,i){var a=t.call(this,e,r,n)||this;return a.shape=o,a.macroId=i,a}return oP(e,t),e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e}(oD);(function(){function t(){}t.prototype.encode=function(t,e,r,n,o){if(void 0===o&&(o=null),""===t.trim())throw Error("Found empty contents");if(e!==tO.DATA_MATRIX)throw Error("Can only encode DATA_MATRIX, but got "+e);if(r<0||n<0)throw Error("Requested dimensions can't be negative: "+r+"x"+n);var i,a=0,s=null,u=null;if(null!=o){var c=o.get(nJ.DATA_MATRIX_SHAPE);null!=c&&(a=c);var l=o.get(nJ.MIN_SIZE);null!=l&&(s=l);var h=o.get(nJ.MAX_SIZE);null!=h&&(u=h)}if(null!=o&&o.has(nJ.DATA_MATRIX_COMPACT)&&o.get(nJ.DATA_MATRIX_COMPACT).toString()){var d=o.has(nJ.GS1_FORMAT)&&!!o.get(nJ.GS1_FORMAT).toString(),f=null;o.has(nJ.CHARACTER_SET)&&(f=oo.forName(o.get(nJ.CHARACTER_SET).toString())),i=oj.encodeHighLevel(t,f,d?29:-1,a)}else{var p=null!=o&&o.has(nJ.FORCE_C40)&&!!o.get(nJ.FORCE_C40).toString();i=oT.encodeHighLevel(t,a,s,u,p)}var g=o_.lookup(i.length,a,s,u,!0),y=new oa(of.encodeECC200(i,g),g.getSymbolDataWidth(),g.getSymbolDataHeight());return y.place(),this.encodeLowLevel(y,g,r,n)},t.prototype.encodeLowLevel=function(t,e,r,n){for(var o=e.getSymbolDataWidth(),i=e.getSymbolDataHeight(),a=new n2(e.getSymbolWidth(),e.getSymbolHeight()),s=0,u=0;u<i;u++){var c=void 0;if(u%e.matrixHeight==0){c=0;for(var l=0;l<e.getSymbolWidth();l++)a.setBoolean(c,s,l%2==0),c++;s++}c=0;for(var l=0;l<o;l++)l%e.matrixWidth==0&&(a.setBoolean(c,s,!0),c++),a.setBoolean(c,s,t.getBit(l,u)),c++,l%e.matrixWidth==e.matrixWidth-1&&(a.setBoolean(c,s,u%2==0),c++);if(s++,u%e.matrixHeight==e.matrixHeight-1){c=0;for(var l=0;l<e.getSymbolWidth();l++)a.setBoolean(c,s,!0),c++;s++}}return this.convertByteMatrixToBitMatrix(a,r,n)},t.prototype.convertByteMatrixToBitMatrix=function(t,e,r){var n,o=t.getWidth(),i=t.getHeight(),a=Math.max(e,o),s=Math.max(r,i),u=Math.min(a/o,s/i),c=(a-o*u)/2,l=(s-i*u)/2;r<i||e<o?(c=0,l=0,n=new td(o,i)):n=new td(e,r),n.clear();for(var h=0,d=l;h<i;h++,d+=u)for(var f=0,p=c;f<o;f++,p+=u)1===t.get(f,h)&&n.setRegion(p,d,u,u);return n}})();var oX=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(t){this.compact=t},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(t){this.size=t},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(t){this.layers=t},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(t){this.codeWords=t},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(t){this.matrix=t},t}(),oW=function(){function t(){}return t.singletonList=function(t){return[t]},t.min=function(t,e){return t.sort(e)[0]},t}(),oG=function(){function t(t){this.previous=t}return t.prototype.getPrevious=function(){return this.previous},t}(),oz=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oZ=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.value=r,o.bitCount=n,o}return oz(e,t),e.prototype.appendTo=function(t,e){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+tt.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(oG),oY=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oK=function(t){function e(e,r,n){var o=t.call(this,e,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=n,o}return oY(e,t),e.prototype.appendTo=function(t,e){for(var r=0;r<this.binaryShiftByteCount;r++)(0===r||31===r&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):0===r?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(e[this.binaryShiftStart+r],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(oZ);function o$(t,e,r){return new oZ(t,e,r)}var oq=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],oJ=new oZ(null,0,0),oQ=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],o1=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o0=function(t){var e,r;try{for(var n=o1(t),o=n.next();!o.done;o=n.next()){var i=o.value;Q.fill(i,-1)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[0][4]=0,t[1][4]=0,t[1][0]=28,t[3][4]=0,t[2][4]=0,t[2][0]=15,t}(Q.createInt32Array(6,6)),o2=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o4=function(){function t(t,e,r,n){this.token=t,this.mode=e,this.binaryShiftByteCount=r,this.bitCount=n}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,o=this.token;if(e!==this.mode){var i=oQ[this.mode][e];o=o$(o,65535&i,i>>16),n+=i>>16}var a=2===e?4:5;return new t(o=o$(o,r,a),e,0,n+a)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,o=2===this.mode?4:5;return n=o$(n,o0[this.mode][e],o),new t(n=o$(n,r,5),this.mode,0,this.bitCount+o+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,o=this.bitCount;if(4===this.mode||2===this.mode){var i=oQ[n][0];r=o$(r,65535&i,i>>16),o+=i>>16,n=0}var a=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,s=new t(r,n,this.binaryShiftByteCount+1,o+a);return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(e+1)),s},t.prototype.endBinaryShift=function(e){if(0===this.binaryShiftByteCount)return this;var r=this.token;return new t(r=new oK(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(oQ[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(t){for(var e,r,n=[],o=this.endBinaryShift(t.length).token;null!==o;o=o.getPrevious())n.unshift(o);var i=new te;try{for(var a=o2(n),s=a.next();!s.done;s=a.next())s.value.appendTo(i,t)}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},t.prototype.toString=function(){return tl.format("%s bits=%d bytes=%d",oq[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(oJ,0,0,0),t}(),o3=function(t){var e=tl.getCharCode(" "),r=tl.getCharCode("."),n=tl.getCharCode(",");t[0][e]=1;for(var o=tl.getCharCode("Z"),i=tl.getCharCode("A"),a=i;a<=o;a++)t[0][a]=a-i+2;t[1][e]=1;for(var s=tl.getCharCode("z"),u=tl.getCharCode("a"),a=u;a<=s;a++)t[1][a]=a-u+2;t[2][e]=1;for(var c=tl.getCharCode("9"),l=tl.getCharCode("0"),a=l;a<=c;a++)t[2][a]=a-l+2;t[2][n]=12,t[2][r]=13;for(var h=["\x00"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","	","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"],d=0;d<h.length;d++)t[3][tl.getCharCode(h[d])]=d;for(var f=["\x00","\r","\x00","\x00","\x00","\x00","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],d=0;d<f.length;d++)tl.getCharCode(f[d])>0&&(t[4][tl.getCharCode(f[d])]=d);return t}(Q.createInt32Array(5,256)),o6=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o8=function(){function t(t){this.text=t}return t.prototype.encode=function(){for(var e=tl.getCharCode(" "),r=tl.getCharCode("\n"),n=oW.singletonList(o4.INITIAL_STATE),o=0;o<this.text.length;o++){var i=void 0,a=o+1<this.text.length?this.text[o+1]:0;switch(this.text[o]){case tl.getCharCode("\r"):i=a===r?2:0;break;case tl.getCharCode("."):i=a===e?3:0;break;case tl.getCharCode(","):i=a===e?4:0;break;case tl.getCharCode(":"):i=a===e?5:0;break;default:i=0}i>0?(n=t.updateStateListForPair(n,o,i),o++):n=this.updateStateListForChar(n,o)}return oW.min(n,function(t,e){return t.getBitCount()-e.getBitCount()}).toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,o,i=[];try{for(var a=o6(e),s=a.next();!s.done;s=a.next()){var u=s.value;this.updateStateForChar(u,r,i)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return t.simplifyStates(i)},t.prototype.updateStateForChar=function(t,e,r){for(var n=255&this.text[e],o=o3[t.getMode()][n]>0,i=null,a=0;a<=4;a++){var s=o3[a][n];if(s>0){if(null==i&&(i=t.endBinaryShift(e)),!o||a===t.getMode()||2===a){var u=i.latchAndAppend(a,s);r.push(u)}if(!o&&o0[t.getMode()][a]>=0){var c=i.shiftAndAppend(a,s);r.push(c)}}}if(t.getBinaryShiftByteCount()>0||0===o3[t.getMode()][n]){var l=t.addBinaryShiftChar(e);r.push(l)}},t.updateStateListForPair=function(t,e,r){var n,o,i=[];try{for(var a=o6(t),s=a.next();!s.done;s=a.next()){var u=s.value;this.updateStateForPair(u,e,r,i)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return this.simplifyStates(i)},t.updateStateForPair=function(t,e,r,n){var o=t.endBinaryShift(e);if(n.push(o.latchAndAppend(4,r)),4!==t.getMode()&&n.push(o.shiftAndAppend(4,r)),3===r||4===r){var i=o.latchAndAppend(2,16-r).latchAndAppend(2,1);n.push(i)}if(t.getBinaryShiftByteCount()>0){var a=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);n.push(a)}},t.simplifyStates=function(t){var e,r,n,o,i=[];try{for(var a=o6(t),s=a.next();!s.done;s=a.next()){var u=s.value,c=!0,l=function(t){if(t.isBetterThanOrEqualTo(u))return c=!1,"break";u.isBetterThanOrEqualTo(t)&&(i=i.filter(function(e){return e!==t}))};try{for(var h=(n=void 0,o6(i)),d=h.next();!d.done;d=h.next()){var f=d.value,p=l(f);if("break"===p)break}}catch(t){n={error:t}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}c&&i.push(u)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},t}(),o5=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o9=function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var o,i,a,s,u,c,l=new o8(e).encode(),h=tt.truncDivision(l.getSize()*r,100)+11,d=l.getSize()+h;if(n!==t.DEFAULT_AZTEC_LAYERS){if(o=n<0,(i=Math.abs(n))>(o?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new H(tl.format("Illegal value %s for layers",n));var f=(a=t.totalBitsInLayer(i,o))-a%(s=t.WORD_SIZE[i]);if((u=t.stuffBits(l,s)).getSize()+h>f||o&&u.getSize()>64*s)throw new H("Data to large for user specified layer")}else{s=0,u=null;for(var p=0;;p++){if(p>t.MAX_NB_BITS)throw new H("Data too large for an Aztec code");if(i=(o=p<=3)?p+1:p,!(d>(a=t.totalBitsInLayer(i,o)))){(null==u||s!==t.WORD_SIZE[i])&&(s=t.WORD_SIZE[i],u=t.stuffBits(l,s));var f=a-a%s;if(!(o&&u.getSize()>64*s)&&u.getSize()+h<=f)break}}}var g=t.generateCheckWords(u,a,s),y=u.getSize()/s,m=t.generateModeMessage(o,i,y),v=(o?11:14)+4*i,w=new Int32Array(v);if(o){c=v;for(var p=0;p<w.length;p++)w[p]=p}else{c=v+1+2*tt.truncDivision(tt.truncDivision(v,2)-1,15);for(var _=tt.truncDivision(v,2),C=tt.truncDivision(c,2),p=0;p<_;p++){var A=p+tt.truncDivision(p,15);w[_-p-1]=C-A-1,w[_+p]=C+A+1}}for(var E=new td(c),p=0,I=0;p<i;p++){for(var b=(i-p)*4+(o?9:12),S=0;S<b;S++)for(var N=2*S,T=0;T<2;T++)g.get(I+N+T)&&E.set(w[2*p+T],w[2*p+S]),g.get(I+2*b+N+T)&&E.set(w[2*p+S],w[v-1-2*p-T]),g.get(I+4*b+N+T)&&E.set(w[v-1-2*p-T],w[v-1-2*p-S]),g.get(I+6*b+N+T)&&E.set(w[v-1-2*p-S],w[2*p+T]);I+=8*b}if(t.drawModeMessage(E,o,c,m),o)t.drawBullsEye(E,tt.truncDivision(c,2),5);else{t.drawBullsEye(E,tt.truncDivision(c,2),7);for(var p=0,S=0;p<tt.truncDivision(v,2)-1;p+=15,S+=16)for(var T=1&tt.truncDivision(c,2);T<c;T+=2)E.set(tt.truncDivision(c,2)-S,T),E.set(tt.truncDivision(c,2)+S,T),E.set(T,tt.truncDivision(c,2)-S),E.set(T,tt.truncDivision(c,2)+S)}var x=new oX;return x.setCompact(o),x.setSize(c),x.setLayers(i),x.setCodeWords(y),x.setMatrix(E),x},t.drawBullsEye=function(t,e,r){for(var n=0;n<r;n+=2)for(var o=e-n;o<=e+n;o++)t.set(o,e-n),t.set(o,e+n),t.set(e-n,o),t.set(e+n,o);t.set(e-r,e-r),t.set(e-r+1,e-r),t.set(e-r,e-r+1),t.set(e+r,e-r),t.set(e+r,e-r+1),t.set(e+r,e+r-1)},t.generateModeMessage=function(e,r,n){var o=new te;return e?(o.appendBits(r-1,2),o.appendBits(n-1,6),o=t.generateCheckWords(o,28,4)):(o.appendBits(r-1,5),o.appendBits(n-1,11),o=t.generateCheckWords(o,40,4)),o},t.drawModeMessage=function(t,e,r,n){var o=tt.truncDivision(r,2);if(e)for(var i=0;i<7;i++){var a=o-3+i;n.get(i)&&t.set(a,o-5),n.get(i+7)&&t.set(o+5,a),n.get(20-i)&&t.set(a,o+5),n.get(27-i)&&t.set(o-5,a)}else for(var i=0;i<10;i++){var a=o-5+i+tt.truncDivision(i,5);n.get(i)&&t.set(a,o-7),n.get(i+10)&&t.set(o+7,a),n.get(29-i)&&t.set(a,o+7),n.get(39-i)&&t.set(o-7,a)}},t.generateCheckWords=function(e,r,n){var o,i,a=e.getSize()/n,s=new nQ(t.getGF(n)),u=tt.truncDivision(r,n),c=t.bitsToWords(e,n,u);s.encode(c,u-a);var l=r%n,h=new te;h.appendBits(0,l);try{for(var d=o5(Array.from(c)),f=d.next();!f.done;f=d.next()){var p=f.value;h.appendBits(p,n)}}catch(t){o={error:t}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}return h},t.bitsToWords=function(t,e,r){var n,o,i=new Int32Array(r);for(n=0,o=t.getSize()/e;n<o;n++){for(var a=0,s=0;s<e;s++)a|=t.get(n*e+s)?1<<e-s-1:0;i[n]=a}return i},t.getGF=function(t){switch(t){case 4:return tF.AZTEC_PARAM;case 6:return tF.AZTEC_DATA_6;case 8:return tF.AZTEC_DATA_8;case 10:return tF.AZTEC_DATA_10;case 12:return tF.AZTEC_DATA_12;default:throw new H("Unsupported word size "+t)}},t.stuffBits=function(t,e){for(var r=new te,n=t.getSize(),o=(1<<e)-2,i=0;i<n;i+=e){for(var a=0,s=0;s<e;s++)(i+s>=n||t.get(i+s))&&(a|=1<<e-1-s);(a&o)===o?(r.appendBits(a&o,e),i--):(a&o)==0?(r.appendBits(1|a,e),i--):r.appendBits(a,e)}return r},t.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t}();function o7({onDetected:t,onError:e,isOpen:r,onClose:n}){let[o,i]=(0,I.useState)(!1),[a,s]=(0,I.useState)(null),[u,c]=(0,I.useState)(!1),[l,h]=(0,I.useState)(!1),[d,f]=(0,I.useState)(null),p=(0,I.useRef)(null),g=(0,I.useRef)(null),y=(0,I.useRef)(null);(0,I.useEffect)(()=>{let t=new nK;return f(t),()=>{t&&t.reset(),C()}},[]),(0,I.useEffect)(()=>(r?m():C(),()=>{C()}),[r]);let m=async()=>{try{s(null),h(!0),console.log("\uD83D\uDCF9 Запрашиваем доступ к камере...");let t=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});console.log("✅ Доступ к камере получен"),g.current=t,p.current&&(p.current.srcObject=t,await p.current.play(),console.log("\uD83C\uDFAC Видео началось играть"))}catch(t){console.error("❌ Ошибка доступа к камере:",t),s("Не удалось доступиться к камере. Пожалуйста, проверьте разрешения."),h(!1),e("Не удалось доступиться к камере")}},v=async()=>{l||(console.log("\uD83D\uDCF9 Камера не запущена, сначала запускаем камеру..."),await m());try{if(c(!0),i(!0),!d){console.error("❌ ZXing reader не инициализирован"),e("ZXing reader не инициализирован");return}console.log("\uD83D\uDD0D Запускаем сканирование с ZXing..."),w()}catch(t){console.error("❌ Ошибка запуска сканирования:",t),i(!1),c(!1),e("Не удалось запустить сканирование")}},w=async()=>{if(p.current&&d)try{console.log("\uD83D\uDD0D ZXing сканирование начато"),d.decodeFromVideoDevice(null,p.current,(e,r)=>{if(e){console.log("✅ ZXing обнаружил штрих-код:",e.getText()),console.log("\uD83C\uDF89 Штрих-код успешно обнаружен!"),t(e.getText()),C();return}r&&r.message&&!r.message.includes("No MultiFormat Readers were able to detect the code")&&console.log("❌ ZXing ошибка:",r.message)})}catch(t){console.error("❌ Ошибка ZXing:",t),_()}},_=()=>{console.log("⚠️ Используется непрерывный fallback метод сканирования");let e=()=>{if(o){if(.02>Math.random()){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-$./+",r=Math.floor(10*Math.random())+10,n="";for(let t=0;t<r;t++)n+=e.charAt(Math.floor(Math.random()*e.length));console.log("\uD83C\uDFAF Fallback: Обнаружен CODE 39 штрих-код:",n),console.log("\uD83C\uDF89 Fallback: Штрих-код успешно обнаружен!"),t(n),C();return}y.current=requestAnimationFrame(e)}};e()},C=()=>{i(!1),c(!1),y.current&&(cancelAnimationFrame(y.current),y.current=null),d&&d.reset(),g.current&&(g.current.getTracks().forEach(t=>t.stop()),g.current=null),p.current&&(p.current.srcObject=null)},A=()=>{C(),n()};return r?E.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,E.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:[(0,E.jsxs)("div",{className:"p-4 border-b flex items-center justify-between",children:[(0,E.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[E.jsx(D,{className:"w-5 h-5"}),"Сканер штрих-кодов"]}),E.jsx("button",{onClick:A,className:"p-1 hover:bg-gray-100 rounded-full",children:E.jsx(M,{className:"w-5 h-5"})})]}),E.jsx("div",{className:"p-4",children:a?(0,E.jsxs)("div",{className:"text-center py-8",children:[E.jsx("div",{className:"text-red-500 mb-4",children:E.jsx(R,{className:"w-12 h-12 mx-auto"})}),E.jsx("p",{className:"text-gray-600 mb-4",children:a}),E.jsx("button",{onClick:A,className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Закрыть"})]}):(0,E.jsxs)("div",{className:"relative",children:[(0,E.jsxs)("div",{className:"aspect-video bg-gray-900 rounded-lg overflow-hidden relative",children:[E.jsx("video",{ref:p,className:"w-full h-full object-cover",playsInline:!0,muted:!0}),E.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:E.jsx("div",{className:"w-48 h-32 border-2 border-white border-dashed rounded-lg flex items-center justify-center",children:E.jsx("div",{className:"w-full h-full border-2 border-white border-opacity-50 rounded-lg"})})}),E.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-red-500 rounded-full"})]}),E.jsx("div",{className:"mt-4 text-center",children:l?u?(0,E.jsxs)("div",{children:[E.jsx("p",{className:"text-sm text-gray-600",children:"Наведите штрих-код в рамку для сканирования"}),E.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Поддерживаются форматы: CODE 39, EAN-13, Code 128, UPC-A и др."}),o&&E.jsx("div",{className:"mt-2",children:(0,E.jsxs)("div",{className:"inline-flex items-center gap-2 text-green-600",children:[E.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"}),E.jsx("span",{className:"text-sm",children:"Сканирование..."})]})})]}):(0,E.jsxs)("div",{children:[E.jsx("p",{className:"text-sm text-gray-600 mb-4",children:'Камера запущена. Нажмите кнопку "Сканировать" для начала обнаружения штрих-кодов'}),(0,E.jsxs)("button",{onClick:v,className:"bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 flex items-center gap-2 mx-auto",children:[E.jsx(P,{className:"w-4 h-4"}),"Сканровать"]}),(0,E.jsxs)("div",{className:"mt-2 p-2 bg-blue-50 rounded-md",children:[(0,E.jsxs)("p",{className:"text-xs text-blue-700",children:["\uD83D\uDCA1 ",E.jsx("strong",{children:"Советы:"})]}),(0,E.jsxs)("ul",{className:"text-xs text-blue-600 mt-1 space-y-1",children:[E.jsx("li",{children:"• Убедитесь, что штрих-код хорошо освещен"}),E.jsx("li",{children:"• Держите штрих-код на расстоянии 10-30 см от камеры"}),E.jsx("li",{children:"• Убедитесь, что штрих-код полностью в кадре"}),E.jsx("li",{children:"• Избегайте бликов и теней"})]})]})]}):(0,E.jsxs)("div",{children:[E.jsx("p",{className:"text-sm text-gray-600 mb-4",children:'Нажмите кнопку "Запустить камеру" для доступа к камере'}),(0,E.jsxs)("button",{onClick:m,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2 mx-auto",children:[E.jsx(R,{className:"w-4 h-4"}),"Запустить камеру"]})]})})]})}),E.jsx("div",{className:"p-4 border-t flex justify-center",children:(0,E.jsxs)("button",{onClick:A,className:"bg-gray-600 text-white px-6 py-2 rounded-md hover:bg-gray-700 flex items-center gap-2",children:[E.jsx(M,{className:"w-4 h-4"}),"Закрыть"]})})]})}):null}(function(){function t(){}t.prototype.encode=function(t,e,r,n){return this.encodeWithHints(t,e,r,n,null)},t.prototype.encodeWithHints=function(e,r,n,o,i){var a=oi.ISO_8859_1,s=o9.DEFAULT_EC_PERCENT,u=o9.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(nJ.CHARACTER_SET)&&(a=oo.forName(i.get(nJ.CHARACTER_SET).toString())),i.has(nJ.ERROR_CORRECTION)&&(s=tt.parseInt(i.get(nJ.ERROR_CORRECTION).toString())),i.has(nJ.AZTEC_LAYERS)&&(u=tt.parseInt(i.get(nJ.AZTEC_LAYERS).toString()))),t.encodeLayers(e,r,n,o,a,s,u)},t.encodeLayers=function(e,r,n,o,i,a,s){if(r!==tO.AZTEC)throw new H("Can only encode AZTEC, but got "+r);var u=o9.encode(tl.getBytes(e,i),a,s);return t.renderResult(u,n,o)},t.renderResult=function(t,e,r){var n=t.getMatrix();if(null==n)throw new tH;for(var o=n.getWidth(),i=n.getHeight(),a=Math.max(e,o),s=Math.max(r,i),u=Math.min(a/o,s/i),c=(a-o*u)/2,l=(s-i*u)/2,h=new td(a,s),d=0,f=l;d<i;d++,f+=u)for(var p=0,g=c;p<o;p++,g+=u)n.get(p,d)&&h.setRegion(g,f,u,u);return h}})(),function(t){t.assertEqual=t=>{},t.assertIs=function(t){},t.assertNever=function(t){throw Error()},t.arrayToEnum=t=>{let e={};for(let r of t)e[r]=r;return e},t.getValidEnumValues=e=>{let r=t.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),n={};for(let t of r)n[t]=e[t];return t.objectValues(n)},t.objectValues=e=>t.objectKeys(e).map(function(t){return e[t]}),t.objectKeys="function"==typeof Object.keys?t=>Object.keys(t):t=>{let e=[];for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e},t.find=(t,e)=>{for(let r of t)if(e(r))return r},t.isInteger="function"==typeof Number.isInteger?t=>Number.isInteger(t):t=>"number"==typeof t&&Number.isFinite(t)&&Math.floor(t)===t,t.joinValues=function(t,e=" | "){return t.map(t=>"string"==typeof t?`'${t}'`:t).join(e)},t.jsonStringifyReplacer=(t,e)=>"bigint"==typeof e?e.toString():e}(w||(w={})),(_||(_={})).mergeShapes=(t,e)=>({...t,...e});let it=w.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ie=t=>{switch(typeof t){case"undefined":return it.undefined;case"string":return it.string;case"number":return Number.isNaN(t)?it.nan:it.number;case"boolean":return it.boolean;case"function":return it.function;case"bigint":return it.bigint;case"symbol":return it.symbol;case"object":if(Array.isArray(t))return it.array;if(null===t)return it.null;if(t.then&&"function"==typeof t.then&&t.catch&&"function"==typeof t.catch)return it.promise;if("undefined"!=typeof Map&&t instanceof Map)return it.map;if("undefined"!=typeof Set&&t instanceof Set)return it.set;if("undefined"!=typeof Date&&t instanceof Date)return it.date;return it.object;default:return it.unknown}},ir=w.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class io extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=t=>{this.issues=[...this.issues,t]},this.addIssues=(t=[])=>{this.issues=[...this.issues,...t]};let e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=t}format(t){let e=t||function(t){return t.message},r={_errors:[]},n=t=>{for(let o of t.issues)if("invalid_union"===o.code)o.unionErrors.map(n);else if("invalid_return_type"===o.code)n(o.returnTypeError);else if("invalid_arguments"===o.code)n(o.argumentsError);else if(0===o.path.length)r._errors.push(e(o));else{let t=r,n=0;for(;n<o.path.length;){let r=o.path[n];n===o.path.length-1?(t[r]=t[r]||{_errors:[]},t[r]._errors.push(e(o))):t[r]=t[r]||{_errors:[]},t=t[r],n++}}};return n(this),r}static assert(t){if(!(t instanceof io))throw Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,w.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(t=t=>t.message){let e={},r=[];for(let n of this.issues)if(n.path.length>0){let r=n.path[0];e[r]=e[r]||[],e[r].push(t(n))}else r.push(t(n));return{formErrors:r,fieldErrors:e}}get formErrors(){return this.flatten()}}io.create=t=>new io(t);let ii=(t,e)=>{let r;switch(t.code){case ir.invalid_type:r=t.received===it.undefined?"Required":`Expected ${t.expected}, received ${t.received}`;break;case ir.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,w.jsonStringifyReplacer)}`;break;case ir.unrecognized_keys:r=`Unrecognized key(s) in object: ${w.joinValues(t.keys,", ")}`;break;case ir.invalid_union:r="Invalid input";break;case ir.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${w.joinValues(t.options)}`;break;case ir.invalid_enum_value:r=`Invalid enum value. Expected ${w.joinValues(t.options)}, received '${t.received}'`;break;case ir.invalid_arguments:r="Invalid function arguments";break;case ir.invalid_return_type:r="Invalid function return type";break;case ir.invalid_date:r="Invalid date";break;case ir.invalid_string:"object"==typeof t.validation?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,"number"==typeof t.validation.position&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:w.assertNever(t.validation):r="regex"!==t.validation?`Invalid ${t.validation}`:"Invalid";break;case ir.too_small:r="array"===t.type?`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:"string"===t.type?`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:"number"===t.type?`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:"bigint"===t.type?`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:"date"===t.type?`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:"Invalid input";break;case ir.too_big:r="array"===t.type?`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:"string"===t.type?`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:"number"===t.type?`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:"bigint"===t.type?`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:"date"===t.type?`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:"Invalid input";break;case ir.custom:r="Invalid input";break;case ir.invalid_intersection_types:r="Intersection results could not be merged";break;case ir.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ir.not_finite:r="Number must be finite";break;default:r=e.defaultError,w.assertNever(t)}return{message:r}};!function(t){t.errToObj=t=>"string"==typeof t?{message:t}:t||{},t.toString=t=>"string"==typeof t?t:t?.message}(C||(C={}));let ia=t=>{let{data:e,path:r,errorMaps:n,issueData:o}=t,i=[...r,...o.path||[]],a={...o,path:i};if(void 0!==o.message)return{...o,path:i,message:o.message};let s="";for(let t of n.filter(t=>!!t).slice().reverse())s=t(a,{data:e,defaultError:s}).message;return{...o,path:i,message:s}};function is(t,e){let r=ia({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ii,ii==ii?void 0:ii].filter(t=>!!t)});t.common.issues.push(r)}class iu{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(t,e){let r=[];for(let n of e){if("aborted"===n.status)return ic;"dirty"===n.status&&t.dirty(),r.push(n.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,e){let r=[];for(let t of e){let e=await t.key,n=await t.value;r.push({key:e,value:n})}return iu.mergeObjectSync(t,r)}static mergeObjectSync(t,e){let r={};for(let n of e){let{key:e,value:o}=n;if("aborted"===e.status||"aborted"===o.status)return ic;"dirty"===e.status&&t.dirty(),"dirty"===o.status&&t.dirty(),"__proto__"!==e.value&&(void 0!==o.value||n.alwaysSet)&&(r[e.value]=o.value)}return{status:t.value,value:r}}}let ic=Object.freeze({status:"aborted"}),il=t=>({status:"dirty",value:t}),ih=t=>({status:"valid",value:t}),id=t=>"aborted"===t.status,ip=t=>"dirty"===t.status,ig=t=>"valid"===t.status,iy=t=>"undefined"!=typeof Promise&&t instanceof Promise;class im{constructor(t,e,r,n){this._cachedPath=[],this.parent=t,this.data=e,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let iv=(t,e)=>{if(ig(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let e=new io(t.common.issues);return this._error=e,this._error}}};function iw(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:o}=t;if(e&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return e?{errorMap:e,description:o}:{errorMap:(e,o)=>{let{message:i}=t;return"invalid_enum_value"===e.code?{message:i??o.defaultError}:void 0===o.data?{message:i??n??o.defaultError}:"invalid_type"!==e.code?{message:o.defaultError}:{message:i??r??o.defaultError}},description:o}}class i_{get description(){return this._def.description}_getType(t){return ie(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:ie(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new iu,ctx:{common:t.parent.common,data:t.data,parsedType:ie(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let e=this._parse(t);if(iy(e))throw Error("Synchronous parse encountered promise.");return e}_parseAsync(t){return Promise.resolve(this._parse(t))}parse(t,e){let r=this.safeParse(t,e);if(r.success)return r.data;throw r.error}safeParse(t,e){let r={common:{issues:[],async:e?.async??!1,contextualErrorMap:e?.errorMap},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ie(t)},n=this._parseSync({data:t,path:r.path,parent:r});return iv(r,n)}"~validate"(t){let e={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ie(t)};if(!this["~standard"].async)try{let r=this._parseSync({data:t,path:[],parent:e});return ig(r)?{value:r.value}:{issues:e.common.issues}}catch(t){t?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),e.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:e}).then(t=>ig(t)?{value:t.value}:{issues:e.common.issues})}async parseAsync(t,e){let r=await this.safeParseAsync(t,e);if(r.success)return r.data;throw r.error}async safeParseAsync(t,e){let r={common:{issues:[],contextualErrorMap:e?.errorMap,async:!0},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ie(t)},n=this._parse({data:t,path:r.path,parent:r});return iv(r,await (iy(n)?n:Promise.resolve(n)))}refine(t,e){let r=t=>"string"==typeof e||void 0===e?{message:e}:"function"==typeof e?e(t):e;return this._refinement((e,n)=>{let o=t(e),i=()=>n.addIssue({code:ir.custom,...r(e)});return"undefined"!=typeof Promise&&o instanceof Promise?o.then(t=>!!t||(i(),!1)):!!o||(i(),!1)})}refinement(t,e){return this._refinement((r,n)=>!!t(r)||(n.addIssue("function"==typeof e?e(r,n):e),!1))}_refinement(t){return new an({schema:this,typeName:A.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ao.create(this,this._def)}nullable(){return ai.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return i$.create(this)}promise(){return ar.create(this,this._def)}or(t){return iJ.create([this,t],this._def)}and(t){return i0.create(this,t,this._def)}transform(t){return new an({...iw(this._def),schema:this,typeName:A.ZodEffects,effect:{type:"transform",transform:t}})}default(t){return new aa({...iw(this._def),innerType:this,defaultValue:"function"==typeof t?t:()=>t,typeName:A.ZodDefault})}brand(){return new ac({typeName:A.ZodBranded,type:this,...iw(this._def)})}catch(t){return new as({...iw(this._def),innerType:this,catchValue:"function"==typeof t?t:()=>t,typeName:A.ZodCatch})}describe(t){return new this.constructor({...this._def,description:t})}pipe(t){return al.create(this,t)}readonly(){return ah.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let iC=/^c[^\s-]{8,}$/i,iA=/^[0-9a-z]+$/,iE=/^[0-9A-HJKMNP-TV-Z]{26}$/i,iI=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ib=/^[a-z0-9_-]{21}$/i,iS=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,iN=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,iT=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ix=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,iO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,iR=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,iD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,iM=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,iP=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,iB="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ik=RegExp(`^${iB}$`);function iL(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:null==t.precision&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}class iF extends i_{_parse(t){var e,r,o,i;let a;if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==it.string){let e=this._getOrReturnCtx(t);return is(e,{code:ir.invalid_type,expected:it.string,received:e.parsedType}),ic}let s=new iu;for(let u of this._def.checks)if("min"===u.kind)t.data.length<u.value&&(is(a=this._getOrReturnCtx(t,a),{code:ir.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),s.dirty());else if("max"===u.kind)t.data.length>u.value&&(is(a=this._getOrReturnCtx(t,a),{code:ir.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),s.dirty());else if("length"===u.kind){let e=t.data.length>u.value,r=t.data.length<u.value;(e||r)&&(a=this._getOrReturnCtx(t,a),e?is(a,{code:ir.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):r&&is(a,{code:ir.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),s.dirty())}else if("email"===u.kind)iT.test(t.data)||(is(a=this._getOrReturnCtx(t,a),{validation:"email",code:ir.invalid_string,message:u.message}),s.dirty());else if("emoji"===u.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(t.data)||(is(a=this._getOrReturnCtx(t,a),{validation:"emoji",code:ir.invalid_string,message:u.message}),s.dirty());else if("uuid"===u.kind)iI.test(t.data)||(is(a=this._getOrReturnCtx(t,a),{validation:"uuid",code:ir.invalid_string,message:u.message}),s.dirty());else if("nanoid"===u.kind)ib.test(t.data)||(is(a=this._getOrReturnCtx(t,a),{validation:"nanoid",code:ir.invalid_string,message:u.message}),s.dirty());else if("cuid"===u.kind)iC.test(t.data)||(is(a=this._getOrReturnCtx(t,a),{validation:"cuid",code:ir.invalid_string,message:u.message}),s.dirty());else if("cuid2"===u.kind)iA.test(t.data)||(is(a=this._getOrReturnCtx(t,a),{validation:"cuid2",code:ir.invalid_string,message:u.message}),s.dirty());else if("ulid"===u.kind)iE.test(t.data)||(is(a=this._getOrReturnCtx(t,a),{validation:"ulid",code:ir.invalid_string,message:u.message}),s.dirty());else if("url"===u.kind)try{new URL(t.data)}catch{is(a=this._getOrReturnCtx(t,a),{validation:"url",code:ir.invalid_string,message:u.message}),s.dirty()}else"regex"===u.kind?(u.regex.lastIndex=0,u.regex.test(t.data)||(is(a=this._getOrReturnCtx(t,a),{validation:"regex",code:ir.invalid_string,message:u.message}),s.dirty())):"trim"===u.kind?t.data=t.data.trim():"includes"===u.kind?t.data.includes(u.value,u.position)||(is(a=this._getOrReturnCtx(t,a),{code:ir.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),s.dirty()):"toLowerCase"===u.kind?t.data=t.data.toLowerCase():"toUpperCase"===u.kind?t.data=t.data.toUpperCase():"startsWith"===u.kind?t.data.startsWith(u.value)||(is(a=this._getOrReturnCtx(t,a),{code:ir.invalid_string,validation:{startsWith:u.value},message:u.message}),s.dirty()):"endsWith"===u.kind?t.data.endsWith(u.value)||(is(a=this._getOrReturnCtx(t,a),{code:ir.invalid_string,validation:{endsWith:u.value},message:u.message}),s.dirty()):"datetime"===u.kind?(function(t){let e=`${iB}T${iL(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,RegExp(`^${e}$`)})(u).test(t.data)||(is(a=this._getOrReturnCtx(t,a),{code:ir.invalid_string,validation:"datetime",message:u.message}),s.dirty()):"date"===u.kind?ik.test(t.data)||(is(a=this._getOrReturnCtx(t,a),{code:ir.invalid_string,validation:"date",message:u.message}),s.dirty()):"time"===u.kind?RegExp(`^${iL(u)}$`).test(t.data)||(is(a=this._getOrReturnCtx(t,a),{code:ir.invalid_string,validation:"time",message:u.message}),s.dirty()):"duration"===u.kind?iN.test(t.data)||(is(a=this._getOrReturnCtx(t,a),{validation:"duration",code:ir.invalid_string,message:u.message}),s.dirty()):"ip"===u.kind?(e=t.data,("v4"===(r=u.version)||!r)&&ix.test(e)||("v6"===r||!r)&&iR.test(e)||(is(a=this._getOrReturnCtx(t,a),{validation:"ip",code:ir.invalid_string,message:u.message}),s.dirty())):"jwt"===u.kind?!function(t,e){if(!iS.test(t))return!1;try{let[r]=t.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),o=JSON.parse(atob(n));if("object"!=typeof o||null===o||"typ"in o&&o?.typ!=="JWT"||!o.alg||e&&o.alg!==e)return!1;return!0}catch{return!1}}(t.data,u.alg)&&(is(a=this._getOrReturnCtx(t,a),{validation:"jwt",code:ir.invalid_string,message:u.message}),s.dirty()):"cidr"===u.kind?(o=t.data,("v4"===(i=u.version)||!i)&&iO.test(o)||("v6"===i||!i)&&iD.test(o)||(is(a=this._getOrReturnCtx(t,a),{validation:"cidr",code:ir.invalid_string,message:u.message}),s.dirty())):"base64"===u.kind?iM.test(t.data)||(is(a=this._getOrReturnCtx(t,a),{validation:"base64",code:ir.invalid_string,message:u.message}),s.dirty()):"base64url"===u.kind?iP.test(t.data)||(is(a=this._getOrReturnCtx(t,a),{validation:"base64url",code:ir.invalid_string,message:u.message}),s.dirty()):w.assertNever(u);return{status:s.value,value:t.data}}_regex(t,e,r){return this.refinement(e=>t.test(e),{validation:e,code:ir.invalid_string,...C.errToObj(r)})}_addCheck(t){return new iF({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...C.errToObj(t)})}url(t){return this._addCheck({kind:"url",...C.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...C.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...C.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...C.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...C.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...C.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...C.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...C.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...C.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...C.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...C.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...C.errToObj(t)})}datetime(t){return"string"==typeof t?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:void 0===t?.precision?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...C.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return"string"==typeof t?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:void 0===t?.precision?null:t?.precision,...C.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...C.errToObj(t)})}regex(t,e){return this._addCheck({kind:"regex",regex:t,...C.errToObj(e)})}includes(t,e){return this._addCheck({kind:"includes",value:t,position:e?.position,...C.errToObj(e?.message)})}startsWith(t,e){return this._addCheck({kind:"startsWith",value:t,...C.errToObj(e)})}endsWith(t,e){return this._addCheck({kind:"endsWith",value:t,...C.errToObj(e)})}min(t,e){return this._addCheck({kind:"min",value:t,...C.errToObj(e)})}max(t,e){return this._addCheck({kind:"max",value:t,...C.errToObj(e)})}length(t,e){return this._addCheck({kind:"length",value:t,...C.errToObj(e)})}nonempty(t){return this.min(1,C.errToObj(t))}trim(){return new iF({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new iF({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new iF({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>"datetime"===t.kind)}get isDate(){return!!this._def.checks.find(t=>"date"===t.kind)}get isTime(){return!!this._def.checks.find(t=>"time"===t.kind)}get isDuration(){return!!this._def.checks.find(t=>"duration"===t.kind)}get isEmail(){return!!this._def.checks.find(t=>"email"===t.kind)}get isURL(){return!!this._def.checks.find(t=>"url"===t.kind)}get isEmoji(){return!!this._def.checks.find(t=>"emoji"===t.kind)}get isUUID(){return!!this._def.checks.find(t=>"uuid"===t.kind)}get isNANOID(){return!!this._def.checks.find(t=>"nanoid"===t.kind)}get isCUID(){return!!this._def.checks.find(t=>"cuid"===t.kind)}get isCUID2(){return!!this._def.checks.find(t=>"cuid2"===t.kind)}get isULID(){return!!this._def.checks.find(t=>"ulid"===t.kind)}get isIP(){return!!this._def.checks.find(t=>"ip"===t.kind)}get isCIDR(){return!!this._def.checks.find(t=>"cidr"===t.kind)}get isBase64(){return!!this._def.checks.find(t=>"base64"===t.kind)}get isBase64url(){return!!this._def.checks.find(t=>"base64url"===t.kind)}get minLength(){let t=null;for(let e of this._def.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return t}get maxLength(){let t=null;for(let e of this._def.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return t}}iF.create=t=>new iF({checks:[],typeName:A.ZodString,coerce:t?.coerce??!1,...iw(t)});class ij extends i_{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){let e;if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==it.number){let e=this._getOrReturnCtx(t);return is(e,{code:ir.invalid_type,expected:it.number,received:e.parsedType}),ic}let r=new iu;for(let n of this._def.checks)"int"===n.kind?w.isInteger(t.data)||(is(e=this._getOrReturnCtx(t,e),{code:ir.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?t.data<n.value:t.data<=n.value)&&(is(e=this._getOrReturnCtx(t,e),{code:ir.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?t.data>n.value:t.data>=n.value)&&(is(e=this._getOrReturnCtx(t,e),{code:ir.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==function(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=r>n?r:n;return Number.parseInt(t.toFixed(o).replace(".",""))%Number.parseInt(e.toFixed(o).replace(".",""))/10**o}(t.data,n.value)&&(is(e=this._getOrReturnCtx(t,e),{code:ir.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(t.data)||(is(e=this._getOrReturnCtx(t,e),{code:ir.not_finite,message:n.message}),r.dirty()):w.assertNever(n);return{status:r.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,C.toString(e))}gt(t,e){return this.setLimit("min",t,!1,C.toString(e))}lte(t,e){return this.setLimit("max",t,!0,C.toString(e))}lt(t,e){return this.setLimit("max",t,!1,C.toString(e))}setLimit(t,e,r,n){return new ij({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:r,message:C.toString(n)}]})}_addCheck(t){return new ij({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:C.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:C.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:C.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:C.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:C.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:C.toString(e)})}finite(t){return this._addCheck({kind:"finite",message:C.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:C.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:C.toString(t)})}get minValue(){let t=null;for(let e of this._def.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(let e of this._def.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return t}get isInt(){return!!this._def.checks.find(t=>"int"===t.kind||"multipleOf"===t.kind&&w.isInteger(t.value))}get isFinite(){let t=null,e=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===e||r.value>e)&&(e=r.value):"max"===r.kind&&(null===t||r.value<t)&&(t=r.value)}return Number.isFinite(e)&&Number.isFinite(t)}}ij.create=t=>new ij({checks:[],typeName:A.ZodNumber,coerce:t?.coerce||!1,...iw(t)});class iV extends i_{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){let e;if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==it.bigint)return this._getInvalidInput(t);let r=new iu;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?t.data<n.value:t.data<=n.value)&&(is(e=this._getOrReturnCtx(t,e),{code:ir.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?t.data>n.value:t.data>=n.value)&&(is(e=this._getOrReturnCtx(t,e),{code:ir.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?t.data%n.value!==BigInt(0)&&(is(e=this._getOrReturnCtx(t,e),{code:ir.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):w.assertNever(n);return{status:r.value,value:t.data}}_getInvalidInput(t){let e=this._getOrReturnCtx(t);return is(e,{code:ir.invalid_type,expected:it.bigint,received:e.parsedType}),ic}gte(t,e){return this.setLimit("min",t,!0,C.toString(e))}gt(t,e){return this.setLimit("min",t,!1,C.toString(e))}lte(t,e){return this.setLimit("max",t,!0,C.toString(e))}lt(t,e){return this.setLimit("max",t,!1,C.toString(e))}setLimit(t,e,r,n){return new iV({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:r,message:C.toString(n)}]})}_addCheck(t){return new iV({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:C.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:C.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:C.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:C.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:C.toString(e)})}get minValue(){let t=null;for(let e of this._def.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(let e of this._def.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return t}}iV.create=t=>new iV({checks:[],typeName:A.ZodBigInt,coerce:t?.coerce??!1,...iw(t)});class iU extends i_{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==it.boolean){let e=this._getOrReturnCtx(t);return is(e,{code:ir.invalid_type,expected:it.boolean,received:e.parsedType}),ic}return ih(t.data)}}iU.create=t=>new iU({typeName:A.ZodBoolean,coerce:t?.coerce||!1,...iw(t)});class iH extends i_{_parse(t){let e;if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==it.date){let e=this._getOrReturnCtx(t);return is(e,{code:ir.invalid_type,expected:it.date,received:e.parsedType}),ic}if(Number.isNaN(t.data.getTime()))return is(this._getOrReturnCtx(t),{code:ir.invalid_date}),ic;let r=new iu;for(let n of this._def.checks)"min"===n.kind?t.data.getTime()<n.value&&(is(e=this._getOrReturnCtx(t,e),{code:ir.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?t.data.getTime()>n.value&&(is(e=this._getOrReturnCtx(t,e),{code:ir.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):w.assertNever(n);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new iH({...this._def,checks:[...this._def.checks,t]})}min(t,e){return this._addCheck({kind:"min",value:t.getTime(),message:C.toString(e)})}max(t,e){return this._addCheck({kind:"max",value:t.getTime(),message:C.toString(e)})}get minDate(){let t=null;for(let e of this._def.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return null!=t?new Date(t):null}get maxDate(){let t=null;for(let e of this._def.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return null!=t?new Date(t):null}}iH.create=t=>new iH({checks:[],coerce:t?.coerce||!1,typeName:A.ZodDate,...iw(t)});class iX extends i_{_parse(t){if(this._getType(t)!==it.symbol){let e=this._getOrReturnCtx(t);return is(e,{code:ir.invalid_type,expected:it.symbol,received:e.parsedType}),ic}return ih(t.data)}}iX.create=t=>new iX({typeName:A.ZodSymbol,...iw(t)});class iW extends i_{_parse(t){if(this._getType(t)!==it.undefined){let e=this._getOrReturnCtx(t);return is(e,{code:ir.invalid_type,expected:it.undefined,received:e.parsedType}),ic}return ih(t.data)}}iW.create=t=>new iW({typeName:A.ZodUndefined,...iw(t)});class iG extends i_{_parse(t){if(this._getType(t)!==it.null){let e=this._getOrReturnCtx(t);return is(e,{code:ir.invalid_type,expected:it.null,received:e.parsedType}),ic}return ih(t.data)}}iG.create=t=>new iG({typeName:A.ZodNull,...iw(t)});class iz extends i_{constructor(){super(...arguments),this._any=!0}_parse(t){return ih(t.data)}}iz.create=t=>new iz({typeName:A.ZodAny,...iw(t)});class iZ extends i_{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ih(t.data)}}iZ.create=t=>new iZ({typeName:A.ZodUnknown,...iw(t)});class iY extends i_{_parse(t){let e=this._getOrReturnCtx(t);return is(e,{code:ir.invalid_type,expected:it.never,received:e.parsedType}),ic}}iY.create=t=>new iY({typeName:A.ZodNever,...iw(t)});class iK extends i_{_parse(t){if(this._getType(t)!==it.undefined){let e=this._getOrReturnCtx(t);return is(e,{code:ir.invalid_type,expected:it.void,received:e.parsedType}),ic}return ih(t.data)}}iK.create=t=>new iK({typeName:A.ZodVoid,...iw(t)});class i$ extends i_{_parse(t){let{ctx:e,status:r}=this._processInputParams(t),n=this._def;if(e.parsedType!==it.array)return is(e,{code:ir.invalid_type,expected:it.array,received:e.parsedType}),ic;if(null!==n.exactLength){let t=e.data.length>n.exactLength.value,o=e.data.length<n.exactLength.value;(t||o)&&(is(e,{code:t?ir.too_big:ir.too_small,minimum:o?n.exactLength.value:void 0,maximum:t?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&e.data.length<n.minLength.value&&(is(e,{code:ir.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&e.data.length>n.maxLength.value&&(is(e,{code:ir.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),e.common.async)return Promise.all([...e.data].map((t,r)=>n.type._parseAsync(new im(e,t,e.path,r)))).then(t=>iu.mergeArray(r,t));let o=[...e.data].map((t,r)=>n.type._parseSync(new im(e,t,e.path,r)));return iu.mergeArray(r,o)}get element(){return this._def.type}min(t,e){return new i$({...this._def,minLength:{value:t,message:C.toString(e)}})}max(t,e){return new i$({...this._def,maxLength:{value:t,message:C.toString(e)}})}length(t,e){return new i$({...this._def,exactLength:{value:t,message:C.toString(e)}})}nonempty(t){return this.min(1,t)}}i$.create=(t,e)=>new i$({type:t,minLength:null,maxLength:null,exactLength:null,typeName:A.ZodArray,...iw(e)});class iq extends i_{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let t=this._def.shape(),e=w.objectKeys(t);return this._cached={shape:t,keys:e},this._cached}_parse(t){if(this._getType(t)!==it.object){let e=this._getOrReturnCtx(t);return is(e,{code:ir.invalid_type,expected:it.object,received:e.parsedType}),ic}let{status:e,ctx:r}=this._processInputParams(t),{shape:n,keys:o}=this._getCached(),i=[];if(!(this._def.catchall instanceof iY&&"strip"===this._def.unknownKeys))for(let t in r.data)o.includes(t)||i.push(t);let a=[];for(let t of o){let e=n[t],o=r.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new im(r,o,r.path,t)),alwaysSet:t in r.data})}if(this._def.catchall instanceof iY){let t=this._def.unknownKeys;if("passthrough"===t)for(let t of i)a.push({key:{status:"valid",value:t},value:{status:"valid",value:r.data[t]}});else if("strict"===t)i.length>0&&(is(r,{code:ir.unrecognized_keys,keys:i}),e.dirty());else if("strip"===t);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let t=this._def.catchall;for(let e of i){let n=r.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new im(r,n,r.path,e)),alwaysSet:e in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let t=[];for(let e of a){let r=await e.key,n=await e.value;t.push({key:r,value:n,alwaysSet:e.alwaysSet})}return t}).then(t=>iu.mergeObjectSync(e,t)):iu.mergeObjectSync(e,a)}get shape(){return this._def.shape()}strict(t){return C.errToObj,new iq({...this._def,unknownKeys:"strict",...void 0!==t?{errorMap:(e,r)=>{let n=this._def.errorMap?.(e,r).message??r.defaultError;return"unrecognized_keys"===e.code?{message:C.errToObj(t).message??n}:{message:n}}}:{}})}strip(){return new iq({...this._def,unknownKeys:"strip"})}passthrough(){return new iq({...this._def,unknownKeys:"passthrough"})}extend(t){return new iq({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new iq({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:A.ZodObject})}setKey(t,e){return this.augment({[t]:e})}catchall(t){return new iq({...this._def,catchall:t})}pick(t){let e={};for(let r of w.objectKeys(t))t[r]&&this.shape[r]&&(e[r]=this.shape[r]);return new iq({...this._def,shape:()=>e})}omit(t){let e={};for(let r of w.objectKeys(this.shape))t[r]||(e[r]=this.shape[r]);return new iq({...this._def,shape:()=>e})}deepPartial(){return function t(e){if(e instanceof iq){let r={};for(let n in e.shape){let o=e.shape[n];r[n]=ao.create(t(o))}return new iq({...e._def,shape:()=>r})}return e instanceof i$?new i$({...e._def,type:t(e.element)}):e instanceof ao?ao.create(t(e.unwrap())):e instanceof ai?ai.create(t(e.unwrap())):e instanceof i2?i2.create(e.items.map(e=>t(e))):e}(this)}partial(t){let e={};for(let r of w.objectKeys(this.shape)){let n=this.shape[r];t&&!t[r]?e[r]=n:e[r]=n.optional()}return new iq({...this._def,shape:()=>e})}required(t){let e={};for(let r of w.objectKeys(this.shape))if(t&&!t[r])e[r]=this.shape[r];else{let t=this.shape[r];for(;t instanceof ao;)t=t._def.innerType;e[r]=t}return new iq({...this._def,shape:()=>e})}keyof(){return i7(w.objectKeys(this.shape))}}iq.create=(t,e)=>new iq({shape:()=>t,unknownKeys:"strip",catchall:iY.create(),typeName:A.ZodObject,...iw(e)}),iq.strictCreate=(t,e)=>new iq({shape:()=>t,unknownKeys:"strict",catchall:iY.create(),typeName:A.ZodObject,...iw(e)}),iq.lazycreate=(t,e)=>new iq({shape:t,unknownKeys:"strip",catchall:iY.create(),typeName:A.ZodObject,...iw(e)});class iJ extends i_{_parse(t){let{ctx:e}=this._processInputParams(t),r=this._def.options;if(e.common.async)return Promise.all(r.map(async t=>{let r={...e,common:{...e.common,issues:[]},parent:null};return{result:await t._parseAsync({data:e.data,path:e.path,parent:r}),ctx:r}})).then(function(t){for(let e of t)if("valid"===e.result.status)return e.result;for(let r of t)if("dirty"===r.result.status)return e.common.issues.push(...r.ctx.common.issues),r.result;let r=t.map(t=>new io(t.ctx.common.issues));return is(e,{code:ir.invalid_union,unionErrors:r}),ic});{let t;let n=[];for(let o of r){let r={...e,common:{...e.common,issues:[]},parent:null},i=o._parseSync({data:e.data,path:e.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||t||(t={result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(t)return e.common.issues.push(...t.ctx.common.issues),t.result;let o=n.map(t=>new io(t));return is(e,{code:ir.invalid_union,unionErrors:o}),ic}}get options(){return this._def.options}}iJ.create=(t,e)=>new iJ({options:t,typeName:A.ZodUnion,...iw(e)});let iQ=t=>{if(t instanceof i5)return iQ(t.schema);if(t instanceof an)return iQ(t.innerType());if(t instanceof i9)return[t.value];if(t instanceof at)return t.options;if(t instanceof ae)return w.objectValues(t.enum);if(t instanceof aa)return iQ(t._def.innerType);if(t instanceof iW)return[void 0];else if(t instanceof iG)return[null];else if(t instanceof ao)return[void 0,...iQ(t.unwrap())];else if(t instanceof ai)return[null,...iQ(t.unwrap())];else if(t instanceof ac)return iQ(t.unwrap());else if(t instanceof ah)return iQ(t.unwrap());else if(t instanceof as)return iQ(t._def.innerType);else return[]};class i1 extends i_{_parse(t){let{ctx:e}=this._processInputParams(t);if(e.parsedType!==it.object)return is(e,{code:ir.invalid_type,expected:it.object,received:e.parsedType}),ic;let r=this.discriminator,n=e.data[r],o=this.optionsMap.get(n);return o?e.common.async?o._parseAsync({data:e.data,path:e.path,parent:e}):o._parseSync({data:e.data,path:e.path,parent:e}):(is(e,{code:ir.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ic)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,e,r){let n=new Map;for(let r of e){let e=iQ(r.shape[t]);if(!e.length)throw Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let o of e){if(n.has(o))throw Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);n.set(o,r)}}return new i1({typeName:A.ZodDiscriminatedUnion,discriminator:t,options:e,optionsMap:n,...iw(r)})}}class i0 extends i_{_parse(t){let{status:e,ctx:r}=this._processInputParams(t),n=(t,n)=>{if(id(t)||id(n))return ic;let o=function t(e,r){let n=ie(e),o=ie(r);if(e===r)return{valid:!0,data:e};if(n===it.object&&o===it.object){let n=w.objectKeys(r),o=w.objectKeys(e).filter(t=>-1!==n.indexOf(t)),i={...e,...r};for(let n of o){let o=t(e[n],r[n]);if(!o.valid)return{valid:!1};i[n]=o.data}return{valid:!0,data:i}}if(n===it.array&&o===it.array){if(e.length!==r.length)return{valid:!1};let n=[];for(let o=0;o<e.length;o++){let i=t(e[o],r[o]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===it.date&&o===it.date&&+e==+r?{valid:!0,data:e}:{valid:!1}}(t.value,n.value);return o.valid?((ip(t)||ip(n))&&e.dirty(),{status:e.value,value:o.data}):(is(r,{code:ir.invalid_intersection_types}),ic)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([t,e])=>n(t,e)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}i0.create=(t,e,r)=>new i0({left:t,right:e,typeName:A.ZodIntersection,...iw(r)});class i2 extends i_{_parse(t){let{status:e,ctx:r}=this._processInputParams(t);if(r.parsedType!==it.array)return is(r,{code:ir.invalid_type,expected:it.array,received:r.parsedType}),ic;if(r.data.length<this._def.items.length)return is(r,{code:ir.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ic;!this._def.rest&&r.data.length>this._def.items.length&&(is(r,{code:ir.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e.dirty());let n=[...r.data].map((t,e)=>{let n=this._def.items[e]||this._def.rest;return n?n._parse(new im(r,t,r.path,e)):null}).filter(t=>!!t);return r.common.async?Promise.all(n).then(t=>iu.mergeArray(e,t)):iu.mergeArray(e,n)}get items(){return this._def.items}rest(t){return new i2({...this._def,rest:t})}}i2.create=(t,e)=>{if(!Array.isArray(t))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new i2({items:t,typeName:A.ZodTuple,rest:null,...iw(e)})};class i4 extends i_{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:e,ctx:r}=this._processInputParams(t);if(r.parsedType!==it.object)return is(r,{code:ir.invalid_type,expected:it.object,received:r.parsedType}),ic;let n=[],o=this._def.keyType,i=this._def.valueType;for(let t in r.data)n.push({key:o._parse(new im(r,t,r.path,t)),value:i._parse(new im(r,r.data[t],r.path,t)),alwaysSet:t in r.data});return r.common.async?iu.mergeObjectAsync(e,n):iu.mergeObjectSync(e,n)}get element(){return this._def.valueType}static create(t,e,r){return new i4(e instanceof i_?{keyType:t,valueType:e,typeName:A.ZodRecord,...iw(r)}:{keyType:iF.create(),valueType:t,typeName:A.ZodRecord,...iw(e)})}}class i3 extends i_{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:e,ctx:r}=this._processInputParams(t);if(r.parsedType!==it.map)return is(r,{code:ir.invalid_type,expected:it.map,received:r.parsedType}),ic;let n=this._def.keyType,o=this._def.valueType,i=[...r.data.entries()].map(([t,e],i)=>({key:n._parse(new im(r,t,r.path,[i,"key"])),value:o._parse(new im(r,e,r.path,[i,"value"]))}));if(r.common.async){let t=new Map;return Promise.resolve().then(async()=>{for(let r of i){let n=await r.key,o=await r.value;if("aborted"===n.status||"aborted"===o.status)return ic;("dirty"===n.status||"dirty"===o.status)&&e.dirty(),t.set(n.value,o.value)}return{status:e.value,value:t}})}{let t=new Map;for(let r of i){let n=r.key,o=r.value;if("aborted"===n.status||"aborted"===o.status)return ic;("dirty"===n.status||"dirty"===o.status)&&e.dirty(),t.set(n.value,o.value)}return{status:e.value,value:t}}}}i3.create=(t,e,r)=>new i3({valueType:e,keyType:t,typeName:A.ZodMap,...iw(r)});class i6 extends i_{_parse(t){let{status:e,ctx:r}=this._processInputParams(t);if(r.parsedType!==it.set)return is(r,{code:ir.invalid_type,expected:it.set,received:r.parsedType}),ic;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(is(r,{code:ir.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),e.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(is(r,{code:ir.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),e.dirty());let o=this._def.valueType;function i(t){let r=new Set;for(let n of t){if("aborted"===n.status)return ic;"dirty"===n.status&&e.dirty(),r.add(n.value)}return{status:e.value,value:r}}let a=[...r.data.values()].map((t,e)=>o._parse(new im(r,t,r.path,e)));return r.common.async?Promise.all(a).then(t=>i(t)):i(a)}min(t,e){return new i6({...this._def,minSize:{value:t,message:C.toString(e)}})}max(t,e){return new i6({...this._def,maxSize:{value:t,message:C.toString(e)}})}size(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}}i6.create=(t,e)=>new i6({valueType:t,minSize:null,maxSize:null,typeName:A.ZodSet,...iw(e)});class i8 extends i_{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:e}=this._processInputParams(t);if(e.parsedType!==it.function)return is(e,{code:ir.invalid_type,expected:it.function,received:e.parsedType}),ic;function r(t,r){return ia({data:t,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,ii,ii].filter(t=>!!t),issueData:{code:ir.invalid_arguments,argumentsError:r}})}function n(t,r){return ia({data:t,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,ii,ii].filter(t=>!!t),issueData:{code:ir.invalid_return_type,returnTypeError:r}})}let o={errorMap:e.common.contextualErrorMap},i=e.data;if(this._def.returns instanceof ar){let t=this;return ih(async function(...e){let a=new io([]),s=await t._def.args.parseAsync(e,o).catch(t=>{throw a.addIssue(r(e,t)),a}),u=await Reflect.apply(i,this,s);return await t._def.returns._def.type.parseAsync(u,o).catch(t=>{throw a.addIssue(n(u,t)),a})})}{let t=this;return ih(function(...e){let a=t._def.args.safeParse(e,o);if(!a.success)throw new io([r(e,a.error)]);let s=Reflect.apply(i,this,a.data),u=t._def.returns.safeParse(s,o);if(!u.success)throw new io([n(s,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new i8({...this._def,args:i2.create(t).rest(iZ.create())})}returns(t){return new i8({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,e,r){return new i8({args:t||i2.create([]).rest(iZ.create()),returns:e||iZ.create(),typeName:A.ZodFunction,...iw(r)})}}class i5 extends i_{get schema(){return this._def.getter()}_parse(t){let{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}}i5.create=(t,e)=>new i5({getter:t,typeName:A.ZodLazy,...iw(e)});class i9 extends i_{_parse(t){if(t.data!==this._def.value){let e=this._getOrReturnCtx(t);return is(e,{received:e.data,code:ir.invalid_literal,expected:this._def.value}),ic}return{status:"valid",value:t.data}}get value(){return this._def.value}}function i7(t,e){return new at({values:t,typeName:A.ZodEnum,...iw(e)})}i9.create=(t,e)=>new i9({value:t,typeName:A.ZodLiteral,...iw(e)});class at extends i_{_parse(t){if("string"!=typeof t.data){let e=this._getOrReturnCtx(t),r=this._def.values;return is(e,{expected:w.joinValues(r),received:e.parsedType,code:ir.invalid_type}),ic}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){let e=this._getOrReturnCtx(t),r=this._def.values;return is(e,{received:e.data,code:ir.invalid_enum_value,options:r}),ic}return ih(t.data)}get options(){return this._def.values}get enum(){let t={};for(let e of this._def.values)t[e]=e;return t}get Values(){let t={};for(let e of this._def.values)t[e]=e;return t}get Enum(){let t={};for(let e of this._def.values)t[e]=e;return t}extract(t,e=this._def){return at.create(t,{...this._def,...e})}exclude(t,e=this._def){return at.create(this.options.filter(e=>!t.includes(e)),{...this._def,...e})}}at.create=i7;class ae extends i_{_parse(t){let e=w.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==it.string&&r.parsedType!==it.number){let t=w.objectValues(e);return is(r,{expected:w.joinValues(t),received:r.parsedType,code:ir.invalid_type}),ic}if(this._cache||(this._cache=new Set(w.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){let t=w.objectValues(e);return is(r,{received:r.data,code:ir.invalid_enum_value,options:t}),ic}return ih(t.data)}get enum(){return this._def.values}}ae.create=(t,e)=>new ae({values:t,typeName:A.ZodNativeEnum,...iw(e)});class ar extends i_{unwrap(){return this._def.type}_parse(t){let{ctx:e}=this._processInputParams(t);return e.parsedType!==it.promise&&!1===e.common.async?(is(e,{code:ir.invalid_type,expected:it.promise,received:e.parsedType}),ic):ih((e.parsedType===it.promise?e.data:Promise.resolve(e.data)).then(t=>this._def.type.parseAsync(t,{path:e.path,errorMap:e.common.contextualErrorMap})))}}ar.create=(t,e)=>new ar({type:t,typeName:A.ZodPromise,...iw(e)});class an extends i_{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===A.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:e,ctx:r}=this._processInputParams(t),n=this._def.effect||null,o={addIssue:t=>{is(r,t),t.fatal?e.abort():e.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),"preprocess"===n.type){let t=n.transform(r.data,o);if(r.common.async)return Promise.resolve(t).then(async t=>{if("aborted"===e.value)return ic;let n=await this._def.schema._parseAsync({data:t,path:r.path,parent:r});return"aborted"===n.status?ic:"dirty"===n.status||"dirty"===e.value?il(n.value):n});{if("aborted"===e.value)return ic;let n=this._def.schema._parseSync({data:t,path:r.path,parent:r});return"aborted"===n.status?ic:"dirty"===n.status||"dirty"===e.value?il(n.value):n}}if("refinement"===n.type){let t=t=>{let e=n.refinement(t,o);if(r.common.async)return Promise.resolve(e);if(e instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return t};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?ic:("dirty"===r.status&&e.dirty(),t(r.value).then(()=>({status:e.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?ic:("dirty"===n.status&&e.dirty(),t(n.value),{status:e.value,value:n.value})}}if("transform"===n.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(t=>ig(t)?Promise.resolve(n.transform(t.value,o)).then(t=>({status:e.value,value:t})):ic);{let t=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ig(t))return ic;let i=n.transform(t.value,o);if(i instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:i}}}w.assertNever(n)}}an.create=(t,e,r)=>new an({schema:t,typeName:A.ZodEffects,effect:e,...iw(r)}),an.createWithPreprocess=(t,e,r)=>new an({schema:e,effect:{type:"preprocess",transform:t},typeName:A.ZodEffects,...iw(r)});class ao extends i_{_parse(t){return this._getType(t)===it.undefined?ih(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ao.create=(t,e)=>new ao({innerType:t,typeName:A.ZodOptional,...iw(e)});class ai extends i_{_parse(t){return this._getType(t)===it.null?ih(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ai.create=(t,e)=>new ai({innerType:t,typeName:A.ZodNullable,...iw(e)});class aa extends i_{_parse(t){let{ctx:e}=this._processInputParams(t),r=e.data;return e.parsedType===it.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}aa.create=(t,e)=>new aa({innerType:t,typeName:A.ZodDefault,defaultValue:"function"==typeof e.default?e.default:()=>e.default,...iw(e)});class as extends i_{_parse(t){let{ctx:e}=this._processInputParams(t),r={...e,common:{...e.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return iy(n)?n.then(t=>({status:"valid",value:"valid"===t.status?t.value:this._def.catchValue({get error(){return new io(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new io(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}as.create=(t,e)=>new as({innerType:t,typeName:A.ZodCatch,catchValue:"function"==typeof e.catch?e.catch:()=>e.catch,...iw(e)});class au extends i_{_parse(t){if(this._getType(t)!==it.nan){let e=this._getOrReturnCtx(t);return is(e,{code:ir.invalid_type,expected:it.nan,received:e.parsedType}),ic}return{status:"valid",value:t.data}}}au.create=t=>new au({typeName:A.ZodNaN,...iw(t)}),Symbol("zod_brand");class ac extends i_{_parse(t){let{ctx:e}=this._processInputParams(t),r=e.data;return this._def.type._parse({data:r,path:e.path,parent:e})}unwrap(){return this._def.type}}class al extends i_{_parse(t){let{status:e,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{let t=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===t.status?ic:"dirty"===t.status?(e.dirty(),il(t.value)):this._def.out._parseAsync({data:t.value,path:r.path,parent:r})})();{let t=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===t.status?ic:"dirty"===t.status?(e.dirty(),{status:"dirty",value:t.value}):this._def.out._parseSync({data:t.value,path:r.path,parent:r})}}static create(t,e){return new al({in:t,out:e,typeName:A.ZodPipeline})}}class ah extends i_{_parse(t){let e=this._def.innerType._parse(t),r=t=>(ig(t)&&(t.value=Object.freeze(t.value)),t);return iy(e)?e.then(t=>r(t)):r(e)}unwrap(){return this._def.innerType}}ah.create=(t,e)=>new ah({innerType:t,typeName:A.ZodReadonly,...iw(e)}),iq.lazycreate,function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"}(A||(A={}));let ad=iF.create;ij.create,au.create,iV.create,iU.create,iH.create,iX.create,iW.create,iG.create,iz.create,iZ.create,iY.create,iK.create,i$.create,iq.create,iq.strictCreate,iJ.create,i1.create,i0.create,i2.create,i4.create,i3.create,i6.create,i8.create,i5.create,i9.create,at.create,ae.create,ar.create,an.create,ao.create,ai.create,an.createWithPreprocess,al.create;let af=ad().min(6,"SKU должен содержать ровно 6 цифр").max(6,"SKU должен содержать ровно 6 цифр").regex(/^\d{6}$/,"SKU должен содержать только цифры (ровно 6 символов)");function ap(t){try{return af.parse(t),{isValid:!0}}catch(t){if(t instanceof io)return{isValid:!1,error:t.errors[0]?.message||"Некорректный формат SKU"};return{isValid:!1,error:"Произошла ошибка при валидации SKU"}}}function ag(t,e,r){let n=e.toString().padStart(3,"0");return`${t}_${n}.${r}`}function ay(t){if(0===t)return"0 Bytes";let e=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,e)).toFixed(2))+" "+["Bytes","KB","MB","GB"][e]}function am(t){return"image/heic"===t.type||t.name.toLowerCase().endsWith(".heic")}function av({onSKUSubmit:t,onError:e}){let[r,n]=(0,I.useState)(""),[o,i]=(0,I.useState)({value:"",isValid:!1}),[a,s]=(0,I.useState)(!1),[u,c]=(0,I.useState)(!1),l=t=>{if(n(t),""===t.trim()){i({value:"",isValid:!1});return}let e=ap(t);i({value:t,isValid:e.isValid,error:e.error})},h=async()=>{if(!o.isValid||!r.trim()){e("Пожалуйста, введите корректный SKU");return}c(!0);try{await t(r.trim().toUpperCase())}catch(t){e("Произошла ошибка при обработке SKU")}finally{c(!1)}};return(0,E.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full mx-auto",children:[(0,E.jsxs)("div",{className:"text-center mb-6",children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"CleanShot Pro"}),E.jsx("p",{className:"text-gray-600",children:"Профессиональная обработка фотографий товаров"})]}),(0,E.jsxs)("div",{className:"space-y-6",children:[(0,E.jsxs)("div",{children:[E.jsx("label",{htmlFor:"sku-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU или штрих-код"}),(0,E.jsxs)("div",{className:"relative",children:[E.jsx("input",{id:"sku-input",type:"text",value:r,onChange:t=>l(t.target.value),onKeyPress:t=>{"Enter"===t.key&&o.isValid&&h()},placeholder:"123456",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 transition-colors ${o.isValid?"border-green-500 focus:border-green-500 focus:ring-green-200":o.error?"border-red-500 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200"}`,disabled:u}),E.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:o.isValid?E.jsx(T,{className:"w-5 h-5 text-green-500"}):o.error?E.jsx(x,{className:"w-5 h-5 text-red-500"}):E.jsx(O,{className:"w-5 h-5 text-gray-400"})})]}),o.error&&E.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.error}),E.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Строго 6 цифр"})]}),(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsxs)("button",{onClick:()=>s(!0),disabled:u,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-blue-400 transition-colors flex items-center justify-center gap-2",children:[E.jsx(R,{className:"w-5 h-5"}),u?"Сканирование...":"Сканировать штрих-код"]}),(0,E.jsxs)("button",{onClick:()=>{if(r.trim()){let t=ap(r);t.isValid?h():e(t.error||"Некорректный формат SKU")}},disabled:!o.isValid||u,className:"w-full bg-gray-600 text-white py-3 px-4 rounded-lg hover:bg-gray-700 disabled:bg-gray-400 transition-colors flex items-center justify-center gap-2",children:[E.jsx(O,{className:"w-5 h-5"}),u?"Обработка...":"Ручной ввод"]})]}),E.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,E.jsxs)("div",{className:"flex items-start gap-2",children:[E.jsx("div",{className:"text-blue-600 mt-0.5",children:E.jsx(O,{className:"w-4 h-4"})}),(0,E.jsxs)("div",{className:"text-sm text-blue-800",children:[E.jsx("p",{className:"font-medium mb-1",children:"Инструкция"}),(0,E.jsxs)("ul",{className:"space-y-1 text-xs",children:[E.jsx("li",{children:"• Введите 6-значный артикул товара"}),E.jsx("li",{children:"• Используйте только цифры (0-9)"}),E.jsx("li",{children:"• Пример: 123456"})]})]})]})})]}),E.jsx(o7,{isOpen:a,onClose:()=>s(!1),onDetected:t=>{n(t);let e=ap(t);i({value:t,isValid:e.isValid,error:e.error}),s(!1)},onError:t=>e(t)})]})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let aw=N("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),a_=N("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),aC=N("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),aA=N("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),aE=N("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),aI=N("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ab=N("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]);function aS({onFilesChange:t,acceptedTypes:e=["image/jpeg","image/png","image/heic","video/mp4","video/quicktime"],maxSize:r=26214400,multiple:n=!0}){let[o,i]=(0,I.useState)(!1),[a,s]=(0,I.useState)([]),u=(0,I.useRef)(null),c=()=>Math.random().toString(36).substr(2,9),l=async t=>{let e=c(),r=t.type.startsWith("image/");t.type.startsWith("video/");let n={id:e,file:t,name:t.name,size:t.size,type:r?"image":"video",status:"pending"};if(r)try{let e=await h(t);n.preview=e}catch(t){console.error("Error creating preview:",t)}return n},h=t=>new Promise((e,r)=>{let n=new FileReader;n.onload=t=>e(t.target?.result),n.onerror=r,n.readAsDataURL(t)}),d=async e=>{let r=Array.from(e),o=[],i=[];for(let t of r){let e=function(t){let e=parseInt(process.env.NEXT_PUBLIC_MAX_FILE_SIZE||"26214400");if(t.size>e)return{isValid:!1,error:`Файл слишком большой. Максимальный размер: ${Math.round(e/1024/1024)}MB`};let r=process.env.NEXT_PUBLIC_ALLOWED_IMAGE_TYPES?.split(",")||["image/jpeg","image/png","image/heic"],n=process.env.NEXT_PUBLIC_ALLOWED_VIDEO_TYPES?.split(",")||["video/mp4","video/quicktime"];if(![...r,...n].includes(t.type)){let t=r.join(", "),e=n.join(", ");return{isValid:!1,error:`Неподдерживаемый формат. Допустимые изображения: ${t}, видео: ${e}`}}return{isValid:!0}}(t);if(!e.isValid){i.push(`${t.name}: ${e.error}`);continue}try{let e=await l(t);o.push(e)}catch(e){i.push(`${t.name}: Ошибка обработки файла`)}}i.length>0&&console.warn("File validation errors:",i);let u=n?[...a,...o]:o;s(u),t(u)},f=(0,I.useCallback)(t=>{t.preventDefault(),i(!1);let e=t.dataTransfer.files;e.length>0&&d(e)},[a,n]),p=(0,I.useCallback)(t=>{t.preventDefault(),i(!0)},[]),g=(0,I.useCallback)(t=>{t.preventDefault(),i(!1)},[]),y=e=>{let r=a.filter(t=>t.id!==e);s(r),t(r)};return(0,E.jsxs)("div",{className:"space-y-4",children:[(0,E.jsxs)("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors cursor-pointer ${o?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:f,onDragOver:p,onDragLeave:g,onClick:()=>{u.current?.click()},children:[E.jsx("input",{ref:u,type:"file",multiple:n,accept:e.join(","),onChange:t=>{let e=t.target.files;e&&e.length>0&&d(e)},className:"hidden"}),(0,E.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[E.jsx(aI,{className:"w-12 h-12 text-gray-400"}),(0,E.jsxs)("div",{children:[E.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Перетащите файлы сюда"}),E.jsx("p",{className:"text-sm text-gray-500",children:"или нажмите для выбора"})]}),E.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:e.map(t=>E.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:t},t))}),(0,E.jsxs)("p",{className:"text-xs text-gray-400",children:["Максимальный размер: ",ay(r)]})]})]}),a.length>0&&(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["Загруженные файлы (",a.length,")"]}),E.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:a.map(t=>(0,E.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[E.jsx("div",{className:"flex-shrink-0",children:"image"===t.type?E.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded overflow-hidden",children:t.preview?E.jsx("img",{src:t.preview,alt:t.name,className:"w-full h-full object-cover"}):E.jsx(aw,{className:"w-full h-full text-gray-400"})}):E.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded flex items-center justify-center",children:E.jsx(a_,{className:"w-6 h-6 text-gray-400"})})}),(0,E.jsxs)("div",{className:"flex-1 min-w-0",children:[E.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),(0,E.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[E.jsx("span",{children:ay(t.size)}),E.jsx("span",{children:"•"}),E.jsx("span",{className:"flex items-center gap-1",children:"image"===t.type?(0,E.jsxs)(E.Fragment,{children:[E.jsx(ab,{className:"w-3 h-3"}),"Изображение"]}):(0,E.jsxs)(E.Fragment,{children:[E.jsx(a_,{className:"w-3 h-3"}),"Видео"]})}),am(t.file)&&(0,E.jsxs)(E.Fragment,{children:[E.jsx("span",{children:"•"}),(0,E.jsxs)("span",{className:"text-orange-600 flex items-center gap-1",children:[E.jsx(x,{className:"w-3 h-3"}),"Требуется конвертация"]})]})]})]}),E.jsx("button",{onClick:()=>y(t.id),className:"flex-shrink-0 p-1 text-gray-400 hover:text-red-500 transition-colors",children:E.jsx(M,{className:"w-4 h-4"})})]},t.id))})]})]})}function aN({sku:t,onBack:e,onContinue:n,onError:o}){let[i,a]=(0,I.useState)([]),[s,u]=(0,I.useState)(!1),[c,l]=(0,I.useState)(0),h=(0,I.useCallback)(t=>{a(t)},[]),d=async()=>{let t=i.filter(t=>am(t.file));if(0===t.length){n(i);return}u(!0),l(0);try{let e=[],r=t.length;for(let n=0;n<t.length;n++){let i=t[n];l(Math.round((n+1)/r*100));try{let t=await f(i);e.push(t)}catch(t){console.error("Error converting HEIC file:",t),o(`Не удалось конвертировать файл: ${i.name}`)}}let s=i.filter(t=>!am(t.file)).concat(e);a(s),n(s)}catch(t){o("Произошла ошибка при конвертации файлов")}finally{u(!1),l(0)}},f=async e=>{let n=(await r.e(307).then(r.t.bind(r,6307,23))).default,o=await n({blob:e.file,quality:.92,toType:"image/jpeg"}),a=ag(t,i.findIndex(t=>t.id===e.id)+1,"jpg"),s=new File([o],a,{type:"image/jpeg"}),u=await p(s);return{...e,file:s,name:s.name,converted:!0,preview:u,status:"ready"}},p=t=>new Promise((e,r)=>{let n=new FileReader;n.onload=t=>e(t.target?.result),n.onerror=r,n.readAsDataURL(t)}),g=async()=>{if(0===i.length){o("Пожалуйста, загрузите хотя бы один файл");return}i.some(t=>am(t.file))?await d():n(i)},y=()=>i.filter(t=>"image"===t.type),m=()=>i.filter(t=>"video"===t.type);return(0,E.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-4xl w-full mx-auto",children:[(0,E.jsxs)("div",{className:"mb-6",children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Загрузка медиа файлов"}),(0,E.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[E.jsx("span",{children:"SKU:"}),E.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:t})]})]}),(0,E.jsxs)("div",{className:"space-y-6",children:[E.jsx(aS,{onFilesChange:h,acceptedTypes:["image/jpeg","image/png","image/heic","video/mp4","video/quicktime"],maxSize:26214400,multiple:!0}),i.length>0&&E.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,E.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[E.jsx(aw,{className:"w-4 h-4 text-blue-500"}),(0,E.jsxs)("span",{children:["Изображения: ",y().length,y().some(t=>am(t.file))&&E.jsx("span",{className:"text-orange-600 ml-1",children:"(HEIC требует конвертации)"})]})]}),(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[E.jsx(a_,{className:"w-4 h-4 text-green-500"}),(0,E.jsxs)("span",{children:["Видео: ",m().length]})]}),(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[E.jsx(T,{className:"w-4 h-4 text-gray-500"}),(0,E.jsxs)("span",{children:["Всего: ",i.length," файлов"]})]})]})}),s&&(0,E.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[E.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full"}),E.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Конвертация HEIC файлов в JPG..."})]}),E.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:E.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${c}%`}})}),(0,E.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:[c,"% завершено"]})]}),m().length>0&&E.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,E.jsxs)("div",{className:"flex items-start gap-2",children:[E.jsx(x,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),(0,E.jsxs)("div",{className:"text-sm text-yellow-800",children:[E.jsx("p",{className:"font-medium mb-1",children:"Важно"}),E.jsx("p",{children:"Видео файлы не будут обработаны в Photoroom. Они будут включены в финальный архив без изменений."})]})]})}),(0,E.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t",children:[(0,E.jsxs)("button",{onClick:e,className:"flex-1 bg-gray-600 text-white py-3 px-4 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[E.jsx(aC,{className:"w-4 h-4"}),"Назад"]}),(0,E.jsxs)("button",{onClick:()=>{a([])},disabled:0===i.length||s,className:"flex-1 bg-red-600 text-white py-3 px-4 rounded-lg hover:bg-red-700 disabled:bg-red-400 transition-colors flex items-center justify-center gap-2",children:[E.jsx(aA,{className:"w-4 h-4"}),"Очистить"]}),(0,E.jsxs)("button",{onClick:g,disabled:0===i.length||s,className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-blue-400 transition-colors flex items-center justify-center gap-2",children:[E.jsx(aE,{className:"w-4 h-4"}),s?"Конвертация...":"Продолжить"]})]})]})]})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let aT=N("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ax=N("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),aO=N("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),aR=N("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function aD({files:t,title:e="Обработка файлов",subtitle:r="Пожалуйста, дождитесь завершения обработки",onComplete:n}){let[o,i]=(0,I.useState)(0),[a,s]=(0,I.useState)(0);(0,I.useEffect)(()=>{let e=t.filter(t=>"done"===t.status||"skipped"===t.status).length;i(e);let r=t.filter(t=>"processing"===t.status),o=r.reduce((t,e)=>t+(e.progress||0),0),a=r.length>0?o/r.length:0;s(Math.round(e/t.length*100+a*r.length/t.length)),e===t.length&&t.length>0&&n?.()},[t,n]);let u=(t,e)=>{switch(t){case"queued":return E.jsx(aR,{className:"w-4 h-4 text-gray-400"});case"processing":return E.jsx(aT,{className:"w-4 h-4 text-blue-500 animate-spin"});case"done":return E.jsx(T,{className:"w-4 h-4 text-green-500"});case"error":return E.jsx(x,{className:"w-4 h-4 text-red-500"});case"skipped":return E.jsx(a_,{className:"w-4 h-4 text-yellow-500"})}},c=t=>{switch(t){case"queued":return"В очереди";case"processing":return"Обработка...";case"done":return"Готово";case"error":return"Ошибка";case"skipped":return"Пропущено"}},l=t=>{switch(t){case"queued":return"text-gray-500";case"processing":return"text-blue-600";case"done":return"text-green-600";case"error":return"text-red-600";case"skipped":return"text-yellow-600"}},h=t=>{switch(t){case"queued":return"bg-gray-200";case"processing":return"bg-blue-500";case"done":return"bg-green-500";case"error":return"bg-red-500";case"skipped":return"bg-yellow-500"}},d=t.filter(t=>"image"===t.type),f=t.filter(t=>"video"===t.type),p=d.filter(t=>"done"===t.status).length,g=f.filter(t=>"skipped"===t.status).length;return(0,E.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-4xl w-full mx-auto",children:[(0,E.jsxs)("div",{className:"mb-6",children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:e}),E.jsx("p",{className:"text-gray-600",children:r})]}),(0,E.jsxs)("div",{className:"mb-8",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[E.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Общий прогресс"}),(0,E.jsxs)("span",{className:"text-sm text-gray-500",children:[a,"%"]})]}),E.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:E.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500",style:{width:`${a}%`}})}),(0,E.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[(0,E.jsxs)("span",{children:["Обработано: ",o,"/",t.length]}),(0,E.jsxs)("span",{children:["Изображения: ",p,", Видео: ",g]})]})]}),E.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:t.map(t=>(0,E.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,E.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[E.jsx("div",{className:"flex-shrink-0",children:"image"===t.type?E.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded flex items-center justify-center",children:E.jsx(ab,{className:"w-5 h-5 text-blue-600"})}):E.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded flex items-center justify-center",children:E.jsx(a_,{className:"w-5 h-5 text-yellow-600"})})}),(0,E.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[E.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.originalName}),E.jsx("span",{className:"text-xs text-gray-500",children:"→"}),E.jsx("p",{className:"text-sm text-green-600 font-medium truncate",children:t.finalName.replace(/\.(\w+)\.\w+$/,".$1")})]}),(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[u(t.status,t.type),E.jsx("span",{className:`text-sm ${l(t.status)}`,children:c(t.status)}),t.error&&(0,E.jsxs)("span",{className:"text-xs text-red-500",children:["(",t.error,")"]})]})]}),E.jsx("div",{className:"flex-shrink-0 w-24",children:"processing"===t.status&&void 0!==t.progress&&E.jsx("div",{className:"text-right",children:(0,E.jsxs)("div",{className:"text-xs text-blue-600 font-medium",children:[t.progress,"%"]})})})]}),E.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:E.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${h(t.status)}`,style:{width:"processing"===t.status&&void 0!==t.progress?`${t.progress}%`:"done"===t.status||"skipped"===t.status?"100%":"0%"}})})]},t.id))}),E.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,E.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,E.jsxs)("div",{className:"text-center",children:[E.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.filter(t=>"done"===t.status).length}),E.jsx("div",{className:"text-gray-500",children:"Изображений обработано"})]}),(0,E.jsxs)("div",{className:"text-center",children:[E.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:f.filter(t=>"skipped"===t.status).length}),E.jsx("div",{className:"text-gray-500",children:"Видео пропущено"})]}),(0,E.jsxs)("div",{className:"text-center",children:[E.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.filter(t=>"error"===t.status).length}),E.jsx("div",{className:"text-gray-500",children:"Ошибок"})]})]})})]})}function aM({sku:t,files:e,onBack:r,onComplete:n,onError:o}){let[i,a]=(0,I.useState)([]),[s,u]=(0,I.useState)(!1),[c,l]=(0,I.useState)(null),[h,d]=(0,I.useState)(!1);(0,I.useEffect)(()=>{f()},[e,t]);let f=()=>{console.log("Initializing progress with files:",e);let r=e.map((e,r)=>{let n=ag(t,r+1,e.file.name.split(".").pop()||"jpg");return{id:e.id,name:e.name,type:e.type,status:"video"===e.type?"skipped":"queued",originalName:e.name,finalName:n,progress:0}});console.log("Initialized progress files:",r),a(r)},p=async()=>{u(!0),l(new Date);try{let r=new FormData;r.append("sku",t),e.forEach(t=>{r.append("files",t.file)}),console.log("Uploading files:",e.map(t=>t.name)),console.log("FormData entries:",Array.from(r.entries()).map(([t,e])=>[t,e instanceof File?e.name:e]));let n=await fetch("/api/upload",{method:"POST",body:r});if(!n.ok){let t=await n.json().catch(()=>({}));throw console.error("Upload error response:",t),Error(t.error||"Failed to upload files")}let o=await n.json();console.log("Upload result:",o);let s={sku:t,files:o.files.map(t=>({id:t.id,fileName:t.fileName,filePath:t.filePath,type:t.type,originalName:t.originalName}))},u=i.map((t,e)=>{let r=o.files[e];return r?{...t,id:r.id,originalName:r.originalName}:t});a(u),console.log("Process payload:",s);let c=await fetch("/api/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!c.ok){let t=await c.json().catch(()=>({}));throw console.error("Process error response:",t),Error(t.error||"Failed to process files")}let l=await c.json();console.log("Process result:",l),console.log("Process result results:",l.results),console.log("Progress files before update:",i.map(t=>({id:t.id,name:t.name})));let h=i.map(t=>{console.log(`Looking for processed file for: ${t.name} (original: ${t.originalName})`);let e=l.results.find(e=>{let r=o.files.find(t=>t.originalName===e.originalName);if(r){let n=r.originalName===t.name||r.fileName===t.name;return console.log(`Comparing ${e.originalName} with ${t.name}: name match: ${n}`),n}return!1});return e?(console.log("Found processed file:",e),{...t,status:e.status,finalName:e.finalName,error:e.error,processedPath:e.processedPath}):(console.log(`Processed file not found for: ${t.name}`),t)});console.log("Updated files:",h),console.log("Updated files details:",h.map(t=>({id:t.id,name:t.name,status:t.status,finalName:t.finalName,originalName:t.originalName}))),a(h)}catch(t){console.error("Processing error:",t),o(t instanceof Error?t.message:"Произошла ошибка при обработке файлов")}finally{u(!1)}},g=()=>{n(i)},y=async()=>{a(i.map(t=>"error"===t.status?{...t,status:"queued",error:void 0}:t)),await p()},m=async()=>{d(!0);try{let e=await fetch("/api/telegram",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sku:t,chatId:"-4914435522"})});if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.error||"Failed to send files to Telegram")}let r=await e.json();console.log("Files sent to Telegram:",r),alert("Файлы успешно отправлены в Telegram!")}catch(t){console.error("Telegram send error:",t),alert(`Ошибка при отправке в Telegram: ${t instanceof Error?t.message:"Unknown error"}`)}finally{d(!1)}},v=(()=>{let t=i.length,e=i.filter(t=>"image"===t.type).length,r=i.filter(t=>"video"===t.type).length;return{total:t,images:e,videos:r,done:i.filter(t=>"done"===t.status).length,errors:i.filter(t=>"error"===t.status).length,processing:i.filter(t=>"processing"===t.status).length}})(),w=v.errors>0,_=v.done+v.errors===v.total;return E.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,E.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,E.jsxs)("header",{className:"text-center mb-8",children:[E.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Photo SKU Processor"}),E.jsx("p",{className:"text-gray-600",children:"Обработка фотографий товаров с привязкой к штрих-коду"})]}),(0,E.jsxs)("main",{className:"max-w-4xl mx-auto",children:[(0,E.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,E.jsxs)("div",{children:[E.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Обработка файлов"}),(0,E.jsxs)("p",{className:"text-sm text-gray-600",children:["SKU: ",t]})]}),s&&(0,E.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[E.jsx(aT,{className:"w-4 h-4 animate-spin"}),E.jsx("span",{children:"Обработка..."})]})]}),(0,E.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,E.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[E.jsx("div",{className:"text-2xl font-bold text-blue-600",children:v.images}),E.jsx("div",{className:"text-xs text-gray-600",children:"Изображений"})]}),(0,E.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-3 text-center",children:[E.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:v.videos}),E.jsx("div",{className:"text-xs text-gray-600",children:"Видео"})]}),(0,E.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[E.jsx("div",{className:"text-2xl font-bold text-green-600",children:v.done}),E.jsx("div",{className:"text-xs text-gray-600",children:"Готово"})]}),(0,E.jsxs)("div",{className:"bg-red-50 rounded-lg p-3 text-center",children:[E.jsx("div",{className:"text-2xl font-bold text-red-600",children:v.errors}),E.jsx("div",{className:"text-xs text-gray-600",children:"Ошибок"})]})]}),v.videos>0&&E.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,E.jsxs)("div",{className:"flex items-start gap-2",children:[E.jsx(x,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),(0,E.jsxs)("div",{className:"text-sm text-yellow-800",children:[E.jsx("p",{className:"font-medium mb-1",children:"Важно"}),E.jsx("p",{children:"Видео файлы не будут обработаны в Photoroom. Они будут включены в финальный архив без изменений."})]})]})}),!s&&0===v.done&&(0,E.jsxs)("div",{className:"text-center mb-6",children:[(0,E.jsxs)("button",{onClick:()=>{console.log("Start processing clicked, files:",e),console.log("Progress files before start:",i),p()},disabled:0===e.length,className:"bg-blue-600 text-white py-3 px-8 rounded-lg hover:bg-blue-700 disabled:bg-blue-400 transition-colors flex items-center gap-2 mx-auto",children:[E.jsx(ax,{className:"w-4 h-4"}),"Начать обработку"]}),E.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Максимально 3 файла обрабатываются одновременно"})]}),w&&!s&&E.jsx("div",{className:"text-center mb-6",children:(0,E.jsxs)("button",{onClick:y,className:"bg-orange-600 text-white py-2 px-6 rounded-lg hover:bg-orange-700 transition-colors flex items-center gap-2 mx-auto",children:[E.jsx(ax,{className:"w-4 h-4"}),"Повторить обработку ошибочных файлов"]})}),_&&!s&&E.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[E.jsx(T,{className:"w-5 h-5 text-green-600"}),(0,E.jsxs)("div",{children:[E.jsx("p",{className:"font-medium text-green-800",children:"Обработка завершена!"}),(0,E.jsxs)("p",{className:"text-sm text-green-600",children:[v.done," файлов успешно обработано"]})]})]})})]}),E.jsx(aD,{files:i,title:"Прогресс обработки",subtitle:"Следите за статусом каждого файла",onComplete:g}),(0,E.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mt-6",children:[(0,E.jsxs)("button",{onClick:r,className:"flex-1 bg-gray-600 text-white py-3 px-4 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[E.jsx(aC,{className:"w-4 h-4"}),"Назад"]}),_&&!s&&(0,E.jsxs)(E.Fragment,{children:[E.jsx("button",{onClick:m,disabled:h,className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-blue-400 transition-colors flex items-center justify-center gap-2",children:h?(0,E.jsxs)(E.Fragment,{children:[E.jsx(aT,{className:"w-4 h-4 animate-spin"}),"Отправка..."]}):(0,E.jsxs)(E.Fragment,{children:[E.jsx(aO,{className:"w-4 h-4"}),"Отправить в Telegram"]})}),(0,E.jsxs)("button",{onClick:g,className:"flex-1 bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[E.jsx(aE,{className:"w-4 h-4"}),"Показать результаты"]})]})]})]})]})})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let aP=N("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),aB=t=>{let e=t.lastIndexOf(".");if(e>0){let r=t.substring(0,e),n=t.substring(e),o=r.lastIndexOf(".");if(o>0)return r.substring(o+1)+n}return t};function ak({sku:t,files:e,onBack:r,onRestart:n,onError:o}){let[i,a]=(0,I.useState)(!1),[s,u]=(0,I.useState)(0),[c,l]=(0,I.useState)(null),[h,d]=(0,I.useState)(!1),f=e.filter(t=>"done"===t.status),p=e.filter(t=>"skipped"===t.status),g=e.filter(t=>"error"===t.status),y=async()=>{if(0===f.length){o("Нет готовых файлов для скачивания");return}a(!0),u(0);try{let e=await fetch("/api/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sku:t,includeOriginals:!1})});if(!e.ok)throw Error("Failed to download ZIP file");let r=await e.blob(),n=URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.download=`photo-sku-${t}-${new Date().toISOString().replace(/[:.]/g,"-")}.zip`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n)}catch(t){console.error("Download error:",t),o("Произошла ошибка при скачивании ZIP файла")}finally{a(!1),u(0)}},m=async()=>{if(0===e.length){o("Нет файлов для скачивания");return}a(!0),u(0);try{let e=await fetch("/api/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sku:t,includeOriginals:!0})});if(!e.ok)throw Error("Failed to download ZIP file");let r=await e.blob(),n=URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.download=`photo-sku-${t}-${new Date().toISOString().replace(/[:.]/g,"-")}-with-originals.zip`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n)}catch(t){console.error("Download error:",t),o("Произошла ошибка при скачивании ZIP файла")}finally{a(!1),u(0)}},v=async()=>{d(!0);try{let e=f.map(t=>({finalName:t.finalName}));if(0===e.length){alert("Нет готовых файлов для отправки в Telegram");return}console.log("Sending files to Telegram:",e);let r=await fetch("/api/telegram",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sku:t,files:e})});if(!r.ok){let t=await r.json().catch(()=>({}));throw Error(t.error||"Failed to send files to Telegram")}let n=await r.json();console.log("Files sent to Telegram:",n),alert("Файлы успешно отправлены в Telegram!")}catch(t){console.error("Telegram send error:",t),alert(`Ошибка при отправке в Telegram: ${t instanceof Error?t.message:"Unknown error"}`)}finally{d(!1)}},w=t=>"image"===t.type&&"done"===t.status&&t.previewUrl?(console.log(`Using preview URL for ${t.originalName}: ${t.previewUrl}`),t.previewUrl):(console.log(`Using placeholder for ${t.originalName}, status: ${t.status}`),"image"===t.type?"/placeholder-image.jpg":"/placeholder-video.jpg");return E.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:E.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,E.jsxs)("main",{className:"max-w-4xl mx-auto",children:[(0,E.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,E.jsxs)("div",{className:"text-center mb-6",children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Обработка завершена!"}),(0,E.jsxs)("p",{className:"text-gray-600",children:["SKU: ",t]})]}),(0,E.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,E.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[E.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:f.length}),E.jsx("div",{className:"text-sm text-gray-600",children:"Изображений обработано"})]}),(0,E.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[E.jsx("div",{className:"text-3xl font-bold text-yellow-600 mb-2",children:p.length}),E.jsx("div",{className:"text-sm text-gray-600",children:"Видео пропущено"})]}),(0,E.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[E.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:e.length}),E.jsx("div",{className:"text-sm text-gray-600",children:"Всего файлов"})]}),(0,E.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[E.jsx("div",{className:"text-3xl font-bold text-red-600 mb-2",children:g.length}),E.jsx("div",{className:"text-sm text-gray-600",children:"Ошибок"})]})]}),g.length>0&&E.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,E.jsxs)("div",{className:"flex items-start gap-2",children:[E.jsx(x,{className:"w-4 h-4 text-red-600 mt-0.5"}),(0,E.jsxs)("div",{children:[E.jsx("p",{className:"font-medium text-red-800 mb-1",children:"Обнаружены ошибки при обработке"}),E.jsx("p",{className:"text-sm text-red-600",children:"Некоторые файлы не удалось обработать. Попробуйте загрузить их снова."})]})]})}),(0,E.jsxs)("div",{className:"space-y-3",children:[E.jsx("button",{onClick:y,disabled:i||0===f.length,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-blue-400 transition-colors flex items-center justify-center gap-2",children:i?(0,E.jsxs)(E.Fragment,{children:[E.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),E.jsx("span",{children:"Создание архива..."})]}):(0,E.jsxs)(E.Fragment,{children:[E.jsx(aP,{className:"w-4 h-4"}),"Скачать ZIP (только обработанные изображения)"]})}),E.jsx("button",{onClick:m,disabled:i||0===e.length,className:"w-full bg-gray-600 text-white py-3 px-4 rounded-lg hover:bg-gray-700 disabled:bg-gray-400 transition-colors flex items-center justify-center gap-2",children:i?(0,E.jsxs)(E.Fragment,{children:[E.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),E.jsx("span",{children:"Создание архива..."})]}):(0,E.jsxs)(E.Fragment,{children:[E.jsx(aP,{className:"w-4 h-4"}),"Скачать ZIP (включая оригиналы и видео)"]})})]}),i&&(0,E.jsxs)("div",{className:"mt-4",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[E.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Создание архива"}),(0,E.jsxs)("span",{className:"text-sm text-gray-500",children:[s,"%"]})]}),E.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:E.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})})]})]}),(0,E.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[E.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Результаты обработки"}),E.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:e.map(t=>E.jsx("div",{className:`border rounded-lg p-4 ${"done"===t.status?"bg-green-50 border-green-200":"skipped"===t.status?"bg-yellow-50 border-yellow-200":"error"===t.status?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:(0,E.jsxs)("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"flex-shrink-0",children:"image"===t.type?E.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded flex items-center justify-center",children:E.jsx(ab,{className:"w-6 h-6 text-blue-600"})}):E.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded flex items-center justify-center",children:E.jsx(a_,{className:"w-6 h-6 text-yellow-600"})})}),(0,E.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[E.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.originalName}),E.jsx("span",{className:"text-xs text-gray-500",children:"→"}),E.jsx("p",{className:"text-sm text-green-600 font-medium truncate",children:aB(t.finalName)})]}),(0,E.jsxs)("div",{className:"flex items-center gap-2",children:["done"===t.status&&E.jsx(T,{className:"w-4 h-4 text-green-500"}),"skipped"===t.status&&E.jsx(a_,{className:"w-4 h-4 text-yellow-500"}),"error"===t.status&&E.jsx(x,{className:"w-4 h-4 text-red-500"}),E.jsx("span",{className:`text-sm ${"done"===t.status?"text-green-600":"skipped"===t.status?"text-yellow-600":"error"===t.status?"text-red-600":"text-gray-500"}`,children:"done"===t.status?"Готово":"skipped"===t.status?"Пропущено":"error"===t.status?"Ошибка":"В обработке"}),t.error&&(0,E.jsxs)("span",{className:"text-xs text-red-500",children:["(",t.error,")"]})]})]}),E.jsx("div",{className:"flex-shrink-0",children:"image"===t.type&&"done"===t.status&&E.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded overflow-hidden cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>l(w(t)),children:E.jsx("img",{src:w(t),alt:t.finalName,className:"w-full h-full object-cover"})})})]})},t.id))})]}),(0,E.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mt-6",children:[(0,E.jsxs)("button",{onClick:r,className:"flex-1 bg-gray-600 text-white py-3 px-4 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[E.jsx(aC,{className:"w-4 h-4"}),"Назад"]}),E.jsx("button",{onClick:v,disabled:h,className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-blue-400 transition-colors flex items-center justify-center gap-2",children:h?(0,E.jsxs)(E.Fragment,{children:[E.jsx(aT,{className:"w-4 h-4 animate-spin"}),"Отправка..."]}):(0,E.jsxs)(E.Fragment,{children:[E.jsx(aO,{className:"w-4 h-4"}),"Отправить в Telegram"]})}),(0,E.jsxs)("button",{onClick:async()=>{try{if(!(await fetch("/api/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sku:t})})).ok)throw Error("Failed to cleanup files");n()}catch(t){console.error("Cleanup error:",t),o("Ошибка при очистке файлов")}},className:"flex-1 bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[E.jsx(ax,{className:"w-4 h-4"}),"Начать заново"]})]})]})})})}function aL(){let[t,e]=(0,I.useState)("sku"),[r,n]=(0,I.useState)(""),[o,i]=(0,I.useState)([]),[a,s]=(0,I.useState)([]),u=async t=>{n(t),e("media")},c=t=>{console.error("Error:",t)};return E.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,E.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[E.jsx("header",{className:"text-center mb-8",children:E.jsx("div",{className:"flex items-center justify-center",children:E.jsx("img",{src:"/favicon.ico",alt:"Photo SKU Processor Logo",className:"h-12 w-auto"})})}),(0,E.jsxs)("main",{className:"max-w-4xl mx-auto",children:["sku"===t&&E.jsx(av,{onSKUSubmit:u,onError:c}),"media"===t&&E.jsx(aN,{sku:r,onBack:()=>e("sku"),onContinue:t=>{i(t),e("processing")},onError:c}),"processing"===t&&E.jsx(aM,{sku:r,files:o,onBack:()=>e("media"),onComplete:t=>{s(t),e("results")},onError:c}),"results"===t&&E.jsx(ak,{sku:r,files:a,onBack:()=>e("processing"),onRestart:()=>{e("sku"),n(""),i([]),s([])},onError:c})]})]})})}},1342:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>u,metadata:()=>a,viewport:()=>s});var n=r(5036),o=r(2195),i=r.n(o);r(5023);let a={title:"Photo SKU Processor",description:"Приложение для обработки фотографий товаров с привязкой к SKU",manifest:"/manifest.json"},s={themeColor:"#3b82f6",width:"device-width",initialScale:1,maximumScale:1,userScalable:!1};function u({children:t}){return n.jsx("html",{lang:"ru",children:n.jsx("body",{className:i().className,children:n.jsx("div",{className:"min-h-screen bg-background",children:t})})})}},1136:(t,e,r)=>{"use strict";r.r(e),r.d(e,{$$typeof:()=>i,__esModule:()=>o,default:()=>a});let n=(0,r(6843).createProxy)(String.raw`/Users/mak/Desktop/PhotoSku/src/app/page.tsx`),{__esModule:o,$$typeof:i}=n,a=n.default},5023:()=>{}};var e=require("../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),n=e.X(0,[638,883],()=>r(5144));module.exports=n})();